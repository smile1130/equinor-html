/*! permutive-javascript-sdk v19.97.7 (web) (built 2023-09-21T09:52:11.940Z) */(()=>{"use strict";var __webpack_modules__={2688:(e,t,n)=>{function r(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}n.d(t,{w:()=>r})},787:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(3735),i=n(6567);function o(e){return(0,r.zG)((0,i.Y3)((()=>JSON.parse(e))),(0,i.fS)(r.gn))}},7183:(e,t,n)=>{n.d(t,{h:()=>r});const r=e=>new i(e);class i{constructor(e){const t=this;this._worker=e,this._callbacks={},this._id=0,e.addEventListener("message",(function(e){i.onMessage(t,e)}))}set id(e){this._id=e}get id(){return this._id}newId(){const e=this.id;return this.id=this.id+1,e}static onMessage(e,t){if(n=t.data,!(Array.isArray(n)&&n.length>=2))return;var n;const[r,i,o]=t.data,s=e._callbacks[r];s&&(delete e._callbacks[r],s(i,o))}static isServiceWorker(e){return void 0!==e.controller}postMessage(e){const t=this,n=this.newId(),r=[n,e];return new Promise((function(e,o){var s;if(t._callbacks[n]=function(t,n){if(t)return o(new Error(t.message));e(n)},i.isServiceWorker(t._worker)){const e=new MessageChannel;e.port1.onmessage=function(e){i.onMessage(t,e)},null===(s=t._worker.controller)||void 0===s||s.postMessage(r,[e.port2])}else t._worker.postMessage(r)}))}}},5912:(e,t,n)=>{n.r(t),n.d(t,{CleanRoomAddon:()=>A,load:()=>C,segmentationService:()=>I});var r=n(7582),i=n(3735),o=n(2688),s=n(1500),a=n(365),c=n(6567),u=n(6934),l=n(2851),d=n(2652),g=n(4730),f=n(7826);class p{putOrResetUnprocessed(e){return(0,r.mG)(this,void 0,void 0,(function*(){return(0,i.zG)(e,c.g_((()=>u.Y3((()=>this.unprocessedPrebidAuctions.reset()),o.w)),(e=>u.Y3((()=>this.unprocessedPrebidAuctions.put(e)),o.w))),u.vx((e=>(this.reportError(`Unprocessed auctions failed to put. Got ${e}`),u.F2((0,i.Q1)())))),(e=>e()))}))}get allAuctions(){return Object.assign(Object.assign({},this.stagedAuctions),this.trackableAuctions)}constructor(e){this.prefix="[clean_room]",this.debouncedPutOrResetUnprocessed=this.setupUnprocessedPrebidAuctions(),this.stagedAuctions={},this.trackableAuctions={},this.trackAuctionsInterval=null,this.permutive=e.permutive,this.api=e.api,this.logger=e.logger,this.unprocessedPrebidAuctions=e.unprocessedEvents.PrebidAuctions,this.sessionManager=e.sessionManager,this.clientContext=e.clientContext,this.viewId=e.viewId,(0,i.zG)(e.pbjs,l.UI(c.EQ((()=>{this.logInfo("Waiting for PrebidJS to start PrebidAuctions tracking...")}),(e=>this.startPrebidAuctions(e)))))}startPrebidAuctions(e){return(0,r.mG)(this,void 0,void 0,(function*(){yield this.trackUnprocessedPrebidAuctions(),this.logDebug("Starting PrebidAuctions tracking",{prebid:e});const t=(0,f.zi)(e),n=e=>0===e.bidsReceived.length&&0===e.noBids.length?null:(0,i.zG)(this.mapToStagedAuctions(e),a.tS((()=>a.Y3((()=>e.bidsReceived.forEach((e=>{var n;("rendered"===(n=e).status||"targetingSet"===n.status)&&this.setBidToWon(t,e)}))),(e=>{const t=`Failed to process auction. Got ${(0,o.w)(e)}`;return this.reportError(t),(0,o.w)(t)})))));e.onEvent("auctionEnd",(e=>{n(e),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const c=n=>{const r=(0,d.qh)(n);this.logDebug("Processing setTargeting event",{adUnitCodes:r});const o=a.DT((e=>{let[t,n]=e;return!!t&&!!n.hb_adid}),(()=>new Error("Missing targeting data"))),c=(0,i.ls)(o,a.tS((t=>{let[n,{hb_adid:r}]=t;return(0,i.zG)(e.getAllPrebidWinningBids(),(0,s.Ew)((e=>e.adId===r&&e.adUnitCode===n)),a.Yo((()=>new Error("Prebid winning bid does not exist"))))})),a.UI((e=>{this.setBidToWon(t,e)})));return r.forEach(c)};e.onEvent("setTargeting",(e=>{c(e),this.storeAuctionsAsUnprocessed(this.allAuctions)})),e.onEvent("bidWon",(e=>{this.setBidToWon(t,e),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const u=(e,n)=>{this.logDebug("Processing render event",{isRendered:e,props:n}),n.bid&&(e&&this.setBidToRendered(t,n.bid),this.promoteAuctionToTrackable(n.bid),this.storeAuctionsAsUnprocessed(this.allAuctions),this.trackEligibleAuctions())};e.onEvent("adRenderSucceeded",(e=>{u(!0,e)})),e.onEvent("adRenderFailed",(e=>{u(!1,e)})),e.getEvents().forEach((e=>"auctionEnd"===e.eventType?n(e.args):"setTargeting"===e.eventType?c(e.args):"bidWon"===e.eventType?this.setBidToWon(t,e.args):"adRenderSucceeded"===e.eventType?u(!0,e.args):"adRenderFailed"===e.eventType?u(!1,e.args):void 0)),this.storeAuctionsAsUnprocessed(this.allAuctions,{debounced:!1}),(0,d.aT)((()=>(0,r.mG)(this,void 0,void 0,(function*(){this.trackAuctionsInterval=null;const e=this.allAuctions;this.stagedAuctions={},this.trackableAuctions={},yield this.trackPrebidAuctions(e,{useBeacon:!0}),yield this.storeAuctionsAsUnprocessed(null,{debounced:!1})}))))}))}trackUnprocessedPrebidAuctions(){return(0,i.zG)(u.Y3((()=>(0,r.mG)(this,void 0,void 0,(function*(){return(0,i.zG)(yield this.unprocessedPrebidAuctions.getIfPresent(),c.g_((()=>this.logDebug("No unprocessed PrebidAuctions found")),(e=>{var{props:t}=e,n=(0,r._T)(e,["props"]);return this.logDebug("Found unprocessed PrebidAuctions",{props:t,unprocessedData:n}),Promise.all([this.permutive.track("PrebidAuctions",t,{unprocessedData:n}),this.unprocessedPrebidAuctions.reset()])})))}))),(e=>{const t=`Failed to track unprocessed PrebidAuctions. Got ${(0,o.w)(e)}`;return this.reportError(t),(0,o.w)(t)})),(e=>e()))}setupUnprocessedPrebidAuctions(){const e=new g.b(1e3,2500),t=this.putOrResetUnprocessed.bind(this);return e.schedule(t)}storeAuctionsAsUnprocessed(e){let{debounced:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.mG)(this,void 0,void 0,(function*(){this.logDebug("Store auctions as unprocessed",{auctionsToStore:e,debounced:t});const n=u.Y3((()=>(0,r.mG)(this,void 0,void 0,(function*(){const t=(0,d.qh)(null!=e?e:{}).map((e=>{let[t,n]=e;return Object.assign(Object.assign({},n),{auction_id:t})})),n=yield this.clientContext.getClient();return(0,i.zG)(t,c.DT((e=>e.length>0)),c.UI((e=>({props:{isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",aggregations:{auctions:e}},client:n,viewId:this.viewId.get(),sessionId:this.sessionManager.getSessionId()}))))}))),o.w);return(0,i.zG)(n,u.EQ((e=>{this.reportError(`Failed to process auctions: ${e}`)}),(e=>{const n=this.debouncedPutOrResetUnprocessed(e);return t?n:Promise.all([this.putOrResetUnprocessed(e),n])})),(e=>e()))}))}mapBidProperties(e,t){var n;return{ad_id:t.adId,ad_unit_code:t.adUnitCode,advertiser_domains:(0,f.Cg)(t),advertiser_id:(e=>{var t,n;const r=e.rubicon&&"object"==typeof e.rubicon&&"advertiserId"in e.rubicon&&e.rubicon.advertiserId||(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.buyerId)||(null===(n=null==e?void 0:e.meta)||void 0===n?void 0:n.advertiserId);return r?`${r}`:void 0})(t),advertiser_name:(e=>{var t,n,r;const i=(null===(t=e.meta)||void 0===t?void 0:t.clickUrl)||(null===(n=e.adomain)||void 0===n?void 0:n[0])||(null===(r=e.meta)||void 0===r?void 0:r.advertiserName);return i?`${i}`:void 0})(t),bid_available:"string"==typeof t.statusMessage&&t.statusMessage.indexOf("empty")<0,bidder:t.bidder,bidder_timeout:(0,d.rH)(e.bidderTimeout),brand_id:(e=>{var t;const n=null===(t=e.meta)||void 0===t?void 0:t.brandId;return n?`${n}`:void 0})(t),brand_name:(e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.brandName})(t),cpm:(0,f.Qd)(t),creative_id:`${t.creativeId}`,deal_id:(0,f.$7)(t),dsp_id:(0,f.cs)(t),hb_pb:null===(n=t.adserverTargeting)||void 0===n?void 0:n.hb_pb,height:(0,d.rH)(t.height),request_timestamp:t.requestTimestamp,response_timestamp:t.responseTimestamp,time_to_respond:t.timeToRespond,width:(0,d.rH)(t.width)}}collectAdUnitCodes(e){const t=new Set;return e.reduce(((e,n)=>{let{adUnitCode:r}=n;return!r||t.has(r)||(t.add(r),e.push({ad_unit_code:r})),e}),[])}mapToStagedAuctions(e){return a.Y3((()=>{const{auctionId:t,bidsReceived:n,noBids:r}=e,i=this.collectAdUnitCodes(n),o=this.collectAdUnitCodes(r);return this.stagedAuctions[t]={bids:i,no_bids:o},this.logDebug("Added auction",this.stagedAuctions[t]),this.stagedAuctions[t]}),(e=>{const t=`Failed to map auction. Got ${(0,o.w)(e)}`;return this.reportError(t),(0,o.w)(t)}))}findAuction(e){return(0,i.zG)(this.getStagedAuction(e.auctionId),a.vx((()=>this.getTrackableAuction(e.auctionId))),a.vx((()=>this.mapToStagedAuctions({auctionId:e.auctionId,bidsReceived:[e],bidderRequests:[],noBids:[]}))))}setBidByOperation(e,t,n){const r=e=>e.hasOwnProperty("ad_id"),c=(n,c)=>{const u=e=>e.ad_id===n.adId,l=e=>e.ad_unit_code===n.adUnitCode,[d,g]=(0,i.zG)(c,(0,s.uK)((e=>r(e)&&u(e)&&l(e))),(e=>[e.left,e.right]));this.logDebug(`Bids for ${t}`,{nonMatching:d,matching:g});const f=(0,i.ls)(a.DT((e=>1===e.length),(()=>new Error("No matching bids"))),a.UI((e=>{let[n]=e;return this.logDebug(`Found bid for ${t}`,{found:n}),{found:n,others:d}}))),p=a.DT((e=>e.length<=1),(()=>new Error("Ad ID is not unique"))),m=(0,i.ls)(f,a.vx((()=>a.Y3((()=>{const i=this.mapBidProperties(e,n),o=d.filter((e=>!(!l(e)||!r(e))||!l(e)));return this.logDebug(`Creating bid for ${t}`,{created:i,others:o}),{found:i,others:o}}),(e=>(0,o.w)(`Failed to create bid. Got ${(0,o.w)(e)}`))))));return(0,i.zG)(g,p,a.tS(m))};return(0,i.ls)((e=>(0,i.zG)(this.findAuction(e),a.tS((r=>(0,i.zG)(c(e,r.bids),a.tS((e=>{let{found:t,others:r}=e;return a.Y3((()=>({updated:n(t),others:r})),o.w)})),a.UI((e=>{let{updated:n,others:i}=e;const o=[n,...i];r.bids=o,this.logDebug(`Bid operation ${t} successful`,n,o)}))))))),a.Vn((e=>{const n=`Failed bid operation ${t}. Got ${(0,o.w)(e)}`;return this.reportError(n),(0,o.w)(n)})))}setBidToWon(e,t){return this.setBidByOperation(e,"setWon",(e=>Object.assign(Object.assign({},e),{winning_bid:!0})))(t)}setBidToRendered(e,t){return this.setBidByOperation(e,"setRendered",(e=>Object.assign(Object.assign({},e),{winning_bid:!0,is_rendered:!0,rendered_timestamp:(new Date).getTime()})))(t)}promoteAuctionToTrackable(e){let{auctionId:t}=e;const n=this.stagedAuctions[t];if(n){if(this.trackableAuctions[t])return this.logError("Auction is already promoted to trackable",{auction:this.trackableAuctions[t]});this.trackableAuctions[t]=n,delete this.stagedAuctions[t],this.logDebug("Auction promoted to trackable",{auctionId:t,trackableAuctions:this.trackableAuctions})}}trackEligibleAuctions(){if(this.trackAuctionsInterval)return;this.trackAuctionsInterval=(0,d.PQ)((()=>(0,r.mG)(this,void 0,void 0,(function*(){if(!this.trackAuctionsInterval)return;this.trackAuctionsInterval=null;const e=this.trackableAuctions;this.trackableAuctions={},yield this.trackPrebidAuctions(e),yield this.storeAuctionsAsUnprocessed(this.stagedAuctions,{debounced:!1})}))),{timeout:5e3})}trackPrebidAuctions(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n=(0,d.qh)(e).map((e=>{let[t,n]=e;return Object.assign(Object.assign({},n),{auction_id:t})}));n.length&&(yield this.permutive.track("PrebidAuctions",{isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",aggregations:{auctions:n}},t),this.logDebug("Tracked auctions",{auctions:n}))}))}getStagedAuction(e){return(0,i.zG)(this.stagedAuctions[e],a.DT(Boolean,(()=>new Error("Staged auction not found"))),a.Vn((t=>(this.logError(t,{auctionId:e}),t))))}getTrackableAuction(e){return(0,i.zG)(this.trackableAuctions[e],a.DT(Boolean,(()=>new Error("Trackable auction not found"))),a.Vn((t=>(this.logError(t,{auctionId:e}),t))))}reportError(e){return this.api.reportError(`${this.prefix} ${e}`)}logInfo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.log(this.prefix,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(this.prefix,...t)}}var m=n(6930),h=n(167),_=n(2116);const v=(e,t)=>(0,i.zG)(b(e),(0,h.n)({backoffAfterErrorMs:6e5}),_.YO("fetchSegments"),_.ak("fullSegmentationResult",(e=>{let{fetchSegments:n}=e;return(0,m.m)(l.UI((e=>({validityKey:()=>e.userId,freshnessKey:()=>e.sessionId,refresh:()=>(0,i.zG)([e.customCohorts,e.standardCohorts],c.DT((()=>e.isInitd)),c.tS((t=>{let[r,i]=t;return n({userId:e.userId,fps:r,stds:i,newSession:!0})})),c.UI((t=>t.then((t=>{let{queries:n}=t;return{queries:n,viewId:e.viewId,sessionId:e.sessionId}})))))})),t))})),_.ak("deltaSegmentationResult",(e=>{let{fullSegmentationResult:n,fetchSegments:r}=e;return(0,m.m)((0,i.zG)(l.vP({input:t,fullSegmentationResult:n}),l.UI((e=>{let{input:t,fullSegmentationResult:n}=e;return{validityKey:()=>(0,i.zG)(n,c.UI((e=>e.sessionId)),c.fS((()=>"")),(e=>`${t.userId},${e}`)),freshnessKey:()=>t.viewId,refresh:()=>(0,i.zG)(n,c.hX((()=>t.isInitd)),c.hX((e=>e.sessionId===t.sessionId&&e.viewId!==t.viewId)),c.UI((()=>[t.customCohorts,t.standardCohorts])),c.tS((e=>{let[n,i]=e;return r({userId:t.userId,fps:n,stds:i,newSession:!1})})))}}))))})),_.UI((0,i.ls)((e=>{let{fullSegmentationResult:t,deltaSegmentationResult:n}=e;return l.vP(t,n)}),l.UI((e=>{let[t,n]=e;const r=(0,i.ls)(c.UI((e=>e.queries)),c.fS(w));return E.concat(r(n),r(t))}))))),y=(e,t)=>n=>{(0,i.zG)(n.segments.direct_buy,l.YP((t=>{0===t.length?e.removeExternalData(k):e.setExternalJsonData(k,t)}))),(0,i.zG)((0,i.zG)(l.vP(n.segments.programmatic,l.UI((e=>e.demandPartnerCohorts),t)),l.UI((e=>{let[t,n]=e;return[...n,...t]}))),l.YP((t=>{0===t.length?e.removeExternalData(S):e.setExternalJsonData(S,t)})))},b=e=>t=>{var{newSession:n}=t,i=(0,r._T)(t,["newSession"]);return e.permutiveApi.req({url:e.permutiveUrls.getAdvertiserEndpointUrl("/segment",c.G(e.config.advertiserApiVersion),[["new-session",n.toString()]]),method:"POST",payload:i,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>{var t,n;return{queries:{direct_buy:null!==(t=e.queries.direct_buy)&&void 0!==t?t:[],programmatic:null!==(n=e.queries.programmatic)&&void 0!==n?n:[]}}}))},w=()=>({direct_buy:[],programmatic:[]}),E={concat:(e,t)=>({direct_buy:[...new Set([...e.direct_buy,...t.direct_buy])],programmatic:[...new Set([...e.programmatic,...t.programmatic])]})},k="_pcrdbs",S="_pcrprs",P="clean_room",C=e=>{e.q.push({functionName:"addon",arguments:[P,{}]})};class A extends p{}function I(e,t){return(0,i.zG)(t,l.UI((e=>{var{initdAddons:t}=e,n=(0,r._T)(e,["initdAddons"]);return Object.assign(Object.assign({},n),{isInitd:t.has(P)})})),(t=>L(e,t)))}const L=function(e,t){const n=w();return(0,i.zG)(t,_.KD([[e=>!e.consent||e.addonsLoaded&&!e.isInitd,_.K4((()=>l.a9(n)))],v(e,t)]),_.UI((0,i.ls)(l.xH,(e=>({segments:{all:(0,i.zG)(e,l.UI((e=>[...new Set([...e.direct_buy,...e.programmatic])])),l.D8(d.cO)),direct_buy:(0,i.zG)(e,l.UI((e=>e.direct_buy)),l.D8(d.cO)),programmatic:(0,i.zG)(e,l.UI((e=>e.programmatic)),l.D8(d.cO))}})),(0,d.bw)(y(e.externalData,t)))))}},3992:(e,t,n)=>{n.d(t,{GL:()=>o,HJ:()=>s,SF:()=>u,UM:()=>a,ho:()=>d,iE:()=>l,t_:()=>c});let r=[],i=!1;const o=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return s((()=>e(...n)))},s=(e,t)=>{if(!i){const n=window.setTimeout(e,t);return()=>window.clearTimeout(n)}let n;const o=()=>{void 0!==n&&i&&r.length<1e4&&r.push([n,performance.now()]),n=void 0},s=[window.setTimeout((()=>{n=performance.now(),window.requestAnimationFrame(o),e()}),t),window.setTimeout(o,t)];return()=>{void 0===n&&s.forEach((e=>window.clearTimeout(e)))}},a=(e,t)=>{if(!i){const n=window.setInterval(e,t);return()=>window.clearInterval(n)}let n=!1,r=()=>{};const o=window.setInterval((()=>{r=s((()=>{n||e()}))}),t);return()=>{n=!0,r(),window.clearInterval(o)}},c=e=>new Promise(((t,n)=>e.then(o(t),o(n)))),u=e=>{const t=(n=e,()=>c(n()));var n;return()=>new Promise((e=>s((()=>e(t())))))},l=()=>{const e=r;return r=[],e},d=e=>{i=e}},2851:(e,t,n)=>{n.d(t,{oQ:()=>P,a9:()=>p,Ue:()=>f,D8:()=>k,BT:()=>S,VS:()=>_,xH:()=>v,g_:()=>y,p4:()=>E,UI:()=>h,vP:()=>b,bw:()=>C,YP:()=>m});var r=n(2688),i=n(365),o=n(3735),s=n(6567),a=n(3328),c=n(2652);function u(e){let t=e,n=[],r=!1;return{addListener(e){if(r)return()=>{};let i=t;const o=()=>{Object.is(t,i)||(i=t,e(t))};n=[...n,o];return()=>{n=n.filter((e=>e!==o))}},notify(e){if(r)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,n.forEach((e=>e())))},terminate(){r=!0,n=[]}}}function l(e,t){let n=0;return function(){try{if(n++>0)throw new Error(e);return t(...arguments)}finally{n--}}}function d(e,t){let n=[...new Set(e)].filter((e=>"final"!==e.state));if(0===n.length)return{state:"final",onStateChange:()=>()=>{}};const r=()=>0===n.length?"final":n.some((e=>"might_change"===e.state))?"might_change":"nominal",[i,o]=g(r(),(e=>"might_change"!==e&&t())),s=()=>o(r());return n.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":n=e.filter((e=>"final"!==e.state)),s();break;case"might_change":o("might_change");break;case"nominal":s();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),i}function g(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:n,notify:r,addListener:i}=u(e),o={state:e,onStateChange:i},s=l("Disallowed recursion in Branch.",(e=>{if("final"===o.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{null==t||t(e),o.state=e,r(e)}finally{"final"===e&&n()}}));return[o,s]}function f(e){const[t,n,r]=function(){const[e,t]=g("nominal"),n=l("Disallowed recursion in Branch.",(n=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const r=e.state;try{t("might_change"),n()}finally{t(r)}}));return[e,n,()=>t("final")]}(),[i,o]=A(t,e);return[i,e=>n((()=>o(e))),r]}function p(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function m(e){return t=>{const n=t.onChange(e);return e(t.current),n}}function h(e,t){if(t){const[n,r]=A(t.branch,e(t.current));return t.onChange((t=>r(e(t)))),n}return t=>h(e,t)}function _(e,t){return t?v(h(e,t)):t=>v(h(e,t))}function v(e){if("final"===e.branch.state)return e.current;const[t,n]=function(e,t){let n=t;const r=[e.state,n.state].includes("might_change")?"might_change":"nominal",[i,o]=g(r),s=e=>t=>{switch(t){case"final":o(e().state);break;case"might_change":o("might_change");break;case"nominal":"might_change"===e().state?o("might_change"):o("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(s((()=>n)));const a=s((()=>e));let c=n.onStateChange(a);return[i,e=>{n=e,c(),c=e.onStateChange(a),a(n.state)}]}(e.branch,e.current.branch),[r,i]=A(t,e.current.current);let o=e.current.onChange(i);return e.onChange((e=>{o(),o=e.onChange(i),n(e.branch),i(e.current)})),r}function y(e,t,n){if(!n)return n=>y(e,t,n);let r=e;return h((e=>(r=t(r,e),r)),n)}function b(){if(0===arguments.length||I(arguments.length<=0?void 0:arguments[0]))return w(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,o.zG)(Object.values(e),(e=>w(...e)),h((0,o.ls)(a.Su(((e,n)=>[t[e],n])),Object.fromEntries)))}function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return p([]);if(1===t.length)return h((e=>[e]))(t[0]);let r=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");r=!0}))));const i=t.map((0,c.vg)("branch")),o=()=>{r&&(r=!1,u(t.map((e=>e.current))))},s=d(i,o),[a,u]=A(s,t.map((e=>e.current)));return a}function E(e){const[t,n,a]=f(s.YP);return e.then(i.F2).catch((0,o.ls)(r.w,i.t$)).then((0,o.ls)(s.G,n,a)),t}function k(e){const t=e.hasOwnProperty("equals")?e.equals:e;return function(e){return t=>{if("final"===t.branch.state)return t;let n=s.YP;return h((t=>{if(s.Wi(n))return n=s.G(t),t;const r=e(n.value,t);return n=s.G(r),r}),t)}}(((e,n)=>t(e,n)?e:n))}function S(e){return t=>{const[n,r]=function(e){const[t,n]=g(e.state),r=e.onStateChange(n);return[t,()=>{r(),n("final")}]}(t.branch),[i,a]=A(n,t.current);let c=s.G(t.onChange(a));return e((()=>(0,o.zG)(c,s.UI((e=>{c=s.YP,e(),r()}))))),i}}function P(e){return I(e)?e:p(e)}function C(e){return t=>(m(e)(t),t)}function A(e,t){if("final"===e.state)return[p(t),()=>{}];const n=u(t);e.onStateChange((e=>{"final"===e&&n.terminate()}));let r=t;return[{get current(){return r},onChange:n.addListener,branch:e},l("Disallowed recursion in Ref.",(e=>{r=e,n.notify(r)}))]}function I(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},2116:(e,t,n)=>{n.d(t,{K4:()=>u,KD:()=>v,UI:()=>g,VS:()=>p,YO:()=>_,ak:()=>h,bw:()=>f,dQ:()=>l,of:()=>d,vP:()=>m});var r=n(7582),i=n(2851),o=n(3735),s=n(2652),a=n(4923),c=n(6567);const u=e=>(0,o.ls)((t=>{var{previousState:n}=t,i=(0,r._T)(t,["previousState"]);return e(i)}),(e=>({value:e,state:i.a9(void 0)}))),l=o.yR,d=(0,o.ls)(o.a9,u),g=e=>t=>(0,o.ls)(t,(0,s.rO)({value:e})),f=e=>t=>(0,o.ls)(t,(0,s.rO)({value:(0,s.bw)(e)}));function p(e){return t=>n=>{var{previousState:o,onServiceStop:s}=n,a=(0,r._T)(n,["previousState","onServiceStop"]);const c=E(),u=t(Object.assign({previousState:Array.isArray(o)?o[0]:void 0,onServiceStop:c.onServiceStop},a)),l=E(),d=e(u.value)(Object.assign({previousState:Array.isArray(o)?o[1]:void 0,onServiceStop:l.onServiceStop},a));return s(c.stop),s(l.stop),{value:d.value,state:i.vP(u.state,d.state)}}}function m(e){return t=>{var{previousState:n}=t,s=(0,r._T)(t,["previousState"]);const c=w(n)?n:{},u=(0,o.zG)(e,a.Su(((e,t)=>t(Object.assign({previousState:c[e]},s)))));return{value:(0,o.zG)(u,a.UI((e=>e.value))),state:(0,o.zG)(u,a.UI((e=>e.state)),(e=>i.vP(e)))}}}function h(e,t){return n=>(0,o.ls)((0,s.rO)({previousState:b}),(s=>{var{onServiceStop:a}=s,c=(0,r._T)(s,["onServiceStop"]);const u=E(),l=n(Object.assign({onServiceStop:u.onServiceStop},c)),d=E(),g=t(l.value)(Object.assign(Object.assign({onServiceStop:d.onServiceStop},c),{previousState:c.previousState[e]}));return a(u.stop),a(d.stop),{value:(0,o.zG)([l.value,g.value],(t=>{let[n,r]=t;if(!w(n))throw new Error;return Object.assign(Object.assign({},n),{[e]:r})})),state:(0,o.zG)(i.vP(l.state,g.state),i.UI((t=>{let[n,r]=t;if(!w(n))throw new Error;return Object.assign(Object.assign({},n),{[e]:r})})))}}))}function _(e){return t=>(0,o.ls)((0,s.rO)({previousState:(0,o.ls)(b,(t=>t[e]))}),t,(0,s.rO)({value:t=>({[e]:t}),state:i.UI((t=>({[e]:t})))}))}const v=e=>{const t=e.slice(0,-1),n=e.slice(-1)[0],r=[...t.map((e=>{let[t,n]=e;return[t,(0,o.a9)(n)]})),(0,o.a9)(n)];return(0,o.ls)(i.UI((0,s.lo)(r)),y)};function y(e){return t=>{var{previousState:n,onServiceStop:a}=t,u=(0,r._T)(t,["previousState","onServiceStop"]);return(0,o.zG)(e,i.BT(a),i.g_({state:i.a9(n),stop:()=>{},value:c.YP},((e,t)=>{let{state:n,stop:r}=e;r();const{stop:i,onServiceStop:o}=E(),{state:s,value:a}=t(Object.assign({previousState:n.current,onServiceStop:o},u));return{state:s,stop:i,value:c.G(a)}})),(0,s.bw)((e=>a((()=>e.current.stop())))),(e=>({value:i.UI((0,o.ls)((e=>e.value),c.fS((()=>{throw new Error}))),e),state:i.VS((e=>e.state),e)})))}}function b(e){return w(e)?e:{}}function w(e){return"object"==typeof e&&null!==e}function E(){const e=[];return{stop:()=>{for(;e.length>0;)e.shift()()},onServiceStop:t=>e.push(t)}}},167:(e,t,n)=>{n.d(t,{n:()=>c});var r=n(6567),i=n(2851),o=n(3735),s=n(2652),a=n(2116);function c(e){return t=>(0,o.zG)(i.oQ(e),i.UI((0,s.rO)({backoffAfterErrorMs:e=>null!=e?e:0,backoffAfterSuccessMs:e=>null!=e?e:0})),(e=>a.dQ((n=>{let{previousState:a}=n;const[c,u]=i.Ue(function(e){if("object"!=typeof e||null===e)return{lastSuccess:0,lastError:0};return e}(a)),l=(0,o.zG)(i.vP(c,e),i.UI((e=>{let[t,n]=e;return Math.max(t.lastError+n.backoffAfterErrorMs,t.lastSuccess+n.backoffAfterSuccessMs)})));return{state:c,value:(0,o.ls)(r.DT((()=>Date.now()>=l.current)),r.UI(t),r.UI((0,s.bw)((e=>e.then((()=>u(Object.assign(Object.assign({},c.current),{lastSuccess:Date.now()}))),(()=>u(Object.assign(Object.assign({},c.current),{lastError:Date.now()}))))))))}}))))}},6930:(e,t,n)=>{n.d(t,{m:()=>u});var r=n(3735),i=n(365),o=n(6567),s=n(2851),a=n(2652),c=n(2116);const u=e=>c.dQ((t=>{let{onServiceStop:n,previousState:c}=t;const u=function(e){if("object"!=typeof e||null===e)return{validityKey:"",inFlight:o.YP,lastSuccess:o.YP};return e}(c),d=(0,r.zG)(e,s.BT(n),s.UI((e=>"currentTimestampSecs"in e&&"freshness"in e&&"validity"in e?e:{currentTimestampSecs:0,validity:{key:e.validityKey,maxAge:Number.MAX_SAFE_INTEGER},freshness:{key:e.freshnessKey,maxAge:Number.MAX_SAFE_INTEGER},refresh:e.refresh})),s.g_(s.a9(u),((e,t)=>{const n=t.validity.key(),c=o.hX((e=>t.currentTimestampSecs-e.timestamp<=t.validity.maxAge)),u=(0,a.HP)(t.freshness.key),d=o.hX((e=>t.currentTimestampSecs-e.timestamp<=t.freshness.maxAge&&e.freshnessKey===u())),g=(0,r.zG)(e,s.UI((0,r.ls)(o.DT((e=>e.validityKey===n)),o.EQ((()=>({validityKey:n,inFlight:o.YP,lastSuccess:o.YP})),(0,a.rO)({inFlight:c,lastSuccess:c})))),s.D8(l));if((0,r.zG)(g.current,(e=>(0,r.zG)(e.inFlight,o.wp((()=>e.lastSuccess)),d,o.pC))))return g;const f=()=>({timestamp:t.currentTimestampSecs,freshnessKey:u(),output:o.YP});return(0,r.zG)(t.refresh(),o.EQ((()=>g),(0,r.ls)(s.p4,s.VS(o.EQ((()=>(0,r.zG)(g,s.UI((e=>Object.assign(Object.assign({},e),{inFlight:o.G(f())}))))),i.EQ((e=>g),(e=>s.a9({validityKey:n,inFlight:o.YP,lastSuccess:o.G(Object.assign(Object.assign({},f()),{output:o.G(e)}))}))))))))})),s.xH,s.D8(l));return{value:s.UI((0,r.ls)((0,a.vg)("lastSuccess"),o.tS((0,a.vg)("output"))),d),state:s.UI((e=>Object.assign(Object.assign({},e),{inFlight:o.YP})),d)}}));const l=(e,t)=>e.validityKey===t.validityKey&&e.inFlight===t.inFlight&&e.lastSuccess===t.lastSuccess},6967:(e,t,n)=>{n(2497),n(5165)},1540:(e,t,n)=>{n.d(t,{lg:()=>h,Bt:()=>_});var r=n(7582),i=n(1500),o=n(3735),s=n(6567),a=n(2751),c=n(2652);class u{constructor(e,t,n,r){this.userId=e,this.network=t,this.api=n,this.logger=r,this.tag="appnexus",this.ttlInSeconds=86400,this.usedForThirdPartyData=!0,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["","0","-1"]}getId(){return this.logger.debug("identities[appnexus]: start HTTP request"),(0,c.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.appnexus(this.url).then((e=>(this.logger.debug("identities[appnexus]: end HTTP request"),{type:"attempted",result:(0,o.zG)((0,s.DT)((e=>this.isValidAlias(e.uid)))(e),(0,s.UI)((e=>e.uid)))})),(e=>({type:"attempted",result:s.YP})))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}class l{constructor(e,t,n,r,i){this.config=e,this.network=t,this.api=n,this.userId=r,this.logger=i,this.tag="pxid",this.ttlInSeconds=86400,this.usedForThirdPartyData=!1,this.url=`https://e1c3fd73-dd41-4abd-b80b-4278d52bf7aa.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,c.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,s.ij)(e.uid)})),(e=>({type:"attempted",result:s.YP})))}reset(){return(0,c.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}const d=new Set(["public","email","email_md5","email_sha256","ip_address"]);var g=n(2851),f=n(4923),p=n(2197);const m=p.ff((e=>void 0===e));class h{constructor(e,t,n,r,i){this.metrics=e,this.trace=t,this.permutiveData=n,this.identityProviderEnv=r,this.logger=i,this.providers={};const s=this.getCachedIdentitiesAndMigrateIfRequired(),[c,u]=g.Ue(s);this.identityMapRef=c,this.setIdentityMap=u,c.onChange((e=>{this.logger.debug("[identities] Updating to",e),this.permutiveData.setData("identities",e)})),this.ref=(0,o.zG)(c,g.UI((0,o.ls)(f.UI((e=>e.value)),f.hX(m))),g.D8(f.Eh(a.Eq))),this.thirdParty=this.prepareThirdPartyIdentities()}get identities(){return this.identityMapRef.current}prepareThirdPartyIdentities(){this.logger.debug("[Identities]","loading 3rd party identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),n=[{load:e=>{return t=e.config,n=e.network,r=e.api,i=e.userId,o=e.logger,(0,s.G)(new l(t,n,r,i,o));var t,n,r,i,o}},{load:e=>{return t=e.userId,n=e.network,r=e.api,i=e.logger,(0,s.G)(new u(t,n,r,i));var t,n,r,i}},{load:e=>(e.cookies,e.messages,s.YP)},{load:e=>(e.cookies,s.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,s.YP)}],r=(0,i.oA)(n.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,o.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(r).then((e=>e.map((e=>{let[t,n]=e;return this.providers[t.tag]=t,this.mapTPDIdentityIfPresent(t.tag,n,t.ttlInSeconds)})))).then((e=>this.setIdentities(e))).then((0,c.bw)((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()})))}getPrioritizedIdentities(e){const t={default:0,appnexus:1,pxid:1},n=Object.entries(e).map((e=>{let[t,{id:n,expiry:r,priority:i}]=e;return Object.assign(Object.assign(Object.assign({tag:t},n?{id:n}:{}),r?{expiry:r}:{}),void 0!==i?{priority:i}:{})})),r=n.filter((e=>((e,t)=>!!e.id&&!(0,i.t9)(a.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),o=n.filter((e=>((e,t)=>!!e.id&&!!(0,i.t9)(a.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),c=(0,i.DZ)((e=>(0,s.ij)(e.priority)))(r),u=c.length>0?Math.max(...c):0,l=r.map((e=>void 0!==e.priority?Object.assign(Object.assign({},e),{priority:e.priority}):Object.assign(Object.assign({},e),{priority:u+1}))),d=o.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:u+v}:{tag:e.tag,id:e.id,priority:u+y}));return l.concat(d)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,n=e=>{throw new Error(e)},r=e=>(e.forEach((e=>{(e=>"string"==typeof e.id&&"string"==typeof e.tag)(e)||n(t),(e=>"email_sha256"!==e.tag||h.emailSHA256Regex.test(e.id))(e)||n("Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")})),e);return"string"==typeof e?(i=e).length>0?[{id:i,tag:"default"}]:n(t):Array.isArray(e)?r(e):n(t);var i}extractIdentifyFromQueue(e){let{global:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=()=>t.q.findIndex((e=>"identify"===e.functionName)),i=(e,n)=>{if(e<0)return n;const o=t.q.splice(e,1)[0],s=this.parseCustomerDefinedIdentities(o.arguments[0]);return i(r(),n.concat(s))};return i(r(),n)}setIdentities(e){const t=e.filter((e=>!d.has(e.tag))).reduce(((e,t)=>{let{tag:n,id:r,expiry:i,priority:o}=t;return void 0===this.identities[n]&&this.logger.debug(`identities[${n}]: added`),e[n]=Object.assign(Object.assign(Object.assign({},r?{value:r}:{}),i?{expiry:i}:{}),void 0!==o?{priority:o}:{}),e}),{}),n=this.ref.current;this.setIdentityMap(Object.assign(Object.assign({},this.identities),t));const r=this.ref.current;return{identifyRequestRequired:()=>!f.xb(r)&&!f.Eh(a.Eq).equals(n,r)}}reset(){return(0,r.mG)(this,void 0,void 0,(function*(){this.setIdentityMap({}),yield Promise.all(Object.values(this.providers).map((e=>e.reset())))}))}getFilteredIdentities(e){return(0,c.m8)(...Object.entries(this.identities).filter((t=>{let[n,r]=t;return e(n,r)})).map((e=>{let[t,{value:n,expiry:r,priority:i}]=e;return(0,o.bc)(t,Object.assign(Object.assign({id:n},r?{expiry:r}:{}),void 0!==i?{priority:i}:{}))})))}shouldAskForNewIdentity(e){var t;const n=(0,s.ij)(null===(t=this.identities)||void 0===t?void 0:t[e.tag]);return(0,s.g_)((()=>!0),this.isIdentityExpired)(n)}getCachedTPDIdentity(e){return this.identities[e]?(0,s.ij)(this.identities[e].value):s.YP}mapTPDIdentityIfPresent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400;const r=()=>Date.now()+Math.floor(1e3*n);return(0,s.g_)((()=>({tag:e,expiry:r()})),(t=>({tag:e,id:t,expiry:r()})))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,o.bc)(e,s.YP):(0,o.zG)(t.result,(t=>this.metrics.track({name:(0,s.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(n=>(0,o.bc)(e,t.result)))))}isIdentityExpired(e){return"number"==typeof e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,c.m8)(...Object.entries(e).filter((e=>{let[t,n]=e;return!this.isIdentityExpired(n)&&!d.has(t)}))))(this.permutiveData.getData("identities")||{})}}h.emailSHA256Regex=/^[a-f0-9]{64}$/;const _=(e,t,n,r,o)=>{const s=(e,t)=>{const n=["(null)"];return n.indexOf(e)>-1||!!w[e]||(0,i.jV)(a.Eq)(t,n).length>0},c=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,u={"be668577-07f5-444d-98e0-222b990951b1":s,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,n)=>["thestudentroom.co.uk"].some((e=>n.indexOf(e)>-1))&&(0,i.jV)(a.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":s,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":c,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":c,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},l={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!b[e]},d=u[e]||l[t];return!!d&&d(o,n,r)},v=2,y=3,b={},w={}},7658:(e,t,n)=>{n.d(t,{z:()=>r});class r{ingestIfEligible(e){return Promise.resolve()}}},922:(e,t,n)=>{n.d(t,{CL:()=>d,D0:()=>i,ED:()=>o,EW:()=>g,MU:()=>h,PH:()=>l,UW:()=>m,Uy:()=>c,eV:()=>s,jH:()=>f,mL:()=>p,qr:()=>a,t2:()=>u});var r=n(9853);const i=(0,r.MU)("engagement_edge_only",!0),o=(0,r.MU)("segment_transition_edge_only",!0),s=(0,r.MU)("track_form_submission",!0),a=(0,r.MU)("track_link_click",!0),c=(0,r.MU)("track_pageview_complete",!0),u=(0,r.MU)("track_pageview_engagement",!0),l=((0,r.$S)("sync_segments_cookie",!1),(0,r.$S)("track_slot_clicked",!0)),d=(0,r.$S)("track_slot_rendered",!0),g=(0,r.$S)("track_slot_viewable",!1),f=(0,r.$S)("track_targeting_keys",!1),p="_psegs",m=!0,h=6e5},4673:(e,t,n)=>{n.d(t,{U:()=>r});const r={$ip_address:"$ip_address",$ip_address_hash:"$ip_address_hash",$ip_geo_info_city:"$ip_geo_info_city",$ip_geo_info_continent:"$ip_geo_info_continent",$ip_geo_info_country:"$ip_geo_info_country",$ip_geo_info_postal_code:"$ip_geo_info_postal_code",$ip_geo_info_province:"$ip_geo_info_province",$ip_isp_info_autonomous_system_organization:"$ip_isp_info_autonomous_system_organization",$ip_isp_info_isp:"$ip_isp_info_isp",$ip_isp_info_organization:"$ip_isp_info_organization"}},8975:(e,t,n)=>{n.d(t,{v:()=>o});class r{constructor(e,t,n,r,i,o,s){this.logger=e,this.permutive=t,this.id=n,this.segmentCode=r,this.triggerType=i,this.config=o,this.workspaceLevelConfig=s,this.prefix="[Activation]"}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const n={reaction_id:this.id,type:e};this.logger.warn(this.prefix,"Tracking is disabled",n)}}var i=n(9853);class o{constructor(e,t,n){this.logger=e,this.permutive=t,this.clientContext=n,this.optimisedActivationsConfig={dfp:{dfp:[16780,17138,17135,17068,77423,77425,76328,57152,77426,91345,75311,76378,101389,77520,73221,71282,71287,104405,72255,72256,72257,18312,18445,18732,18320,18317,18268,18295,18298,18807,19902,20431,22710,21538,34415,34414,24101,21541,21535,21540,26440,26442,26443,27111,30222,28394,32729,88865,20494,56089,56090,98331,41489,42437,94606,94607,94608,17128,17127,58181,18318,18212,16842,17176,17180,16843,16782,18314,55914,18323,18264,17117,18260,18440,18263,18731,18247,18246,18253,18439,18437,18733,18245,18734,18240,18443,18356,18735,18239,18790,18297,18238,17183,18791,55934,17427,17187,17173,17124,17186,18321,18254,17185,17182,18797,18315,18250,17174,18248,17125,18316,18310,17075,18270,18271,16987,18803,18269,16982,18805,18294,16781,18806,19669,18300,20008,20277,20278,20279,20281,20283,58310,20534,20531,20469,21267,20645,20646,20714,20715,20833,22514,22515,22529,24102,24103,24104,24105,24106,23027,24339,23937,32094,32095,29259,29255,38068,37314,42438,42439,42441,51101,51098,51100,51099,52142,52127,52133,66495,99504,56274,92621,92622,99536,105294,99689,75874,78743,78740,79183,79187,79188,79190,74123,74349,104640,103258,104170,79184,73402,74664,101060,101061,74665,74659,74657,74662,74661,74660,81780,81781,81782,81783,81784,81785,81786,81787,81788,81789,81790,81791,81792,81793,81794,81795,102103,95434,102153,101171,102212,102213,102214,100186,84257,98074,85622,86173,87626,87696,87738,87739,87740,87741,87742,87744,88113,101387,101388,105978,105979,106717,109466,62486,113877,113878,113879,113880,114692,116599,117084,117171,120985,122044,122045,122046,122047,122049,122051,122054,124792,123787,126197,76402,125770,128830,131423,136045,136624,136628,136630,136865,139619,139666,143049,139562,147446,141502,147779,147839,148102,142287,148849,149016,148898,149036,149349,149351,151073,153825,156961,156645,158432,158434,158465,158466,158533,158581,158583,158585,158589,158591,162776,163161,163164,163168,163169,163170,163171,163172,163173,163808,164501,164538,165850,166461,167131],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:1},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[]}}getSpecializedActivations(e){return this.optimisedActivationsConfig[e]}getActivations(e){return(0,i.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new r(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,n=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(r=t).operator?r.criteria.every(n):r.criteria.some(n));var r}}},9853:(e,t,n)=>{n.d(t,{$S:()=>s,Hn:()=>i,MU:()=>o});const r={overlays:{auto_init:!0,activationConfigs:[]},web:{auto_init:!1,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},scriptrunner:{auto_init:!0,activationConfigs:[]},clean_room:{auto_init:!0,publisher_permissions:{"89a805cd-dd0e-4976-93bc-d1ec7bfa4363":["allow_custom_insights","allow_targeting_known_audiences","allow_targeting_modelled_audiences","allow_insights"]},activationConfigs:[]},classification_models:{auto_init:!0,activationConfigs:[]},dfp:{auto_init:!0,networks:[{network_code:"5887",name:"Default"}],track_slot_rendered:!0,track_slot_viewable:!0,track_slot_clicked:!0,track_targeting_keys:!1,activationConfigs:[]},tracking_pixel:{auto_init:!0,activationConfigs:[]},dbm:{auto_init:!0,entity_id:926898717,product_type:"INVITE_PARTNER",activationConfigs:[]}},i=e=>{const t=r[e];return(e,n)=>{var r;return null!==(r=null==t?void 0:t[e])&&void 0!==r?r:n}},o=i("web"),s=i("dfp");i("facebook_pixel_v2")},2836:(e,t,n)=>{n.d(t,{z:()=>o});var r=n(3030);class i{constructor(e){this.context=e}getContext(){return this.context}updateContext(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{let[t,n]=e;this.context[t]=n}))}}class o extends i{constructor(e){super(e)}getClient(){var e;const t=null!==(e=document.title)&&void 0!==e?e:"";return Promise.resolve({type:"web",user_agent:navigator.userAgent||"",url:(0,r.bk)(window.location.href),domain:window.location.hostname||"",title:t,referrer:(0,r.bk)(document.referrer)})}}},389:(e,t,n)=>{n.d(t,{p:()=>o});var r=n(3577);const i="permutive-pvc";class o extends((0,r.h)(i)){constructor(e){super(e)}}},5865:(e,t,n)=>{n.d(t,{J:()=>i});var r=n(3577);class i extends((0,r.h)("permutive-unprocessed-pba")){constructor(e){super(e)}}},3577:(e,t,n)=>{n.d(t,{h:()=>a});var r=n(3735),i=n(6567),o=n(7554);const s=e=>t=>class extends t{constructor(){super(...arguments),this.key=e}put(e){return this.db.then((t=>t.put(e,this.key))).then(r.Q1)}getIfPresent(){return this.db.then((e=>e.get(this.key))).then(i.ij)}reset(){return this.db.then((e=>e.delete(this.key)))}},a=e=>(0,r.zG)(class{constructor(e){this.db=Promise.resolve((0,o.E)(e.namespace,e.logger,e.consentTracking))}},s(e))},5700:(e,t,n)=>{n.d(t,{LP:()=>o,dG:()=>r,eP:()=>i});const r=4096,i=`Cookie exceeds maximum supported size of ${r} bytes for most browsers.`,o="Cookie is missing required parameters."},5461:(e,t,n)=>{n.d(t,{S:()=>c});var r=n(3735),i=n(5700);class o{constructor(e,t,n){this.namespace=e,this.config=t,this.logger=n}makeCookie(e,t,n){return[encodeURIComponent(this.namespace.getNamespacedStorageKey(e)),"=",t?encodeURIComponent(t):"","; expires=",n,"; domain=",this.config.cookieDomain,"; path=/; samesite=none; secure"].join("")}setCookie(e,t){var n;if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:r,cookieDomain:o}=null!==(n=this.config)&&void 0!==n?n:{};throw this.logger.warn(`Unable to set cookie. ${i.LP}`,{value:t,cookieName:e,cookieExpiry:r,cookieDomain:o}),new Error(i.LP)}const r=this.makeCookie(e,t,this.config.cookieExpiry);if(r.length>i.dG)throw this.logger.warn(`Unable to set cookie ${this.namespace.getNamespacedStorageKey(e)}. ${i.eP}`),new Error(i.eP);return this.logger.debug(`Setting cookie ${r}`),document.cookie=r,!0}getCookie(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e:this.namespace.getNamespacedStorageKey(e),n=new RegExp("\\b"+encodeURIComponent(t)+"=([^;]+)").exec(document.cookie);return null!==n?decodeURIComponent(n[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.makeCookie(e,void 0,"Thu, 01 Jan 1970 00:00:00 UTC");return this.logger.debug(`Deleting cookie ${t}`),document.cookie=t,!0}}var s=n(4769);const a=e=>{const{logger:t,consentTracking:n}=e,r=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{constructor(){super(...arguments),this.setCookie=(0,s.v)(super.setCookie.bind(this),r,n.isRevoked)}}},c=(e,t,n,i)=>new((0,r.zG)(o,a({consentTracking:i,logger:n})))(e,t,n)},9773:(e,t,n)=>{n.d(t,{S:()=>l});var r=n(3735),i=n(2688),o=n(787),s=n(365);class a{constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}getExternalJsonData(e){const t=this.getExternalData(e);return null===t?null:(0,o.A)(t)}setExternalData(e,t){const n=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(n,t)}catch(e){}}setExternalJsonData(e,t){return(0,r.zG)((n=t,(0,s.Y3)((function(){var e=JSON.stringify(n);if("string"!=typeof e)throw new Error("Converting unsupported structure to JSON");return e}),r.yR)),(0,s.UI)((t=>this.setExternalData(e,t))),(0,s.g_)((e=>{throw(0,i.w)(e)}),r.Q1));var n}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}var c=n(4769);const u=e=>{const{logger:t,consentTracking:n}=e,r=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)},i=r,o=r;return e=>class extends e{constructor(){super(...arguments),this.setExternalData=(0,c.v)(super.setExternalData.bind(this),i,n.isRevoked),this.setExternalJsonData=(0,c.v)(super.setExternalJsonData.bind(this),o,n.isRevoked)}}},l=(e,t,n)=>new((0,r.zG)(a,u({consentTracking:n,logger:t})))(e)},342:(e,t,n)=>{n.d(t,{SX:()=>o});class r{constructor(){this.prefix="[Permutive]",this.debugStyle=["color: blue"].join(";")}log(){return console.log.bind(window.console,this.prefix)(...arguments)}debug(){return console.debug.bind(window.console,"%c%s",this.debugStyle,this.prefix)(...arguments)}warn(){return console.warn.bind(window.console,this.prefix)(...arguments)}error(){return console.error.bind(window.console,this.prefix)(...arguments)}}class i{log(){}debug(){}warn(){}error(){}}const o=e=>{var t;return e.loggingEnabled&&void 0!==(null===(t=window.console)||void 0===t?void 0:t.log)?new r:new i}},8491:(e,t,n)=>{n.d(t,{Q:()=>o});var r=n(3735);const i="[MESSAGES]";class o{constructor(e){this.logger=e,this.messageListenerMap={},this.replayQueue={},this.onceTracker={},this.defaultMessageOptions={withReplay:!1,once:!1}}on(e,t,n){const r=this.mergeMessageOptions(n);r.withReplay&&this.processReplayQueue(e,t);const i=s(e,this.messageListenerMap).push(t)-1;return r.once&&this.addToOnceTracker(e,i),i}once(e,t){return this.on(e,t,{once:!0})}off(e,t){if(null==t)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);t<0?this.logError('Index for "off" fell out of range',{index:t}):s(e,this.messageListenerMap)[t]=r.Q1}emit(e,t,n){const r=this.mergeMessageOptions(n);s(e,this.messageListenerMap).length>0?(this.logDebug(`Emitting Event: ${e}`),this.emitMessageWithPayload(e,t)):r.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){s(e,this.replayQueue).push(t)}processReplayQueue(e,t){var n;null===(n=this.replayQueue[e])||void 0===n||n.forEach((e=>t(e)))}emitMessageWithPayload(e,t){var n;null===(n=this.messageListenerMap[e])||void 0===n||n.forEach(((n,r)=>{n(t),this.removeListenerIfSetToFireOnlyOnce(e,r)}))}addToOnceTracker(e,t){s(e,this.onceTracker).push(t)}removeListenerIfSetToFireOnlyOnce(e,t){var n;(null===(n=this.onceTracker[e])||void 0===n?void 0:n.includes(t))&&this.off(e,t)}mergeMessageOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.assign({},this.defaultMessageOptions),e)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(i,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(i,...t)}}const s=(e,t)=>{var n;return null!==(n=t[e])&&void 0!==n?n:t[e]=[]}},5619:(e,t,n)=>{n.d(t,{Eq:()=>d,X:()=>g,b:()=>l});var r=n(2851),i=n(2116),o=n(4268),s=n(2751),a=n(4011),c=n(3735),u=n(6567);const l=()=>({environment:"",events_count:0,os:"",sdk_version:"",segments_count:0,session_count:0,session_init_count:0,session_view_count:0}),d=o.n_({environment:s.Eq,events_count:a.Eq,os:s.Eq,sdk_version:s.Eq,segments_count:a.Eq,session_count:a.Eq,session_init_count:a.Eq,session_view_count:a.Eq}),g=e=>{const t=p(e.userId),n=(0,c.zG)(r.vP(e.userId,e.sessionId),r.UI((e=>{let[t,n]=e;return`${t},${n}`})),p),o=String(Math.random()),s=(0,c.zG)(e.sdkVariant,u.UI((e=>`-${e}`)),u.fS((()=>""))),a={environment:"web",events_count:0,os:f(window.navigator.userAgent||""),sdk_version:"v19.97.7"+s,segments_count:0};return(0,c.zG)(i.vP({session_count:t(e.sessionId),session_init_count:n(r.a9(o)),session_view_count:n(e.viewId)}),i.UI((0,c.ls)((e=>r.vP(e)),r.UI((e=>Object.assign(Object.assign({},a),e))))))},f=e=>{const t=e.toLowerCase();return t.includes("windows")?"windows":t.includes("iphone")||t.includes("ipad")?"ios":t.includes("android")?"android":t.includes("macintosh")?"macos":t.includes("linux")?"linux":"unknown"},p=e=>t=>i.dQ((n=>{let{previousState:i}=n;const u=(0,c.zG)(r.vP(e,t),r.g_(function(e){if(null!==e&&"object"==typeof e&&"scope"in e&&"lastValue"in e&&"count"in e)return e;return{scope:"",lastValue:"",count:1}}(i),((e,t)=>{let[n,r]=t;return{scope:n,lastValue:r,count:n!==e.scope?1:r!==e.lastValue?e.count+1:e.count}})),r.D8(o.n_({scope:s.Eq,lastValue:s.Eq,count:a.Eq})));return{state:u,value:(0,c.zG)(u,r.UI((e=>e.count)))}}))},7594:(e,t,n)=>{n.d(t,{p:()=>P});var r=n(7582),i=n(2688),o=n(3735),s=(n(7341),n(9384)),a=function(e,t){return function(){return t(e())}},c=function(e){return function(t){return a(t,e)}},u=o.a9,l=(o.yR,o.yR,s.F4,s.Xl,function(){return Math.random()});function d(e,t){return(0,o.zG)(l,c((function(n){return Math.floor((t-e+1)*n+e)})))}c((function(e){return e<.5}));var g=n(7927),f=n(4673),p=n(2652),m=n(5619),h=n(3328),_=n(7241),v=n(4268);function y(e){return e[0]}function b(e){return e[1]}var w=function(e){return function(t){return[e(y(t)),b(t)]}},E=n(6934),k=n(7407),S=n(3992);const P=e=>{let t=[];const n=e=>{t=[...t,...e]},s=t=>{(0,o.zG)(e.metrics.consume(),C(t),n)};let a=e.context.current;e.context.onChange((e=>{s(a),a=e}));const c="[Metrics Reporter]",u=t=>(0,o.zG)({},(0,o.ls)((0,g.dx)("continent",f.U.$ip_geo_info_continent),(t=>e.enrichers.enrich(t,!0).output)),(e=>Object.assign(Object.assign({},t),e))),l=l=>{let{beacon:d}=l;s(a);const g=t;t=[];const f=(0,o.zG)(g,_.ru((0,o.zG)(v.Uz((e=>e[0]))(m.Eq))),h.UI((0,o.ls)(_.Ri,w((0,o.ls)(_.YM,u)))),k.uU((t=>{let[n,o]=t;return E.Y3((()=>((t,n)=>(0,r.mG)(void 0,void 0,void 0,(function*(){if(!t)return e.api.metrics(n);if(!e.api.metricsBeacon(n))throw new Error("Failed to send beacon.")})))(d,{context:n,items:o})),(t=>(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.logger.error(c,...n)}(`Failed to publish metrics ${(0,i.w)(t).message}`,o),C(n)(o))))})),k.UI((0,o.ls)(h.bj,h.xH,(0,p.bw)(n),h.xb)));return f()};e.messages.on("permutive:ready",(()=>{const e=d(3e4,9e4),t=n=>(0,S.HJ)((()=>(0,r.mG)(void 0,void 0,void 0,(function*(){const n=(yield l({beacon:!1}))?5e3:e();t(n)}))),n);t(5e3),(0,p.Bf)((()=>l({beacon:!0})),{capture:!1})}))},C=e=>t=>(0,o.zG)(t,h.UI((t=>[e,t])))},4074:(e,t,n)=>{function r(e,t,n,r,s){var a;return(null!==(a=n.getData("metricsEnabled"))&&void 0!==a?a:(()=>{const e=Math.random()<=t.metricsSamplingPercentage/100;return n.setData("metricsEnabled",e),e})())?new i(e,r,s):new o}n.d(t,{g:()=>r});class i{constructor(e,t,n){this.sdkInitTimestamp=e,this.messages=t,this.logger=n,this.prefix="[Metrics]",this.pendingMetrics=[],this.pendingTimers={},this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}isEnabled(){return!0}consume(){const e=this.pendingMetrics;return this.pendingMetrics=[],e}track(e){this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackTimeSinceInit(e,t){const n=(performance.now()-this.sdkInitTimestamp)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:t})}startTimer(e,t){const n=performance.now(),r=this.generateRandomKey(e);return this.pendingTimers[r]={startTime:n,labels:t},r}stopTimer(e,t){const n=this.pendingTimers[t];if(n){const r=(performance.now()-n.startTime)/1e3;this.logDebug("timer stopped",e,r),this.track({name:e,value:r,labels:n.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}}class o{isEnabled(){return!1}consume(){return[]}track(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}},8317:(e,t,n)=>{n.d(t,{S:()=>s});var r=n(7582),i=n(3735),o=n(2652);class s{constructor(e,t){this.db=e,this.options=t}getSessionId(){return this.options.session_id}sessionHasChanged(){return this.options.hasChanged}static decodeSessionData(e){return e&&"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?Object.assign(Object.assign({},e),{last_updated:new Date(e.last_updated)}):null}reset(){return this.db.delete(this.options.session_data_key)}persistSessionData(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=e.last_updated.toISOString();yield this.db.put(Object.assign(Object.assign({},e),{last_updated:t}),this.options.session_data_key)}))}static generateNewSession(e){return{session_id:(0,o.k$)(),last_updated:e}}static hasExpired(e,t,n){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*n)}static initialise(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){const r={timeout_seconds:1800,session_data_key:"permutive-session",hasChanged:!1,logger:n};e.deleteCookie(r.session_data_key);const a=new Date,c=yield t.get(r.session_data_key).catch(i.gn),u=s.decodeSessionData(c),l=null===u||s.hasExpired(a,u.last_updated,r.timeout_seconds)?Object.assign(Object.assign({},s.generateNewSession(a)),{hasChanged:!0}):Object.assign(Object.assign({},u),{last_updated:a,hasChanged:!1}),d=new s(t,(0,o.PM)(r,l));return yield d.persistSessionData(l),d}))}}},4026:(e,t,n)=>{n.d(t,{S:()=>_});var r=n(3735),i=n(2688),o=n(787),s=n(365),a=n(2652),c=n(4730),u=n(926);class l{constructor(e,t,n){this.config=e,this.namespace=t,this.logger=n,this.prefix="[Data Store]",this.permutiveData={},this.permutiveDataSize=0,this.localStorageQueue=new Set,this.localStorageScheduler=new c.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.requestWrite(e)}deleteKey(e){delete this.permutiveData[e],this.requestWrite(e)}requestWrite(e){this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.getDataChunk("misc")),this.getDataChunk("models")),this.getDataChunk("queries")),this.getDataChunk("enrichers"))}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),n=window.localStorage.getItem(t),r=null===n?null:(0,o.A)(n);return n&&r?(this.permutiveDataSize+=2*n.length,r):{}}chunkKeyToStorageKey(e){switch(e){case"models":return this.config.permutiveDataModelsKey;case"queries":return this.config.permutiveDataQueriesKey;case"enrichers":return this.config.permutiveDataEnrichersKey;case"misc":return this.config.permutiveDataMiscKey;default:throw new Error(`Unhandled chunk key "${e}"`)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,n]=this.dataKeyToChunkInfo(e);return s.Y3((()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(n))),(t=>{const n=(0,i.w)(t);return this.logError(`Failed to set ${e}. Got ${n}`),n}))}dataKeyToChunkInfo(e){const t=e=>(0,a.eu)(this.permutiveData,e);switch(e){case"models_data":case"models_last_updated":return[this.chunkKeyToStorageKey("models"),t(d)];case"query_states":case"internal_query_states":case"external_query_states":case"state_offset":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(g)];case"enricher:geoip":return[this.chunkKeyToStorageKey("enrichers"),t(f)];case u.Kd:case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(p)];default:throw new Error(`Unhandled data key "${e}"`)}}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(this.prefix,...t)}}const d=["models_data","models_last_updated"],g=["query_states","internal_query_states","external_query_states","state_offset","event-source-id"],f=["enricher:geoip"],p=[u.Kd,"identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"];var m=n(4769);const h=e=>{const{logger:t,consentTracking:n}=e,r=e=>(t.debug(`Data Store: Failed to write ${e} as consent is revoked`),s.F2(void 0));return e=>class extends e{constructor(){super(...arguments),this.writeData=(0,m.v)(super.writeData.bind(this),r,n.isRevoked)}}},_=(e,t,n,i)=>new((0,r.zG)(l,h({consentTracking:i,logger:n})))(e,t,n)},569:(e,t,n)=>{n.d(t,{L:()=>r});class r{constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}},7575:(e,t,n)=>{n.d(t,{u:()=>r});class r{constructor(e,t){this.metrics=e,this.messages=t,this._isRealtime=!1,this._isReady=!1}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){this._isRealtime=!0,this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{}),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){this._isReady=!0,this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},7256:(e,t,n)=>{n.d(t,{a:()=>s});var r=n(7582),i=n(3735),o=n(7927);class s{constructor(e,t,n,r,i,o,s){this.config=e,this.localStorage=t,this.logger=n,this.permutiveData=r,this.eventSourceId=i,this.cookies=o,this.externalData=s}reset(){return(0,r.mG)(this,void 0,void 0,(function*(){return this.logger.log("Resetting State"),(0,i.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>(0,o.XP)({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfws:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,"permutive-prebid-rtd":!0,"permutive-events-cache":!0,_pssps:!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.permutiveData.reset()),(e=>this.eventSourceId.generateAndSet()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataModelsKey),this.localStorage.delete(this.config.permutiveDataQueriesKey),this.localStorage.delete(this.config.permutiveDataEnrichersKey),this.localStorage.delete(this.config.permutiveDataMiscKey)])),i.Q1)}))}}},7274:(e,t,n)=>{n.d(t,{u:()=>r});class r{constructor(e,t,n,r,i){this.permutiveData=e,this.permutiveReset=t,this.userId=n,this.viewId=r,this.eventCollection=i}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.permutiveData.getDataSize()+this.eventCollection.getStateSizeInBytes()}reset(){return this.permutiveReset.reset()}}},9117:(e,t,n)=>{n.d(t,{M:()=>a});var r=n(3735),i=n(6567),o=n(2851),s=n(2652);class a{constructor(e,t,n,i){this.config=e,this.clientContext=t,this.cookies=n,this.externalData=i;const[s,a]=o.Ue(this.getOrGenerateUserId());this.ref=s,this.setUserId=a,(0,r.zG)(s,o.YP((e=>{this.cookies.setCookie(this.config.cookieName,e),this.externalData.setExternalData(this.config.cookieName,e),this.clientContext.updateContext(["user_id",e])})))}isEqual(e){return this.ref.current===e}get(){return this.ref.current}set(e){this.setUserId(e)}getOrGenerateUserId(){return(0,i.fS)((()=>(0,i.fS)(s.k$)(this.getUserIdFromLocalStorage())))(this.getUserIdFromCookie())}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=(0,i.DT)(s.Gz);return(0,r.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),i.ij,(0,i.tS)(t))}}},9880:(e,t,n)=>{n.d(t,{W:()=>o});var r=n(2851),i=n(2652);class o{constructor(e){this.config=e;const t=e.viewId&&(0,i.Gz)(e.viewId)?e.viewId:(0,i.k$)(),[n,o]=r.Ue(t);this.ref=n,this.set=o}get(){return this.ref.current}generateAndSet(){const e=(0,i.k$)();return this.set(e),e}}},7554:(e,t,n)=>{n.d(t,{E:()=>i});var r=n(8259);const i=(e,t,n)=>{const i=window.localStorage;return(0,r.rK)(i,"[Local Storage]",e,t,n)}},9332:(e,t,n)=>{n.d(t,{u:()=>i});n(6640);var r=n(8259);const i=(e,t,n)=>{const i=window.sessionStorage;return(0,r.rK)(i,"[Session Storage]",e,t,n)}},8259:(e,t,n)=>{n.d(t,{_z:()=>l,oP:()=>u,rK:()=>g});var r=n(7582),i=n(2688),o=n(787),s=n(365),a=n(3735),c=n(4769);class u{constructor(e,t){this.storage=e,this.namespace=t}put(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n=this.namespace.getNamespacedStorageKey(t.toString());return this.storage.setItem(n,JSON.stringify(e)),t}))}get(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=this.namespace.getNamespacedStorageKey(e.toString()),n=this.storage.getItem(t);return null===n?null:(0,o.A)(n)}))}delete(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=this.namespace.getNamespacedStorageKey(e.toString());this.storage.removeItem(t)}))}deleteStore(){return(0,r.mG)(this,void 0,void 0,(function*(){}))}}const l=e=>{const{logger:t,consentTracking:n,prefix:r}=e,i=(e,n)=>(t.debug(`${r} Failed to write ${String(n)} as consent is revoked`),Promise.resolve(n));return e=>class extends e{constructor(){super(...arguments),this.put=(0,c.v)(super.put.bind(this),i,n.isRevoked)}}},d=e=>{const{logger:t,prefix:n,storage:o}=e;return e=>class extends e{constructor(){super(...arguments),this.isSupported=null}isStorageSupported(){return null!==this.isSupported||(this.isSupported=s.Y3((()=>{const e="_permutive_ls_test";return o.setItem(e,e),o.getItem(e),o.removeItem(e),!0}),i.w),(0,a.zG)(this.isSupported,s.EQ((e=>{t.warn(`${n} Is NOT supported`,e)}),(()=>{t.debug(`${n} Is supported`)})))),this.isSupported}put(e,t){const n=Object.create(null,{put:{get:()=>super.put}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ((e=>{throw e}),(()=>n.put.call(this,e,t))))}))}get(e){const t=Object.create(null,{get:{get:()=>super.get}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ((()=>null),(()=>t.get.call(this,e))))}))}delete(e){const t=Object.create(null,{delete:{get:()=>super.delete}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ(a.Q1,(()=>t.delete.call(this,e))))}))}deleteStore(){const e=Object.create(null,{deleteStore:{get:()=>super.deleteStore}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ(a.Q1,(()=>e.deleteStore.call(this))))}))}}},g=(e,t,n,r,i)=>new((0,a.zG)(u,d({logger:r,prefix:t,storage:e}),l({logger:r,consentTracking:i,prefix:t})))(e,n)},2497:(e,t,n)=>{n.d(t,{Ec:()=>s,_8:()=>o});var r=n(6567),i=n(2652);const o=e=>{const t=e.__tcfapi,n={type:"aborted"},o=["tcloaded","useractioncomplete"];return t?(0,i.a4)((()=>a(t,"getTCData")),(()=>a(t,"getTCData").then((e=>"loaded"===(null==e?void 0:e.cmpStatus)&&o.includes(null==e?void 0:e.eventStatus))))).then((0,r.g_)((()=>n),(e=>({type:"loaded",data:e})))):Promise.resolve({type:"missing"})},s=e=>e.gdprApplies?(0,r.G)(e.vendor.consents):r.YP,a=(e,t)=>new Promise((n=>{e(t,2,(e=>{n(e)}))}))},5165:(e,t,n)=>{n.d(t,{D:()=>r});const r={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468}},6037:(e,t,n)=>{n.d(t,{C:()=>c});var r=n(7582),i=n(1500),o=n(3735);const s=(a=[[{name:"dfp",import:Promise.resolve().then(n.bind(n,4388))}],[],[{name:"classification_models",import:Promise.resolve().then(n.bind(n,6320))}],[],[],[],[{name:"clean_room",import:Promise.resolve().then(n.bind(n,5912))}],[{name:"dbm",import:Promise.resolve().then(n.bind(n,8431))}],[{name:"ddp",import:Promise.resolve().then(n.bind(n,9319))}],[],[],[],[],[],[],[{name:"overlays",import:Promise.resolve().then(n.bind(n,8087))}],[],[],[],[],[],[],[],[{name:"scriptrunner",import:Promise.resolve().then(n.bind(n,7416))}],[{name:"tracking_pixel",import:Promise.resolve().then(n.bind(n,3792))}],[],[],[{name:"web",import:Promise.resolve().then(n.bind(n,4400))}],[],[],[]],(0,o.zG)((0,i.xH)(a),(0,i.u4)({},((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.import})))));var a;const c=e=>{const t=Object.entries(s).map((t=>{let[n,i]=t;return(0,r.mG)(void 0,void 0,void 0,(function*(){return e.logger.log(`Loading addon ${n}`),(yield i).load(e)}))}));return Promise.all(t)}},9658:(e,t,n)=>{n.r(t),n.d(t,{createAddon:()=>k,getCachedDFPSegments:()=>w});var r=n(7582),i=n(2688),o=n(365),s=n(3735),a=n(6567),c=n(2851),u=n(9853),l=n(2652);const d="_pdfps";n(5700);var g=n(1500),f=n(2751);let p=!1;let m=null;const h=(e,t)=>{const{logger:n}=t;(0,s.zG)(e,a.UI((e=>{!0!==p&&e.pubadsReady&&(null!=m||(m=r=>{let{slot:i}=r;const{getContentUrl:o}=i;if(!o||"function"!=typeof o)return;(0,s.zG)(o(),(0,f.pn)("&trunc=1"))&&(n.debug("DFP content URL has been truncated!"),(e=>{let{metrics:t,logger:n}=e;p||(t.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),p=!0,n.debug("DFP has exceeded targeting limit"))})(t),m&&e.pubads().removeEventListener("slotRenderEnded",m),m=null)}),e.pubads().addEventListener("slotRenderEnded",m))})))},_=(e,t,n,r)=>{const{logger:i}=t;h(e,t);(0,s.zG)(e,a.UI((e=>(e=>{e.cmd.push((()=>{const{getTargeting:t,setTargeting:o}=e.pubads(),s=t("permutive")||[],a=Object.values(n.eligibleSegments).map(String).concat(n.cloudCohorts).concat("rts"),c=(0,g.uK)((e=>a.includes(e))),{left:u}=c(s),l=r.concat(u).concat("rts");i.debug("DFP setting GPT targeting to",l),o("permutive",l)}))})(e))))};var v=n(4388);const y={liveSegments:[],cloudCohorts:[],eligibleSegments:{}},b={segments:y,getGAMKeyValues:()=>({permutive:""})},w=e=>e.getExternalJsonData(d)||[],E=(e,t,n)=>{const{logger:r,externalData:o,api:s}=t;let a=n.map(String).concat(y.cloudCohorts);r.debug("DFP is updating with targeting values",a),_(e,t,y,a);try{o.setExternalJsonData(d,a)}catch(e){const t=(0,i.w)(e),n="DFP failed to set data. Got:";r.error(n,t),s.reportError(`${n} ${t.message}`)}return((e,t)=>{let{api:n,logger:r}=e;(0,u.$S)("sync_segments_cookie",!1)?(r.debug("DFP syncing segment cookie _pdfps"),n.segmentSync({key:d,value:t})):r.debug("DFP sync segments cookie not enabled, skipping sync")})(t,JSON.stringify(a)),r.debug("DFP live segments updated to",n),n},k=e=>(0,r.mG)(void 0,void 0,void 0,(function*(){const{api:t,logger:n,activationManager:r,messages:i,externalData:u,nextGenOutput:g,userId:f,cookies:p}=e,m=yield(0,l.a4)((()=>window.googletag),(()=>!!window.googletag),{waitTimeInMs:10,maxAttempts:200,exponentialBackOff:!1});a.Wi(m)&&n.error("[DFP]: unable to find google tag script on the page"),(0,s.zG)(m,a.UI((e=>(e=>e.cmd.push((()=>e.pubads().setTargeting("prmtvsdk","web"))))(e))));b.getGAMKeyValues=()=>Object.assign(Object.assign({},(0,s.zG)((0,v.generateProjectSpecificKVs)(e),o.Vn((e=>{var n;return n=e,t.reportError(`[DFP] ${n}`,f.get()),e})),o.fS((()=>({}))))),{permutive:b.segments.liveSegments.join(",")}),y.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),n={};for(const e of t.dfp)n[e]=e;for(const e of Object.keys(t.dfp_legacy)){const r=Number(e);n[r]=t.dfp_legacy[r]}return n})(r);const h=(0,s.zG)(g.queryLanguageCohorts.all,c.UI((e=>(n.debug("DFP received QL segments",{qlSegments:e}),((e,t)=>e.filter((e=>e in t)).map((e=>t[e])))(e,y.eligibleSegments)))),c.D8(l.cO));return(0,s.zG)(c.vP(h,g.cloudCohorts.gam),c.YP((0,l.Z_)(t,f,(t=>{let[r,i]=t;n.debug("DFP received updated cohorts",{filteredQlSegments:r,cloudCohorts:i}),y.cloudCohorts=i,y.liveSegments=E(m,e,r)})))),n.debug("DFP initialised with segments",y),i.on("permutive:reset",(0,l.Z_)(t,f,(()=>{n.debug("DFP received 'permutive:reset' event"),u.removeExternalData(d),p.deleteCookie(d)}))),i.emit("permutive:dfp:ready"),b}))},4388:(e,t,n)=>{n.r(t),n.d(t,{generateProjectSpecificKVs:()=>S,load:()=>l});var r=n(2688),i=n(365),o=n(3735),s=n(922),a=n(2652),c=n(9658);const u={},l=e=>{e.q.push({functionName:"addon",arguments:["dfp",{}]});window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>d(e)))},d=e=>{e.permutive.ready((0,a.Z_)(e.api,e.userId,(()=>b(e.metrics))),"realtime");w(e.externalData);(0,o.zG)(S(e),i.tS((e=>i.Y3((()=>(0,a.qh)(e).forEach((e=>{let[t,n]=e;googletag.pubads().setTargeting(t,n)}))),r.w))),i.Vn((t=>e.api.reportError(`[DFP:load], ${t}`,e.userId.get())))),h(e.permutive),googletag.cmd.push((()=>{_(e.permutive),v(e.permutive)})),window.addEventListener("message",f(e.permutive),!1)},g=e=>{let{advertiserId:t,campaignId:n,lineItemId:r,creativeId:i}=e;return{advertiser_id:(0,a.rH)(t),campaign_id:(0,a.rH)(n),line_item_id:(0,a.rH)(r),creative_id:(0,a.rH)(i)}},f=e=>t=>{var n;try{const r=JSON.parse(t.data);if(!r.permutive_type||"google_ad_click"!==r.permutive_type)return;const{ad_unit_path:i,creative_id:o,advertiser_id:s,order_id:a,line_item_id:c}=null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},l=g({lineItemId:c,advertiserId:s,campaignId:a,creativeId:o});let d;Object.keys(u).some((e=>{const{slot:t,creative_id:n}=u[e];if((null==t?void 0:t.ad_unit_path)===i&&n===l.creative_id)return d=u[e],!0})),d=null!=d?d:Object.assign(Object.assign({},l),{is_empty:!1}),p(e,d)}catch(e){}},p=(e,t)=>{s.PH&&t&&e.track("SlotClicked",t)},m=(e,t,n)=>{u[t]=n,y(e,n),k(e,t)},h=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const n=t.getResponseInformation();if(!n)return;const r=Object.assign(Object.assign({},g(n)),{is_empty:!1,service_name:"publisher_ads",slot:E(t)}),i=t.getSlotElementId();m(e,i,r)}))},_=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const n=Object.assign(Object.assign({},g(t)),{is_empty:t.isEmpty,service_name:t.serviceName,slot:E(t.slot)});if(t.size){const[e,r]=t.size;"number"==typeof e&&"number"==typeof r&&(n.width=e,n.height=r)}const r=t.slot.getSlotElementId();m(e,r,n)}))},v=e=>{s.EW&&googletag.pubads().addEventListener("impressionViewable",(t=>{let{slot:n,serviceName:r}=t;const i=n.getResponseInformation();if(!i)return;const o=Object.assign(Object.assign({},g(i)),{service_name:r,slot:E(n)});e.track("SlotViewable",o)}))},y=(e,t)=>{if(!s.CL)return;var n;n=Object.assign(Object.assign({},t),{rendered_timestamp:Date.now()}),e.track("SlotRendered",n)},b=e=>{let t=0;const n=googletag.pubadsReady&&googletag.pubads().getSlots();n&&n.forEach((e=>e.getResponseInformation()&&t++));const r=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:r,value:1,labels:{target:"dfp"}})},w=e=>{const t=(0,c.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:n}=googletag.pubads(),r=e("permutive")||[];n("permutive",[...new Set([...t.map(String),...r])])}))},E=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return s.jH?Object.assign(Object.assign({},t),(()=>{const t={},n=[];let r=[];const i=(e,i)=>{const o="slot"===e?e=>t[e]=1:()=>{},s=i.getTargetingKeys();r=s;for(let s=0;s<r.length;s++){const a=r[s];if(void 0!==t[a]&&"service"===e)continue;const c=[],u=i.getTargeting(a);for(let e=0;e<u.length;e++)c.push(u[e].toString());c.length>0&&(o(a),n.push({key:a,value:c}))}};return i("slot",e),i("service",googletag.pubads()),{targeting_keys:n}})()):t},k=(e,t)=>{let n=!1;const r=()=>{n&&"hidden"===document.visibilityState&&p(e,u[t])},i=()=>{n=!0},o=()=>{n=!1};try{document.addEventListener("visibilitychange",r);const e=document.getElementById(t);e&&(e.addEventListener("mouseover",i),e.addEventListener("mouseout",o))}catch(e){}},S=e=>{let{userId:t,viewId:n}=e;return i.Y3((()=>({})),r.w)}},8087:(e,t,n)=>{n.r(t),n.d(t,{OverlaysAddon:()=>s,load:()=>o});var r=n(3992),i=n(2652);const o=e=>{e.q.unshift({functionName:"addon",arguments:["overlays",{}]})};class s{constructor(e){const t=this;this.permutive=e.permutive,this.options=e,this.activations=this.options.activationManager.getActivations("overlays"),this.loadedImageCounts={};for(let n=0;n<this.activations.length;n++){const r=this.activations[n],o=r.getSegmentCode(),s=r.getTriggerType(),a=r.getConfig(),c=this.buildOverlayCss(a,n);document.head.insertAdjacentHTML("beforeend",c);const u=this.buildOverlayBody(a,n);document.body.insertAdjacentHTML("beforeend",u);const l=`permutive-overlay-${n}`,d=document.getElementById(l);if(d){const e=d.getElementsByClassName("close")[0],t=d.getElementsByClassName("content")[0],n=()=>{d.style.visibility="hidden",d.style.opacity="0"},i=e=>{(null==t?void 0:t.contains(e.target))||(n(),d.removeEventListener("click",i))};e.addEventListener("click",n),d.addEventListener("click",i);[].slice.call(d.getElementsByTagName("a")).slice(1).forEach((e=>{e.addEventListener("click",(function(){r.trackConversion({useBeacon:!0})}))}));const o=d.getElementsByTagName("form")[0];o&&o.addEventListener("submit",(function(e){e.preventDefault(),r.trackConversion({success:function(){o.submit()}})}))}const g=function(e,n){t.showOverlay(e),n.trackImpression()};"EveryTime"===s?this.permutive.segment(o,(0,i.Z_)(e.api,e.userId,(e=>{e?g(l,r):this.permutive.trigger(o,"result",(function(e){e.result&&g(l,r)}))}))):"OnEntry"===s?this.permutive.trigger(o,"result",(0,i.Z_)(e.api,e.userId,(function(e){e.result&&g(l,r)}))):"OnExit"===s&&this.permutive.trigger(o,"result",(0,i.Z_)(e.api,e.userId,(function(e){e.result||g(l,r)})))}}buildOverlayCss(e,t){return'<style type="text/css">.${overlay_class}{position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background:rgba(0,0,0,0.${opacity_percentage});transition:opacity ${opacity_transition_ms}ms;visibility:hidden;opacity:0;z-index:1000000;}.${modal_class}{position:fixed;padding:10px;background:#fff;border-radius:5px;z-index:1000001}.${modal_class} .content{overflow:auto;z-index:1000002;}.${modal_class} .close{position:absolute;top:20px;right:30px;transition:all 200ms;font-size:30px;font-weight:bold;text-decoration:none;color:#333;z-index:1000003}.${modal_class} .close:hover{color:orange;}</style>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${opacity_percentage}",e.opacity_percentage.toString()).replace("${opacity_transition_ms}",e.opacity_transition_ms.toString())}buildOverlayBody(e,t){const n=this.options.config.windowKey;let r="";return!function(e){return void 0!==e.html}(e)?function(e){return void 0!==e.image_url&&void 0!==e.image_link}(e)&&(r='<a href="'+e.image_link+'"><img src="'+e.image_url+'"/></a>'):r=e.html,'<div id="${overlay_class}" class="${overlay_class}"><div id="${modal_class}" class="${modal_class}"><a class="close" href="javascript:;">&times;</a><div class="content">${content}</div></div></div>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${content}",r).replace(/<img /g,`<img onload='window[${n}].addons.overlays.loadedImage("permutive-overlay-" + num + "")' `)}showOverlay(e){const t=document.getElementById(`${e}`);if(!t)return;const n=()=>{const e=t.getElementsByTagName("div")[0],n=e.getBoundingClientRect().height,r=e.getBoundingClientRect().width;e.style.left=window.innerWidth/2-r/2+"px",e.style.top=window.innerHeight/2-n/2+"px",t.style.visibility="visible",t.style.opacity="1"},i=t.getElementsByTagName("img");if(i.length>0){let t=0;const o=()=>{t<10&&(!(e in this.loadedImageCounts)||this.loadedImageCounts[e]<i.length)?(t+=1,(0,r.HJ)(o,500)):n()};o()}else n()}loadedImage(e){e in this.loadedImageCounts?this.loadedImageCounts[e]=this.loadedImageCounts[e]+1:this.loadedImageCounts[e]=1}}},8431:(e,t,n)=>{n.r(t),n.d(t,{load:()=>r});const r=e=>{e.q.push({functionName:"addon",arguments:["dbm",{}]})}},9319:(e,t,n)=>{n.r(t),n.d(t,{DDPPixel:()=>s,load:()=>a});var r=n(7582);class i{constructor(e,t,n){this.options=e,this.storageKey=t,this.syncTimeoutSeconds=n,this.sendPixel()}sendPixel(){const e=this.options.permutiveData.getData(this.storageKey);e&&!this.isExpired(e)||this.makeUrl(this.options.config.apiKey,this.options.state.userId.get()).then((e=>{this.fire(e),this.options.permutiveData.setData(this.storageKey,(new Date).getTime())}))}fire(e){(new Image).src=e}isExpired(e){return isNaN(e)||(new Date).getTime()>e+1e3*this.syncTimeoutSeconds}}const o=("https:"===location.protocol?"https:":"http:")+"//cm.g.doubleclick.net/pixel?google_nid=permutive_dmp&google_cm&type=ddp&k=";class s extends i{constructor(e){super(e,"addon:ddp",86400)}makeUrl(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return o+e+"&u="+t}))}}const a=()=>{}},7416:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ScriptRunnerAddon:()=>ScriptRunnerAddon,load:()=>load});const load=e=>{e.q.unshift({functionName:"addon",arguments:["scriptrunner",{}]})};class ScriptRunnerAddon{constructor(options){this.permutive=options.permutive,this.options=options,this.api=options.api,this.activations=this.options.activationManager.getActivations("scriptrunner");for(let i=0;i<this.activations.length;i++){const activation=this.activations[i],triggerType=activation.getTriggerType(),segmentCode=activation.getSegmentCode(),run=activation=>{const script=activation.getConfig().script.replace(/impression\(\)/g,"activation.trackImpression();").replace(/conversion\(\)/g,"activation.trackConversion();");try{eval(script)}catch(e){e instanceof Error&&(e.message="Error running custom script: "+e.message,this.api.reportError(e,this.options.userId.get()))}};"EveryTime"===triggerType?this.permutive.segment(segmentCode,(e=>{e?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)}))})):"OnEntry"===triggerType?this.options.queryManager.segmentEntryQueryCodes.has(segmentCode)?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)})):"OnExit"===triggerType&&(this.options.queryManager.segmentExitQueryCodes.has(segmentCode)?run(activation):this.permutive.trigger(activation.getSegmentCode(),"result",(function(e){e.result||run(activation)})))}}}},3792:(e,t,n)=>{n.r(t),n.d(t,{PixelAddon:()=>o,load:()=>i});var r=n(2652);const i=e=>{e.q.push({functionName:"addon",arguments:["tracking_pixel",{}]})};class o{constructor(e){const t=this;this.options=e,this.latestStateByDomain=this.options.permutiveData.getData("addon:tracking_pixel")||{},this.activations=this.options.activationManager.getActivations("tracking_pixel");const n=0===Object.keys(this.latestStateByDomain).length;this.eligibleSegmentsForEntries={},this.eligibleSegmentsForExits={};for(let e=0;e<this.activations.length;e++){const t=this.activations[e],n=t.getTriggerType(),r=t.getSegmentCode(),i=t.getConfig().pixel_url,o=this.extractPixelType(i);"OnEntry"===n?(o in this.eligibleSegmentsForEntries||(this.eligibleSegmentsForEntries[o]={}),this.eligibleSegmentsForEntries[o][r]=t):"OnExit"===n&&(o in this.eligibleSegmentsForExits||(this.eligibleSegmentsForExits[o]={}),this.eligibleSegmentsForExits[o][r]=t)}const i=e.nextGenOutput.queryLanguageCohorts.all;n&&(0,r.Z_)(e.api,e.userId,(()=>this.firePixelsIfNecessary(i.current))),i.onChange((0,r.Z_)(e.api,e.userId,(e=>t.firePixelsIfNecessary(e))))}extractPixelType(e){return e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]}firePixelsIfNecessary(e){const t=Object.keys(Object.assign(Object.assign({},this.eligibleSegmentsForEntries),this.eligibleSegmentsForExits)),n={},r=this.eligibleSegmentsForEntries,i=this.eligibleSegmentsForExits;t.forEach((t=>{n[t]=n[t]||[];for(let o=0;o<e.length;o++){const s=e[o];(r[t]&&r[t][s]||i[t]&&i[t][s])&&n[t].push(e[o])}})),t.forEach((e=>{const t=n[e]||[],o=Array.isArray(this.latestStateByDomain[e])?this.latestStateByDomain[e]:[];for(let n=0;n<t.length;n++){const i=t[n];if(-1===o.indexOf(i)){const t=r[e]&&r[e][i];"OnEntry"===(null==t?void 0:t.getTriggerType())&&this.firePixel(t)}}for(let n=0;n<o.length;n++){const r=o[n];if(-1===t.indexOf(r)){const t=i[e]&&i[e][r];"OnExit"===(null==t?void 0:t.getTriggerType())&&this.firePixel(t)}}})),this.latestStateByDomain=n,this.options.state.setPermutiveData("addon:tracking_pixel",this.latestStateByDomain)}firePixel(e){(new Image).src=e.getConfig().pixel_url,e.trackImpression()}}},4400:(e,t,n)=>{n.r(t),n.d(t,{WebAddon:()=>P,load:()=>S});var r=n(7582),i=n(2688),o=n(365),s=n(3735),a=n(4011),c=n(6567),u=n(7209),l=n(6341),d=n(922),g=n(2652),f=n(9853);const p=(0,f.MU)("add_alchemy_entities",!1),m=(0,f.MU)("add_alchemy_taxonomy",!1);function h(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object.assign(Object.assign(Object.assign({},e&&m?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{}),e&&p?{entity_names:"$alchemy_entity_names"}:{}),{})}function _(e,t,n,r){const i=Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),e),t);n.track("Pageview",i).then((e=>{e&&r.emit("permutive:event:pageview",e)}))}function v(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:c.YP;const u=y(e,t,n,r,i),l=(0,c.fS)((()=>null))(a);let d={useBeacon:s};null!==l&&(d=Object.assign(Object.assign({},d),{unprocessedData:l})),o.track("PageviewComplete",u,d)}function y(e,t,n,r,i){return Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},r),n),{aggregations:Object.assign({PageviewEngagement:Object.assign({engaged_time:e},d.UW?{completion:t}:{})},d.ED?{SegmentEntry:Array.from(i.segmentEntryQueryCodes),SegmentExit:Array.from(i.segmentExitQueryCodes),CohortEntry:Array.from(i.cohortEntryQueryCodes),CohortExit:Array.from(i.cohortExitQueryCodes)}:{})})}var b=n(3992);const w=["mousemove","click","scroll"],E=["email","tel","submit","reset","button","file","password","radio","checkbox"],k=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],S=e=>{0};class P{constructor(e){this.dirtyState=!1,this.cancelEngagementTimer=()=>{},this.totalCompletion=0,this.totalEngagedTime=0,this.cancelPageviewCompleteTimer=()=>{},this.hasPageviewCompleteFired=!1,this.cleanupPageEngagementDetection=s.Q1,this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.unprocessedPVC=e.unprocessedEvents.PageviewComplete,this.options.customProperties.overrideCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0,d.Uy&&this.resetTimeout()}).bind(this),_(h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),d.t2&&(this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval())),d.Uy&&(this.setPageviewCompleteTimeout(d.MU),(0,g.aT)((()=>{this.hasPageviewCompleteFired||v(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive)})))}sendLinkClickEvent(e,t){if(window.location.href&&e.href){const n=0===e.href.indexOf("data:")?"NOT_URL":e.href;this.permutive.track("LinkClick",{dest_url:n},{useBeacon:t})}}sendFormSubmissionEvent(e){{const t=e.currentTarget,n={form:Object.assign(Object.assign(Object.assign({method:t.method||"GET",properties:this.serializeForm(t)},"string"==typeof t.id?{id:t.id}:{}),t.name&&"string"==typeof t.name?{name:t.name}:{}),t.action&&"string"==typeof t.action?{action:t.action}:{})};this.permutive.track("FormSubmission",n)}}trackEngagementInterval(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=this.updateState(e);!function(e,t,n,r,i,o){const s=Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t},i),{completion:n,total_completion:r});o.track("PageviewEngagement",s)}(t.engaged_time,t.total_engaged_time,t.completion,t.total_completion,this.options.customProperties.getCustomProps(),this.permutive),this.hasPageviewCompleteFired||(yield function(e,t,n,r,i,o,s,a,c){const u=y(e,t,s,a,c);return i.then((e=>{const t={props:u,sessionId:n,viewId:r,client:e};o.put(t)}))}(this.totalEngagedTime,this.totalCompletion,this.options.sessionManager.getSessionId(),this.options.viewId.get(),this.clientContext.getClient(),this.unprocessedPVC,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager))}))}reset(e){var t;return(0,r.mG)(this,void 0,void 0,(function*(){if(this.disablePageEngagementDetection(),d.Uy){const e=yield this.unprocessedPVC.getIfPresent();this.hasPageviewCompleteFired=!1,v(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1,e)}this.dirtyState=!1,this.options.state.viewId.generateAndSet(),this.totalCompletion=0,this.totalEngagedTime=0,this.updateWebOptions(e),this.options.customProperties.overrideCustomProps(this.options.page||{}),this.enablePageEngagementDetection();const n={logger:this.logger,config:Object.assign(Object.assign({},this.options.config),{watson:null!==(t=this.options.watson)&&void 0!==t?t:this.options.config.watson}),clientContext:this.clientContext,api:this.api,permutiveData:this.options.permutiveData,metrics:this.options.metrics,sessionManager:this.options.sessionManager,enrichers:this.options.enrichers,network:this.options.network};(0,l.H)(n)().then((()=>{_(h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),d.t2&&(this.cancelEngagementTimer(),this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}))}))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==E.indexOf(e.type.toLowerCase())||-1!==k.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return(0,b.UM)((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=e=>e instanceof Element,n=t=>e(t)?(0,c.G)(t):t.parentElement?e(t.parentElement)?(0,c.G)(t.parentElement):n(t.parentElement):c.YP;d.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>e.addEventListener("submit",(0,s.ls)(c.DT(this.canTrackPermutiveEvent("FormSubmission")),c.UI((0,g.Z_)(this.options.api,this.options.userId,this.sendFormSubmissionEvent.bind(this))))))),d.qr&&document.body.addEventListener("click",(0,s.ls)(c.DT(this.canTrackPermutiveEvent("LinkClick")),c.UI((e=>({event:e,anchor:(0,s.zG)(e.target,c.ij,c.tS(c.DT(t)),c.tS(n))}))),c.DZ((e=>{let{event:t,anchor:n}=e;return c.pC(n)?c.G({event:t,anchor:n.value}):c.YP})),c.UI((e=>{let{event:t,anchor:n}=e;return this.sendLinkClickEvent(n,(r=t,!("_blank"===n.target||r.metaKey||r.ctrlKey||r.shiftKey||2===r.which||3===r.which)));var r}))),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:n,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,s.zG)((0,o.Y3)((0,s.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,u.uZ)(a.Df)(0,1)),i.w),(0,o.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}setPageviewCompleteTimeout(e){return(0,b.HJ)((()=>{this.hasPageviewCompleteFired||(v(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1),this.hasPageviewCompleteFired=!0)}),e)}resetTimeout(){this.cancelPageviewCompleteTimer(),this.cancelPageviewCompleteTimer=this.setPageviewCompleteTimeout(d.MU)}registerPageEngagementCleanup(e){"function"==typeof e?this.cleanupPageEngagementDetection=()=>(0,o.Y3)((()=>{e(),this.cleanupPageEngagementDetection=s.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,i.w)(e)))):this.logger.warn("No page detection cleanup was registered")}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,s.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const n=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>n(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||w}getEventInterval(){return this.options.eventInterval||5}canTrackPermutiveEvent(e){return t=>{var n,r;return(0,s.zG)(null===(r=null===(n=this.options)||void 0===n?void 0:n.filterPermutiveEvent)||void 0===r?void 0:r[e],c.DT((e=>"function"==typeof e)),c.tS((0,s.ls)((e=>o.Y3((()=>e(t)),(e=>new Error(`Threw an unexpected error: ${(0,i.w)(e)}`)))),o.tS(o.DT((e=>"boolean"==typeof e),(()=>new Error("Did not return a boolean")))),(0,g.bw)(o.Vn((t=>this.logger.error(`Filter predicate for "${e}" event failed`,t)))),c.Uo)),c.fS((()=>!0)))}}updateWebOptions(e){e.watson&&"object"==typeof e.watson&&"enabled"in e.watson&&"boolean"==typeof e.watson.enabled||delete e.watson,"object"==typeof e.filterPermutiveEvent&&null!==e.filterPermutiveEvent||delete e.filterPermutiveEvent;const t={addPageEngagementDetection:void 0,dirtyEvents:void 0,eventInterval:void 0,filterPermutiveEvent:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options=Object.assign(Object.assign(Object.assign({},this.options),t),e)}}},9078:(e,t,n)=>{n.d(t,{a:()=>r});class r{constructor(e){var t;this.messages=e,this.handlers={},this.messageQueue={};null===(t=window.addEventListener)||void 0===t||t.call(window,"message",(e=>{var t;"permutive"===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.origin)&&this.handle(e)}),!1),this.messages.once("permutive:api:ready",(function(){var e;null===(e=window.postMessage)||void 0===e||e.call(window,{origin:"permutive",type:"sdk-init"},"*")}))}listen(e,t){if(e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t),e in this.messageQueue){const t=this.messageQueue[e];if(void 0===t)return;for(let e=0;e<t.length;e++){const n=t[e];this.handle(n)}}}handle(e){var t,n,r;if(e.data.type in this.handlers)this.handlers[e.data.type].forEach((t=>{t(e)}));else{(null!==(t=(n=this.messageQueue)[r=e.data.type])&&void 0!==t?t:n[r]=[]).push(e)}}}},533:(e,t,n)=>{n.d(t,{o:()=>r,s:()=>i});class r extends Error{constructor(){super(r.defaultMessage),this.name=r.errorName}static get defaultMessage(){return"Network request failed"}}r.errorName="NetworkRequestFailedError";class i extends Error{constructor(){super(i.defaultMessage),this.name=i.errorName}static get defaultMessage(){return"Network request timed out"}}i.errorName="NetworkRequestTimeoutError"},7423:(e,t,n)=>{n.d(t,{F:()=>l});var r=n(7582),i=n(2688),o=n(3735),s=n(6567),a=n(3328),c=n(3030),u=n(533);class l{constructor(e,t,n,r,i){this.urls=e,this.config=t,this.network=n,this.metricsCollector=r,this.logger=i,this.prefix="[API]"}identify(e,t,n){const r=()=>this.reqWithMetrics(e,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",s.G(this.config.apiVersion)),method:"POST",payload:{user_id:t.get(),aliases:n},contentType:"text/plain",dataType:"json",withCredentials:!0});return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(r):this.identifyPromise=r()}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}metricsBeacon(e){return this.network.reqWithBeacon({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),payload:e})}track(e,t,n){const r=this.getTrackUrl(t,{isFullyEnriched:n,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:r,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBatch(e,t){const n=this.getTrackUrl(t,{isFullyEnriched:!0,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:n,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBeacon(e,t){const n=this.getTrackUrl(e,{isFullyEnriched:t,useBeacon:!0});return this.network.reqWithBeacon({url:n,payload:e})}trackBatchBeacon(e){const t=this.getTrackUrl(e,{isFullyEnriched:!0,useBeacon:!0});return this.network.reqWithBeacon({url:t,payload:e})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",s.G(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}modelsBinary(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1})}modelsJson(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})}state(e,t,n,r,i,o){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/state",s.G("v1.0"),[["fetch_unseen",JSON.stringify(o)]]),method:"POST",payload:{group_id:t,event_source_id:n,state:JSON.stringify(r),last_seen_offset:i},contentType:"text/plain",dataType:"json",withCredentials:!1})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[]},queries_metadata:{}},t=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/e1c3fd73-dd41-4abd-b80b-4278d52bf7aa-amp.json`;return this.network.req({url:t,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}uploadCohortMemberships(e,t){return this.reqWithMetrics(e,"sdk_http_upload_cohort_memberships_seconds",{url:this.urls.getCCSCohortMembershipEndpointUrl("/amp/cohorts",s.G("alpha"),[["i",t.user_id]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reqWithMetrics(e,t,n){const r=e.startTimer(t,{});return this.network.req(n).then((n=>(0,o.zG)(e.stopTimer(t,r),(e=>n))))}reportError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;return(0,r.mG)(this,void 0,void 0,(function*(){const l=(0,i.w)(e);if(this.logError("Reporting error:\n",l),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const d=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",s.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),g=e=>{this.metricsCollector.track({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};yield(0,o.zG)([u.o,u.s],a.Ew((e=>l.name===e.errorName||l.message.indexOf(e.errorName)>=0||l.message.indexOf(e.defaultMessage)>=0)),s.g_((()=>{const e=(()=>{var e,r,i,o,s,a,u,d;const g={error_message:null!==(r=null===(e=null==l?void 0:l.message)||void 0===e?void 0:e.toString())&&void 0!==r?r:"",stack_trace:null===(i=null==l?void 0:l.stack)||void 0===i?void 0:i.split("\n")},f=t?{user_id:t}:{};return Object.assign({platform:"web",sdk_version:"v19.97.7",ql_runtime_version:"v7.0.0",timestamp:n,domain:null!==(s=null===(o=null===window||void 0===window?void 0:window.location)||void 0===o?void 0:o.hostname)&&void 0!==s?s:"",url:(0,c.bk)(null===(a=null===window||void 0===window?void 0:window.location)||void 0===a?void 0:a.href),referrer:(0,c.bk)(null===document||void 0===document?void 0:document.referrer),user_agent:null!==(u=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==u?u:"",error_message:null!==(d=g.error_message)&&void 0!==d?d:String(l),stack_trace:g.stack_trace},f)})();return d(e).catch((0,o.ls)(i.w,(e=>this.logError(e))))}),(e=>(0,r.mG)(this,void 0,void 0,(function*(){return g(e.errorName)})))))}))}getTrackUrl(e,t){const{isFullyEnriched:n,useBeacon:r}=t,i=Array.isArray(e),o=!n;return this.urls.getEndpointUrl(i?"/batch/events":"/events",s.G(this.config.apiVersion),[["enrich",JSON.stringify(o)],["sdkp",JSON.stringify(!r)]])}getModelsUrl(e){const t=`https://${this.config.cdnBaseUrl}`;switch(e){case"binary":return`${t}/models/v2/e1c3fd73-dd41-4abd-b80b-4278d52bf7aa-models.bin`;case"json":return`${t}/models/e1c3fd73-dd41-4abd-b80b-4278d52bf7aa-models.json`}}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(this.prefix,...t)}}},4586:(e,t,n)=>{n.d(t,{E:()=>a});var r=n(365),i=n(3735),o=n(533),s=n(3992);class a{constructor(){}req(e){return this.reqImpl(e).then((e=>(0,i.MZ)(e)))}reqWithBeacon(e){let{url:t,payload:n}=e;return null===navigator||void 0===navigator?void 0:navigator.sendBeacon(t,JSON.stringify(n))}reqImpl(e){const{url:t,dataType:n,contentType:i,method:a,withCredentials:c,timeout:u}=e;return new Promise(((l,d)=>{const g=new XMLHttpRequest,f="POST"===e.method?"string"==typeof(p=e.payload)?p:JSON.stringify(p):null;var p;g.onload=(0,s.GL)((function(){if(g.status>=400){const e="text"===g.responseType||""===g.responseType?g.responseText:"Couldn't access response text";d(`Failed ajax request. Status code was ${g.status}. ${e}`)}else if("json"===n){const e=g.responseText?(0,r.Y3)((()=>JSON.parse(g.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(g.responseText)}. Got ${e}`)):(0,r.F2)(null);(0,r.g_)(d,l)(e)}else l("text"===n?g.responseText:g.response)})),g.onerror=(0,s.GL)((()=>d(new o.o))),g.ontimeout=(0,s.GL)((()=>d(new o.s))),g.open(a,t,!0),i&&g.setRequestHeader("content-type",i),g.timeout=u||g.timeout,g.withCredentials=c||g.withCredentials,g.responseType="binary"===n?"arraybuffer":g.responseType,g.send(f)}))}}},310:(e,t,n)=>{n.d(t,{s:()=>i});var r=n(6567);class i{constructor(e){this.config=e,this.PATH_JOINER_Q="?",this.PATH_JOINER_A="&"}getEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,n)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,n)}getClassificationModelsEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,n)}getAudienceMatchingEndpointUrl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=`${e}/${n}/audiences`;return this.getUrl("audience-matching",i,t,r)}getCCSCohortMembershipEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,n)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,n,i){const o=this.getUrlPrefix(e),s=(0,r.g_)((()=>""),(e=>`/${e}`))(n),a=`${this.config.apiProtocol}://${this.config.apiHost}${o}${s}${t}`;return this.makeUrlWithQueryParams(a,i.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const n=t.map((e=>{let[t,n]=e;return`${t}=${n}`})).join(this.PATH_JOINER_A),r=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${r}${n}`}}},9131:(e,t,n)=>{n.r(t),n.d(t,{nextGenWeb:()=>$t,runNextGenFeaturesWeb:()=>Kt});var r=n(7582),i=n(2116);class o{constructor(){this.events=[],this.listeners=[]}newEvent(e,t){this.events.push([e,t]),[...this.listeners].forEach((n=>{this.handle(e,t,n)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,n){const r="string"==typeof n.name&&e.name===n.name,i=n.name.test&&n.name.test(e.name),o=r||i;if(o)try{n.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}o&&n.once&&this.remove(n)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let n=0;n<this.events.length&&t;n++)this.handle(this.events[n][0],this.events[n][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}var s=n(2688),a=n(3735);const c=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),u=e=>({id:e.id,name:e.name,time:(g(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),l=(e,t)=>({id:e.id,time:new Date(e.time),name:t.name,properties:t.properties,session_id:t.session_id,view_id:t.view_id}),d=e=>void 0!==e.request_id,g=e=>isFinite(e)&&e instanceof Date;var f=n(4730);class p{constructor(e,t,n,r,i){this.eventHandler=e,this.api=t,this.metrics=n,this.userId=r,this.eventsCache=i,this.DEBOUNCE_TIME=500,this.MAX_DEBOUNCE_TIME=5e3,this.batch={requestData:[],requestOptions:[],processingStrategies:[]},this.scheduler=new f.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedFlushIfNotEmpty=this.scheduler.schedule(this.flush.bind(this)),this.scheduler.scheduleForPageUnload((()=>this.flushWithBeacon.bind(this)(this.batch)))}add(e,t,n){return this.batch.requestData.push(e),this.batch.requestOptions.push(t),this.batch.processingStrategies.push(n),this.debouncedFlushIfNotEmpty(this.batch),Promise.resolve()}flush(e){return this.flushIfNotEmpty(e,!1)}flushWithBeacon(e){return this.flushIfNotEmpty(e,!0)}flushIfNotEmpty(e,t){const{requestData:n,requestOptions:r,processingStrategies:i}=e,o=e=>this.api.reportError(`Error sending events batch. Got ${(0,s.w)(e)}`,this.userId.get()),c=t?(0,a.ls)((e=>this.api.trackBatchBeacon(e)),(e=>Promise.resolve())):e=>this.api.trackBatch(this.metrics,e);return n.length>0?(0,a.zG)(this.resetBatch(),(e=>this.trackMetrics(n)),(e=>c(n).then((e=>this.isBatchResponse(e)?this.onBatchResponseSuccess(e,n,r,i):(0,a.Q1)())).catch(o))):Promise.resolve()}onBatchResponseSuccess(e,t,n,r){const i=(e,t)=>{"never"!==t&&(this.eventHandler.newEvent(u(e),null),this.eventsCache.add(e,{persistOnDisk:!0}))},o=(e,t,n)=>{const r={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,time:(new Date).toISOString()};n&&n(e.error.message),console.error(e),this.eventHandler.newEvent(r,e)};return e.forEach(((e,s)=>{let{body:a}=e;const c=t[s],u=n[s],g=r[s];return d(a)?o(a,c,u.error):((e,t,n,r)=>{const o=l(e,t);return r&&r(o),i(o,n)})(a,c,g,u.success)}))}resetBatch(){this.batch={requestData:[],requestOptions:[],processingStrategies:[]}}trackMetrics(e){this.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e).length,labels:{}})}isBatchResponse(e){return!!e}}var m=n(6567),h=n(7407),_=n(1828),v=n(922);const y=(e,t,n)=>n?"deferred":b(e.name,t),b=(e,t)=>x.has(e)?"memoryOnly":M.has(e)?"never":t?"immediate":"response",w=e=>{let{event:t,requestData:n,requestOptions:r,queryManager:i,eventsBatch:o,stateSync:s,metrics:c,logger:u}=e;const l=(e,t)=>{const n=new Set(e);for(const e of t)n.delete(e);return n};return(0,a.zG)(L(t,c,i,u),h.YO("update"),h.ak("updatedSegments",(e=>{let{update:[,t]}=e;return h.tD((()=>l(new Set([...n.segments,...t.segmentsEntered]),t.segmentsExited)))})),h.ak("updatedCohorts",(e=>{let{update:[,t]}=e;return h.tD((()=>l(new Set([...n.cohorts,...t.cohortsEntered]),t.cohortsExited)))})),h.At((e=>{let{updatedCohorts:n,updatedSegments:r}=e;return()=>u.debug(`Batching ${t.name} with`,{segments:r,cohorts:n})})),h.tS((e=>{let{update:[t],updatedSegments:i,updatedCohorts:a}=e;return _.gz(h.oE)((()=>o.add(Object.assign(Object.assign({},n),{segments:[...i],cohorts:[...a]}),r,"immediate")),(()=>s.sync(t)))})),h.UI(a.Q1))},E=e=>{let{event:t,metrics:n,queryManager:r,logger:i}=e;return(0,a.zG)(L(t,n,r,i),h.UI(a.Q1))},k=e=>{let{requestData:t,requestOptions:n,queryManager:r,eventsCache:i,eventHandler:o,api:s,metrics:c,logger:u}=e;return(0,a.zG)((()=>s.track(c,t,!1)),h.tS((e=>C(e,t,n,i,c,r,u))),h.UI((e=>D(o,e.event,e.error))))},S=e=>{let{event:t,isEventFullyEnriched:n,requestData:r,api:i,eventHandler:o}=e;return h.tD((()=>{i.trackBeacon(r,n),D(o,t,m.YP)}))},P=e=>{let{requestData:t,requestOptions:n,eventsBatch:r}=e;return()=>r.add(t,n,"never")},C=(e,t,n,r,i,o,s)=>d(e)?A(e,t,n):I(e,t,n,r,i,o,s),A=(e,t,n)=>{const r=new Date;return h.tD((()=>{const i={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,time:r};return"function"==typeof n.error&&n.error(e.error.message),{event:i,error:(0,m.G)(e)}}))},I=(e,t,n,r,i,o,s)=>(0,a.zG)(h.tD((()=>(e=>void 0!==e.properties)(e)?c(Object.assign(Object.assign({},e),{session_id:t.session_id,view_id:t.view_id})):l(e,t))),h.mU((e=>L(e,i,o,s))),h.At((e=>()=>{"function"==typeof n.success&&n.success(e)})),h.mU((e=>()=>r.add(e,{persistOnDisk:!0}))),h.UI((e=>({event:e,error:m.YP})))),L=(e,t,n,r)=>{const i=h.tD((()=>(0,a.bc)({},{segmentsEntered:new Set,segmentsExited:new Set,cohortsEntered:new Set,cohortsExited:new Set}))),o="sdk_events_querylanguage_seconds",s=(0,a.zG)(h.tD((()=>t.startTimer(o,{}))),h.YO("qlMetricKey"),h.ak("update",(()=>n.process(e,!0))),h.UI((n=>{let{qlMetricKey:i,update:s}=n;return t.stopTimer(o,i),r.debug("[Processing]","Processing event",e,"caused the following update",s),s})));return q.has(e.name)?s:i},D=(e,t,n)=>{T.has(t.name)||e.newEvent(u(t),(0,a.zG)(n,m.fS((()=>null))))},M=new Set(["ThirdPartySegments","SlotRendered"]),x=new Set([...v.D0?["PageviewEngagement"]:[],...v.ED?["SegmentEntry","SegmentExit"]:[]]),O=new Set(["PageviewComplete"]),T=new Set(["PrebidAuctions"]),q=new Set(["!UpdateSecondPartyData","FormSubmission","LinkClick","Pageview","PageviewComplete","PageviewEngagement","SegmentEntry","SlotClicked","SlotViewable","VideoEngagement"]);function G(e,t,n){const{api:s,enrichers:c,logger:u,metrics:l,queryManager:d,stateSync:g,unprocessedPVC:f,userId:_}=e;return i.K4((()=>{const e=new o,i=new p(e,s,l,_,n);return{allEvents:()=>n.all(),getStateSizeInBytes:()=>n.getStateSizeInBytes(),on:(t,n)=>e.addListener({name:t,callback:n,once:!1}),once:(t,n)=>e.addListener({name:t,callback:n,once:!0}),reset:e=>n.reset(e),track:o=>{var{client:p,event:_,useBeacon:v}=o,b=(0,r._T)(o,["client","event","useBeacon"]);const{output:C,isFullyEnriched:A}=c.enrich(_.properties,x.has(_.name)),I=Object.assign(Object.assign({},C),{client:p});l.track({name:A?"sdk_event_enrichment_success_count":"sdk_event_enrichment_fail_count",value:1,labels:{}});const L=(0,a.zG)(t.nonQlCohorts.current,m.fS((()=>[]))),D={user_id:t.userId.current,name:_.name,cohorts:[...L,...t.qlCohorts.current.map(String)],segments:t.qlCohorts.current,properties:I,session_id:_.session_id,view_id:_.view_id};return((e,t)=>(0,a.zG)(y(e.event,e.isEventFullyEnriched,t),(t=>{switch(t){case"immediate":return w(e);case"memoryOnly":return E(e);case"response":return k(e);case"deferred":return S(e);case"never":return P(e)}}),h.tS((()=>O.has(e.event.name)?()=>e.unprocessedPVC.reset():h.of(void 0)))))(Object.assign(Object.assign({},b),{api:s,event:Object.assign(Object.assign({},_),{properties:I}),eventsBatch:i,eventsCache:n,eventHandler:e,isEventFullyEnriched:A,logger:u,metrics:l,queryManager:d,requestData:D,stateSync:g,unprocessedPVC:f}),v)()},__deprecated_eventsCache:n}}))}var U=n(3992);class R{constructor(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}isAvailable(){var e;return!!(null===(e=this.crypto)||void 0===e?void 0:e.subtle)}generateKey(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,U.t_)(this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"]))}encrypt(e,t){const[n,r]=this._encrypt(e,this.str2bytes(t));return n.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(r,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const n=new Uint8Array(t,0,12),r=new Uint32Array(t,12,1)[0],i=t.slice(16,16+r);return this._decrypt(e,n,i).then(this.bytes2str)}_encrypt(e,t){const n=this.crypto.getRandomValues(new Uint8Array(12));return[(0,U.t_)(this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},e,t)),n]}_decrypt(e,t,n){return(0,U.t_)(this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:t},e,n))}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}var B=n(365),z=n(6934);var j=n(7554);class F extends Error{constructor(e){super(e),this.name="StoreClosingError"}}class W{constructor(e,t,r,i,o,s,a,c,u,l){this.version=3;{const d=n(2546);this.db=d.make(e,t,r,i,o,s,a,c,this.version,u,l)().then((0,B.fS)((e=>(0,j.E)(t,u,l))))}}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new F(`Attempted ${e} when the current store is closing.`)}put(e,t){return(0,z.Y3)((()=>this.db.then((n=>n.put(e,t)))),(e=>{const t=(0,s.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("put"):t}))}get(e){return(0,z.Y3)((()=>this.db.then((t=>t.get(e))).then(m.ij)),(e=>{const t=(0,s.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("get"):t}))}delete(e){return(0,z.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,z.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}var N=n(3328),K=n(2652);const $="permutive-events-cache",H="permutive-events-for-page",Y="[EVENTSCACHE]",V=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class Q{constructor(e,t,n,r,i,o,s,c){this.config=e,this.namespace=t,this.logger=n,this.api=r,this.trace=i,this.metrics=o,this.userId=s,this.makeEventsStore=c,this.eventsCache=this.makeEventsRepository($),this.eventsForPage=this.makeEventsRepository(H),this.debouncedReportError=(()=>new f.b(5e3,5e3).schedule((e=>this.api.reportError(e.errorMessage,e.userId))))(),this.eventStore=c(),this.eventsTTLInMilliseconds=(0,a.zG)((0,m.ij)(this.config.eventsTTLInDays),(0,m.tS)((e=>"number"==typeof e&&e>0?(0,m.G)(24*e*3600):m.YP))),this.eventsCache.events=(0,K.HP)((()=>(0,K.PQ)((0,a.zG)(h.tD((()=>this.trace.startSpan("load_event_cache"))),h.tS((e=>(0,a.zG)(this.loadFromDisk(),h.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents()))}migratePreviousPagesEvents(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,h.pE)((e=>(0,z.Y3)((()=>e.flush()),s.w)));return(0,a.zG)([this.eventsForPage,this.eventsCache],t,(0,h.UI)((t=>{const n=N.bj(t);return n.length>0&&this.api.reportError(`Migrate previous events failed. Got:\n${n.join("\n ")}`,this.userId.get()),e.finish()})),(e=>e()))}))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(N.xH)}add(e,t){let{persistOnDisk:n}=t;return(0,r.mG)(this,void 0,void 0,(function*(){return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,a.zG)(this.eventsForPage.events,h.UI((t=>[...t,e])),K.HP),n&&this.readiness.then((()=>this.eventsForPage.flush())),e}))}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(n<=0||t<=n)return this.logDebug(`Event size of ${t} less than limit of ${n}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:n});let r=1,i=[...e];for(;t>n;)i.splice(0,r),r*=2,t=2*JSON.stringify(i).length;return this.logDebug("Events after pruning",{count:i.length,sizeInBytes:t}),{events:i,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,a.zG)(this.eventsTTLInMilliseconds,m.EQ((()=>a.yR),(e=>N.hX((t=>e>Date.now()-t.time.getTime())))));return(0,a.zG)(h.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),h.YO("loadEventsCacheTask"),h.ak("eventsFromDisk",(()=>(0,a.zG)(N.nI([this.eventStore.get($),this.eventStore.get(H)]),N.UI(z.LV((0,K.lo)([[e=>e instanceof F,(0,a.ls)(e,h.of)],t=>(0,a.zG)((()=>this.api.reportError(`Error fetching data from store. Got ${t}`,this.userId.get())),h.tS((()=>()=>this.reset("historical"))),h.UI(e))]),(0,a.ls)(m.fS(e),h.of))),N.vP(h.qA)))),h.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:n}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",n)}})),h.UI((0,a.ls)((0,K.vg)("eventsFromDisk"),N.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),N.UI(c),t)))}reset(e){return(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(h.tD((()=>this.logDebug("Resetting Events Cache"))),h.tS((()=>this.eventStore.deleteStore())),z.Zl((()=>(this.eventStore=this.makeEventsStore(),"historical"===e?_.gz(z.Ij)(this.eventsCache.reset,this.eventsForPage.flush):_.gz(z.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),z.wE((()=>()=>this.all())),z.fS((()=>h.of(J()))),(e=>e()))}))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(B.F2((0,a.Q1)()));return t=>e=e.then(t)})(),n=e=>(0,a.zG)(h.tD((()=>this.logDebug(`Writing ${e.length} events to ${f.key}`))),h.tS((()=>this.eventStore.put(e.map(u),f.key))),z.UI(a.Q1)),r=(0,a.zG)(h.tD((()=>this.logDebug(`Deleting events for ${f.key}`))),h.tS((()=>this.eventStore.delete(f.key))),z.Vn(s.w)),i=(0,a.ls)(h.of,h.At((e=>()=>this.logError(`Events cache failed to put ${f.key}. Got ${e}`))),h.tS((0,K.lo)([[e=>V(e)&&f.retryAttempts<9,()=>(0,a.zG)(h.tD((()=>{f.retryAttempts+=1,this.logDebug(`Attempt #${f.retryAttempts} to write ${f.key} to EventsStore`)})),h.tS((()=>g)),h.tS((()=>c)))],[e=>V(e),e=>(0,a.zG)(h.tD((()=>this.logDebug(`Attempted ${f.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),h.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${f.key}. Got ${e}`,userId:this.userId.get()}))),h.tS((()=>z.t$(e))))],z.t$]))),o=e=>z.tD((()=>{this.logDebug(`Successfully wrote events for ${f.key} after ${f.retryAttempts} attempts`),f.retryAttempts=0,f.sizeInBytes=2*JSON.stringify(e).length,f.sizeInBytesLastSuccessfulWrite=f.sizeInBytes})),c=(0,a.zG)((()=>f.events()),h.tS((e=>(0,a.zG)(n(e),h.mU(B.EQ(i,(()=>o(e)))))))),l=(e,t)=>(0,a.zG)(e.events,h.UI((n=>{const r=2*JSON.stringify(n).length,i=this.pruneEventsToSizeLimit(n,r,t);return e.events=h.of(i.events),e.sizeInBytes=i.sizeInBytes,t-e.sizeInBytes}))),d=(e,t)=>{let[n,...r]=e;return n&&0!==t?(0,a.zG)(l(n,t),h.tS((e=>(this.logDebug(`${e} left after pruning ${n.key}`),d(r,e))))):h.of((0,a.Q1)())},g=(0,a.zG)(z.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),z.fX(B.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),z.tS((e=>{const t=1.2*e,n=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,n),(0,a.zG)(d(n,t),z.fF)}))),f={key:e,events:h.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,a.zG)(h.tD((()=>this.trace.startSpan(`write_${f.key}`))),h.tS((e=>(0,a.zG)(c,h.At((()=>()=>e.finish()))))),t),reset:()=>(0,a.zG)(h.tD((()=>{f.events=h.of([]),f.sizeInBytes=0,f.sizeInBytesLastSuccessfulWrite=0})),h.tS((()=>r)),t)};return f}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(Y,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warn(Y,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(Y,...t)}logLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.log(Y,...t)}}const J=()=>[];class Z extends Q{constructor(e,t,n,r,i,o,s,a){super(e,t,n,r,i,o,s,(()=>new W(e,t,o,new R,"e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",`events_${s.get()}`,`keys_${s.get()}`,"events",n,a)))}}function X(e,t){return G(e,t,new Z(e.config,e.namespace,e.logger,e.api,e.trace,e.metrics,e.userId,e.consentTracking))}var ee=n(7826),te=n(2851);const ne="_pnativo",re=function(e){let{externalData:t}=e;return i.K4((()=>{t.removeExternalData(ne)}))};var ie=n(4011),oe=n(7927),se=n(6017);function ae(e,t){const n=function(e){const t=function(e){let{logger:t,messages:n,queryManager:r}=e;const i="[Ref: QL segments]",o=()=>[...r.userSegments.getAllAsList()],[s,c]=te.Ue(o());return t.debug(i,"initialised",{segments:s.current}),n.on("permutive:segments:updated",(()=>{const e=o();t.debug(i,"updated",{segments:e}),c(e)})),n.on("permutive:reset",(()=>{const e=o();t.debug(i,"reset"),c(e)})),(0,a.zG)(s,te.D8(N.Eh(ie.Eq)))}(e);return(0,a.zG)(t,te.UI((0,a.ls)(N.uK((e=>e<1e7)),(e=>{let{left:t,right:n}=e;return{custom:n,standard:t}}))),(e=>({all:t,custom:(0,a.zG)(e,te.UI((e=>{let{custom:t}=e;return t}))),standard:(0,a.zG)(e,te.UI((e=>{let{standard:t}=e;return t})))})))}(e),r=function(e){let{messages:t,queryManager:n}=e;const[r,i]=te.Ue(m.YP);return t.on("permutive:segments:updated",(()=>{i(m.G(n.stateMap.value))})),t.on("permutive:reset",(()=>i(m.YP))),te.UI(m.UI(ce),r)}(e);return e.queryManager.setLalRef(t.lookalikeModels),e.queryManager.setTpdRef(t.thirdPartyData),i.K4((()=>({cohorts:n,tpdUsage:r})))}const ce=(0,a.ls)(oe.UI((e=>{var t;return null!==(t=e.activations)&&void 0!==t?t:{}})),oe.hX((0,a.zG)(Boolean,(0,se.xD)((0,se.ff)(oe.xb)))));var ue,le,de,ge,fe,pe=-1,me=function(e){addEventListener("pageshow",(function(t){t.persisted&&(pe=t.timeStamp,e(t))}),!0)},he=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},_e=function(){var e=he();return e&&e.activationStart||0},ve=function(e,t){var n=he(),r="navigate";return pe>=0?r="back-forward-cache":n&&(document.prerendering||_e()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},ye=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},be=function(e,t,n,r){var i,o;return function(s){t.value>=0&&(s||r)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},we=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Ee=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},ke=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},Se=-1,Pe=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ce=function(e){"hidden"===document.visibilityState&&Se>-1&&(Se="visibilitychange"===e.type?e.timeStamp:0,Ie())},Ae=function(){addEventListener("visibilitychange",Ce,!0),addEventListener("prerenderingchange",Ce,!0)},Ie=function(){removeEventListener("visibilitychange",Ce,!0),removeEventListener("prerenderingchange",Ce,!0)},Le=function(){return Se<0&&(Se=Pe(),Ae(),me((function(){setTimeout((function(){Se=Pe(),Ae()}),0)}))),{get firstHiddenTime(){return Se}}},De=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Me=[1800,3e3],xe=[.1,.25],Oe=function(e,t){t=t||{},function(e,t){t=t||{},De((function(){var n,r=Le(),i=ve("FCP"),o=ye("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-_e(),0),i.entries.push(e),n(!0)))}))}));o&&(n=be(e,i,Me,t.reportAllChanges),me((function(r){i=ve("FCP"),n=be(e,i,Me,t.reportAllChanges),we((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))}(ke((function(){var n,r=ve("CLS",0),i=0,o=[],s=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],n=o[o.length-1];i&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,o.push(e)):(i=e.value,o=[e])}})),i>r.value&&(r.value=i,r.entries=o,n())},a=ye("layout-shift",s);a&&(n=be(e,r,xe,t.reportAllChanges),Ee((function(){s(a.takeRecords()),n(!0)})),me((function(){i=0,r=ve("CLS",0),n=be(e,r,xe,t.reportAllChanges),we((function(){return n()}))})),setTimeout(n,0))})))},Te={passive:!0,capture:!0},qe=new Date,Ge=function(e,t){ue||(ue=t,le=e,de=new Date,Be(removeEventListener),Ue())},Ue=function(){if(le>=0&&le<de-qe){var e={entryType:"first-input",name:ue.type,target:ue.target,cancelable:ue.cancelable,startTime:ue.timeStamp,processingStart:ue.timeStamp+le};ge.forEach((function(t){t(e)})),ge=[]}},Re=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){Ge(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,Te),removeEventListener("pointercancel",r,Te)};addEventListener("pointerup",n,Te),addEventListener("pointercancel",r,Te)}(t,e):Ge(t,e)}},Be=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Re,Te)}))},ze=[100,300],je=0,Fe=1/0,We=0,Ne=function(e){e.forEach((function(e){e.interactionId&&(Fe=Math.min(Fe,e.interactionId),We=Math.max(We,e.interactionId),je=We?(We-Fe)/7+1:0)}))},Ke=function(){return fe?je:performance.interactionCount||0},$e=function(){"interactionCount"in performance||fe||(fe=ye("event",Ne,{type:"event",buffered:!0,durationThreshold:0}))},He=[200,500],Ye=0,Ve=function(){return Ke()-Ye},Qe=[],Je={},Ze=function(e){var t=Qe[Qe.length-1],n=Je[e.interactionId];if(n||Qe.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Je[r.id]=r,Qe.push(r)}Qe.sort((function(e,t){return t.latency-e.latency})),Qe.splice(10).forEach((function(e){delete Je[e.id]}))}},Xe=[2500,4e3],et={};const tt=function(e){let t=0;const n=n=>{if(0===t)return;const r=nt(n);r&&e.metrics.track({name:`sdk_web_vitals_${r.suffix}`,labels:{},value:r.value})},r=(0,K.HP)((()=>{Oe(n),function(e,t){t=t||{},De((function(){var n,r=Le(),i=ve("LCP"),o=function(e){var t=e[e.length-1];t&&t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-_e(),0),i.entries=[t],n())},s=ye("largest-contentful-paint",o);if(s){n=be(e,i,Xe,t.reportAllChanges);var a=ke((function(){et[i.id]||(o(s.takeRecords()),s.disconnect(),et[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,a,!0)})),Ee(a),me((function(r){i=ve("LCP"),n=be(e,i,Xe,t.reportAllChanges),we((function(){i.value=performance.now()-r.timeStamp,et[i.id]=!0,n(!0)}))}))}}))}(n),function(e,t){t=t||{},De((function(){var n,r=Le(),i=ve("FID"),o=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},s=function(e){e.forEach(o)},a=ye("first-input",s);n=be(e,i,ze,t.reportAllChanges),a&&Ee(ke((function(){s(a.takeRecords()),a.disconnect()}))),a&&me((function(){var r;i=ve("FID"),n=be(e,i,ze,t.reportAllChanges),ge=[],le=-1,ue=null,Be(addEventListener),r=o,ge.push(r),Ue()}))}))}(n),function(e,t){t=t||{},De((function(){$e();var n,r=ve("INP"),i=function(e){e.forEach((function(e){e.interactionId&&Ze(e),"first-input"===e.entryType&&!Qe.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&Ze(e)}));var t,i=(t=Math.min(Qe.length-1,Math.floor(Ve()/50)),Qe[t]);i&&i.latency!==r.value&&(r.value=i.latency,r.entries=i.entries,n())},o=ye("event",i,{durationThreshold:t.durationThreshold||40});n=be(e,r,He,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Ee((function(){i(o.takeRecords()),r.value<0&&Ve()>0&&(r.value=0,r.entries=[]),n(!0)})),me((function(){Qe=[],Ye=Ke(),r=ve("INP"),n=be(e,r,He,t.reportAllChanges)})))}))}(n)}));return i.K4((n=>{let{onServiceStop:i}=n;t++,i((()=>{t--})),e.metrics.isEnabled()&&r()}))};const nt=e=>(e=>"CLS"===e.name)(e)?{value:e.value,suffix:`${e.name.toLowerCase()}_score`}:(e=>["INP","FID","LCP"].includes(e.name))(e)?{value:e.value/1e3,suffix:`${e.name.toLowerCase()}_seconds`}:void 0;var rt=n(926),it=n(4923);const ot=(e,t)=>((e,t,n)=>{const{activationManager:o,externalData:s,metrics:c,permutiveData:u,queryManager:l,stateSync:d,trace:g}=e;return(0,a.zG)(ae(e,{lookalikeModels:t.lookalikeModels,thirdPartyData:(0,a.zG)(t.thirdPartyData,te.UI(m.UI(it.UI((e=>{const t={};for(const n of e)t[n]=!0;return t})))))}),i.YO("queryLanguage"),i.ak("webVitals",(()=>tt(e))),i.ak("eventCollection",(r=>{let{queryLanguage:i}=r;return n(e,{nonQlCohorts:t.nonQlCohorts,qlCohorts:i.cohorts.all,userId:t.userId})})),i.ak("nativo",(e=>{let{queryLanguage:n}=e;return re(Object.assign({activationManager:o,externalData:s,metrics:c,queryLanguageCohorts:n.cohorts.all},t))})),i.ak("twitterPixel",(e=>{let{queryLanguage:n}=e;return(0,rt.eJ)(Object.assign({activationManager:o,metrics:c,permutiveData:u,queryLanguageCohorts:n.cohorts.all},t))})),i.ak("prebidJS",(()=>(0,ee.dN)(e))),i.ak("reset",(e=>{let{eventCollection:t}=e;return i.of((e=>(0,r.mG)(void 0,void 0,void 0,(function*(){l.reset();const n=e.preserveEventsFromCurrentView?"historical":void 0,r=yield t.reset(n),i=g.startSpan("ss_reset_sync");e.downloadState?yield d.resetSync():d.reset(),yield l.bootstrap(r)(),i.finish()}))))})))})(e,t,X);function st(e){return"consentTracking"in e?e.consentTracking.consentRef:te.a9(!0)}function at(e){let{messages:t}=e;const[n,r]=te.Ue(new Set);return t.on("permutive:addon:preinit",(e=>r(new Set([...n.current,e])))),n}function ct(e){let{messages:t,realtime:n}=e;var r;const[i,o]=te.Ue(null!==(r=n.isRealtime())&&void 0!==r&&r);return t.on("permutive:realtime",(()=>o(!0))),i}function ut(){const e=()=>Math.floor(Date.now()/1e3),[t,n]=te.Ue(e());return(0,U.UM)((()=>n(e())),1e3),t}function lt(e,t){const n=function(e){const{activationManager:t,api:n,config:r,enrichers:i,externalData:o,logger:s,messages:a,metrics:c,permutiveData:u,namespace:l,network:d,queryManager:g,stateSync:f,trace:p,track:m,unprocessedPVC:h,urls:_,userId:v}=e,y="consentTracking"in e?e.consentTracking:{consentRef:te.a9(!0),listenForConsent:()=>0,isRevoked:()=>!1,isGiven:()=>!0};return{activationManager:t,api:n,config:r,consentTracking:y,enrichers:i,externalData:o,logger:s,messages:a,metrics:c,permutiveData:u,namespace:l,permutiveApi:d,permutiveUrls:_,queryManager:g,reportError:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)},stateSync:f,trace:p,track:m,unprocessedPVC:h,userId:v}}(e),i=function(e){return{addonsLoaded:e.addonsLoaded,consent:st(e),currentTimestampSecs:ut(),enabledAddons:at(e),identities:e.identities,realtime:ct(e),sdkVariant:m.ij(e.sdkVariant),sessionId:te.a9(e.sessionManager.getSessionId()),userId:e.userId.ref,viewId:e.viewId.ref}}(e);return function(e,t,n){const i=5e3;return(0,a.zG)(e,(o=i,e=>t=>{var{onServiceStop:n}=t,i=(0,r._T)(t,["onServiceStop"]);let s=[];const{value:a,state:c}=e(Object.assign(Object.assign({},i),{onServiceStop:e=>s.push(e)})),[u,l]=te.Ue(c.current),d=()=>l(c.current),g=(0,U.UM)(d,o);let f=!1;return(0,K.aT)((()=>!f&&d()),navigator.userAgent),n((()=>{f=!0,s.forEach((e=>e())),d(),g()})),{value:a,state:u}}),dt,function(e){return t=>(0,a.ls)((0,K.rO)({previousState:t=>e.current?t:void 0}),t,(0,K.rO)({state:(0,a.ls)((t=>te.vP(e,t)),te.UI((e=>{let[t,n]=e;return t?n:void 0})))}))}(n),function(e){return t=>(0,a.ls)((0,K.rO)({previousState:()=>localStorage.getItem(e)}),t,(0,K.rO)({state:(0,K.bw)(te.YP((t=>{switch(typeof t){case"string":localStorage.setItem(e,t);break;case"undefined":localStorage.removeItem(e);break;case"object":if(null===t){localStorage.removeItem(e);break}throw new Error("Permutive app raised an invalid state.");default:throw new Error("Permutive app raised an invalid state.")}})))}))}(t))({onServiceStop:a.Q1}).value;var o}(t(n,i),e.namespace.getNamespacedStorageKey("permutive-app"),i.consent)}function dt(e){return(0,a.ls)((0,K.rO)({previousState:e=>{if("string"!=typeof e)return{};try{return JSON.parse(e)}catch(e){return{}}}}),e,(0,K.rO)({state:te.UI(JSON.stringify)}))}var gt=n(5912),ft=n(7241),pt=n(2197),mt=n(4870),ht=n(9853);const _t="[Prebid Monitoring]",vt=(e,t)=>{e.metrics.track({name:"sdk_prebid_monitoring_key_flag_count_total",labels:t,value:1})},yt=(e,t)=>{e.metrics.track({name:"sdk_prebid_monitoring_key_bidder_flag_count_total",labels:t,value:1})},bt=function(e,t){const n=wt(e);return i.K4((()=>(0,a.zG)(t,te.UI((0,a.ls)(m.DT((e=>e.consent)),m.UI((e=>e.prebidJS)))),te.D8(m.Eh((0,K.Or)())),te.bw((0,a.ls)(m.tS((e=>e.completedChecks?e.mainPair:m.YP)),m.UI((t=>vt(e,{flag:"prebid_main_key",prebid_key:t.windowPropertyKey}))))),te.UI(m.UI((e=>(0,a.zG)(e.mainPair,m.UI((t=>[t,...e.otherPairs])),m.fS((()=>e.otherPairs)))))),te.g_(new Set,((t,r)=>(0,a.zG)(r,m.UI(N.hX((e=>!t.has(e.windowPropertyKey)))),m.hX(N.Od),(0,K.bw)(m.EQ((()=>e.logger.debug(_t,"Nothing to report")),(t=>e.logger.debug(_t,"Reporting",t)))),m.fS((()=>[])),N.UI((t=>(0,a.zG)((t=>(0,a.zG)(B.Y3((function(){var n,r;const{pbjs:i,windowPropertyKey:o}=t;e.logger.log(_t,`Reporting on "${o}"`,t);const s=Et(i);e.logger.debug(_t,`Version ${i.version} parsed as`,s);const c=(0,ee.zi)(i);e.logger.debug(_t,"Read config",c);const u=(0,a.zG)(null!==(r=null===(n=c.realTimeData)||void 0===n?void 0:n.dataProviders)&&void 0!==r?r:[],N.Ew((e=>"permutive"===e.name)));return e.logger.debug(_t,"Read data provider config",u),{pbjs:i,config:c,dataProviderConfig:u,installedModules:i.installedModules||[],version:s,windowPropertyKey:o}}),s.w),B.ak("bidders",(e=>n.acBidders(e))),B.ak("permutiveRTDProvider",(e=>n.permutiveRTDProvider(e))),B.ak("consent",(e=>n.consent(e))),B.ak("targeting",(e=>n.targeting(e)))))(t),B.Pd((n=>e.reportError(`[Prebid Monitoring] Failed to report pair "${t.windowPropertyKey}", ${n.message}`)),(()=>t.windowPropertyKey))))),N.hp,(e=>new Set([...t,...e]))))),(e=>({reportedKeys:e})))))};const wt=e=>({acBidders:t=>B.Y3((()=>{(0,ht.Hn)("prebid")("data_provider_config",{ac_bidders:[]});const n=[],r=(0,a.zG)(t.dataProviderConfig,m.UI((e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.params)||void 0===t?void 0:t.acBidders)&&void 0!==n?n:[]})),m.fS((()=>[]))),i=[...new Set([...n,...r])];return e.logger.debug(_t,"Determined acBidders as",{acBidders:i,dynamicBidders:n,staticBidders:r}),i.forEach((n=>{yt(e,{flag:"prebid_ac_bidder",prebid_key:t.windowPropertyKey,prebid_bidder:n})})),{acBidders:i,dynamicBidders:n,readBidders:r}}),s.w),consent:t=>B.Y3((()=>{var n,r,i,o,s,a;const c=t.windowPropertyKey;t.config.consentManagement&&"object"==typeof t.config.consentManagement&&vt(e,{prebid_key:c,flag:"prebid_has_consent_management"});const u=t.installedModules.includes("gdprEnforcement");u&&vt(e,{prebid_key:c,flag:"prebid_gdpr_enforcement_module"});const l=(null===(a=null===(s=null===(o=null===(i=null===(r=null===(n=t.config)||void 0===n?void 0:n.consentManagement)||void 0===r?void 0:r.gdpr)||void 0===i?void 0:i.rules)||void 0===o?void 0:o.find((e=>"storage"===(null==e?void 0:e.purpose))))||void 0===s?void 0:s.vendorExceptions)||void 0===a?void 0:a.includes("permutive"))||!1;return l&&vt(e,{prebid_key:c,flag:"prebid_storage_exception"}),{hasGDPREnforcementModule:u,addedAsStorageException:l}}),s.w),permutiveRTDProvider:t=>B.Y3((()=>{const n=t.installedModules.includes("permutiveRtdProvider");return n&&vt(e,{prebid_key:t.windowPropertyKey,flag:"prebid_permutive_rtd"}),n}),s.w),targeting:t=>{const n=(0,a.ls)(N.UI((e=>[e,null])),it.sq),r=(t,n)=>(0,a.zG)(t,(0,K.bw)((t=>e.logger.debug(_t,`Processing ${t.length} bidder request(s)`,t))),N.hX((e=>n.hasOwnProperty(e.bidderCode)&&null===n[e.bidderCode])),ft.vM((e=>e.bidderCode)),it.DZ(N.f2((0,K.lo)([[e=>(e=>{var t,n,r;const i=null===(n=null===(t=null==e?void 0:e.user)||void 0===t?void 0:t.data)||void 0===n?void 0:n.find((e=>"permutive.com"===e.name));return!!(null===(r=null==i?void 0:i.segment)||void 0===r?void 0:r.length)})(e.ortb2),()=>m.G("ortb2")],[e=>{return t=e.params,["permutive","p_standard"].some((e=>{var n,r,i,o;return(null===(r=null===(n=null==t?void 0:t.visitor)||void 0===n?void 0:n[e])||void 0===r?void 0:r.length)||(null===(o=null===(i=null==t?void 0:t.keywords)||void 0===i?void 0:i[e])||void 0===o?void 0:o.length)}));var t},()=>m.G("params")],()=>m.YP]))),(0,K.bw)((t=>e.logger.debug(_t,"Bidders targeting method's updated",t)))),i=i=>{e.logger.debug(_t,"Bidders found with no targeting method",i);let o=n(i);const s=n=>(0,a.zG)(r([n],o),(0,K.bw)((e=>{o=Object.assign(Object.assign({},o),e)})),(0,K.bw)(it.Su(((n,r)=>yt(e,{flag:`prebid_${r}_targeting_success`,prebid_key:t.windowPropertyKey,prebid_bidder:n})))),(0,K.bw)((()=>{Object.values(o).includes(null)||(e.logger.debug(_t,`Cleaning up "bidRequested" listener for ${t.windowPropertyKey}`),t.pbjs.offEvent("bidRequested",s))})));t.pbjs.onEvent("bidRequested",s)};return B.Y3((()=>{const o=(0,a.zG)(t.pbjs.getEvents(),N.DZ((0,a.ls)(m.DT((e=>"bidRequested"===e.eventType)),m.UI((0,K.vg)("args")))));return(0,a.zG)(t.bidders.acBidders,m.DT(N.Od),m.EQ((()=>e.logger.debug(_t,"No bidders for targeting")),(0,a.ls)(n,(e=>Object.assign(Object.assign({},e),r(o,e))),it.uK(pt.ff((e=>null===e))),mt.Pd((0,a.ls)(it.XP,m.DT(N.Od),m.UI(i)),it.Su(((n,r)=>yt(e,{prebid_bidder:n,prebid_key:t.windowPropertyKey,flag:`prebid_${r}_targeting_success`})))))))}),s.w)}}),Et=e=>{const[t,n,r]=e.version.split("-")[0].replace("v","").split(".").map((e=>parseInt(e)));return{major:t,minor:n,patch:r}},kt=function(e,t){return i.K4((()=>(e.removeExternalData(St),te.a9({cohorts:[],ssps:[],gamTargetingValues:[]}))))};const St="_pssps",Pt=function(e){let{externalData:t}=e;return i.K4((()=>{t.removeExternalData(Ct)}))};const Ct="_pfws";var At=n(6930),It=n(6320),Lt=n(167);function Dt(e,t){return(0,a.zG)(function(e){return t=>e.permutiveApi.req({url:e.permutiveUrls.getClassificationModelsEndpointUrl("/segment",m.G(e.config.classificationModelsApiVersion)),method:"POST",payload:{userCohorts:t.cohorts,userId:t.userId},contentType:"text/plain",dataType:"json",withCredentials:!1})}(e),(0,Lt.n)({backoffAfterErrorMs:6e5}),i.VS((e=>{const n=(0,a.zG)(t,te.UI((e=>e.queryLanguageCohorts)),te.UI((e=>(0,K.HP)((()=>(0,a.zG)(e,(0,K.SL)((e=>0|e))))))));return(0,At.m)((0,a.zG)(te.vP(t,n),te.UI((t=>{let[n,r]=t;return{currentTimestampSecs:n.currentTimestampSecs,validity:{maxAge:2592e3,key:()=>n.userId},freshness:{maxAge:86400,key:r},refresh:()=>(0,a.zG)(n.queryLanguageCohorts,m.DT((()=>n.initdAddons.has(It.addonName)&&n.realtime)),m.tS((t=>e({userId:n.userId,cohorts:t}))),m.UI((e=>e.then(Mt))))}}))))})),i.UI(te.UI(m.fS((0,a.a9)(xt())))))}function Mt(e){return{allCohorts:(0,N.xH)(Object.values(e)),gam:e.gam||[],xandrSsp:e.xandrSsp||[]}}const xt=()=>({allCohorts:[],gam:[],xandrSsp:[]}),Ot=(e,t)=>(0,a.zG)(t,i.KD([[e=>!e.consent||e.addonsLoaded&&!e.initdAddons.has(It.addonName),i.K4((()=>te.a9(xt())))],Dt(e,t)]),i.UI(te.xH)),Tt=function(e){return i.K4((()=>te.a9(m.YP)))};const qt=(e,t)=>(0,a.zG)(i.vP({classificationModels:Ot(e,t)}),i.UI((e=>e.classificationModels))),Gt=function(e,t){return(0,a.zG)(Ut(e),(0,Lt.n)({backoffAfterErrorMs:6e5}),i.VS((e=>At.m(te.UI((t=>{let{tpdUsage:n,userId:r}=t;return{validityKey:()=>r,freshnessKey:(0,a.ls)((()=>n),m.EQ((()=>0),(0,a.ls)(JSON.stringify,K.vp))),refresh:(0,a.ls)((()=>n),m.hX((e=>Object.keys(e).length>0)),m.tS((t=>e({user_id:r,time:new Date,tpd_segments:t}))))}}),t)))),i.UI(a.Q1))};const Ut=e=>t=>{const{config:n,metrics:r,permutiveApi:i,permutiveUrls:o}=e,s=r.startTimer("sdk_http_tpd_usage_seconds",{});return i.req({url:o.getEndpointUrl("/tpd/usage",m.G(n.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(r.stopTimer("sdk_http_tpd_usage_seconds",s),e)))};function Rt(e,t){const[n,r]=te.Ue(0);let o=!1;const s=()=>{try{o=!0,r(n.current+1)}finally{o=!1}},c=["amp","gigya","pxid","sailthru"],u=(0,a.zG)(t.identities,te.UI(it.z7((e=>!c.includes(e)))));return(0,a.zG)(i.vP({fetchFromNewEndpoint:(0,a.zG)(Bt(e),(0,Lt.n)({backoffAfterErrorMs:6e5})),fetchFromLegacyEndpoint:(0,a.zG)(zt(e),(0,Lt.n)({backoffAfterErrorMs:6e5}))}),i.VS((r=>{let{fetchFromNewEndpoint:i,fetchFromLegacyEndpoint:s}=r;const c=t=>(0,a.zG)(i(t),m.UI((e=>e.catch((()=>(0,a.zG)(s(t.identities),m.fS((()=>e))))))),m.wp((()=>s(t.identities))),m.UI((0,K.bw)((t=>{const n=e.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{});t.catch(a.Q1).then((()=>{e.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",n)}))}))));return At.m((0,a.zG)(te.vP(n,t.userId,t.sessionId,u),te.UI((e=>{let[t,n,r,i]=e;return{validityKey:()=>n,freshnessKey:()=>`${jt(i)},${r}`,refresh:()=>(0,a.zG)({userId:n,identities:i},m.DT((e=>{let{identities:t}=e;return o&&!it.xb(t)})),m.tS(c))}}))))})),i.UI((e=>({refresh:s,data:e}))))}const Bt=e=>t=>(0,r.mG)(void 0,void 0,void 0,(function*(){return(yield e.api.reqWithMetrics(e.metrics,"sdk_http_audience_matching_seconds",{url:e.permutiveUrls.getAudienceMatchingEndpointUrl("/id",m.G("v1"),t.userId),payload:{identities:(0,a.zG)(t.identities,it.Yz,N.UI((e=>{let[t,n]=e;return{tag:t,id:n}})))},method:"POST",withCredentials:!1,dataType:"json"})).items})),zt=e=>t=>e.api.reqWithMetrics(e.metrics,"sdk_http_tpd_seconds",{url:e.permutiveUrls.getEndpointUrl("/tpd",m.G(e.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1}),jt=(0,a.ls)(JSON.stringify,K.vp);const Ft=(e,t)=>(0,a.zG)(i.vP({data:Rt(e,{identities:t.identities,sessionId:t.sessionId,userId:t.userId}),usageReporting:Gt(e,te.vP({tpdUsage:t.tpdUsage,userId:t.userId})),removeLegacyDataFromLocalStorage:i.dQ((t=>{let{previousState:n}=t;if(!n){const t=e.namespace.getNamespacedStorageKey("permutive-data-tpd");localStorage.removeItem(t)}return{value:null,state:te.a9(!0)}}))}),i.ak("analytics",(n=>{let{data:{data:r}}=n;return function(e,t){return i.dQ((n=>{let{previousState:r}=n;var i;return{state:(0,a.zG)(te.vP(t.userId,t.providerSegments),te.g_(null!==(i=r)&&"object"==typeof i?i:{userId:"",providerHashes:{}},((t,n)=>{let[r,i]=n;const o=(0,a.zG)(i,m.fS((()=>({})))),s=(0,a.zG)(o,it.UI((0,K.SL)(K.vp))),c=(0,a.zG)(t,m.DT((e=>e.userId===r)),m.UI((e=>e.providerHashes)),m.fS((()=>({}))));return(0,a.zG)(o,it.z7((e=>s[e]!==(c[e]||0))),it.Su(((t,n)=>{e("ThirdPartySegments",{data_provider:t,segments:[...n]})}))),{userId:r,providerHashes:s}}))),value:void 0}}))}(e.track,{providerSegments:r,userId:t.userId})})),i.UI((e=>{let{data:t}=e;return{data:t.data,refreshData:t.refresh}})));var Wt=n(5619);te.a9([]),te.a9([]),te.a9([]),te.a9([]),te.a9([]),te.a9([]),te.a9(Wt.b()),te.a9(m.YP);function Nt(e,t,n){const{addonsLoaded:r,consent:o,currentTimestampSecs:s,enabledAddons:c,identities:u,realtime:l,sdkVariant:d,sessionId:g,userId:f,viewId:p}=t,[h,_]=(0,a.zG)(te.Ue(m.YP),(e=>{let[t,n]=e;return[(0,a.zG)(t,te.VS(m.EQ((()=>te.a9(m.YP)),te.UI(m.G)))),n]})),[v,y]=(0,a.zG)(te.Ue(te.a9(m.YP)),(e=>{let[t,n]=e;return[te.xH(t),n]}));return(0,a.zG)(i.vP({lookalikeModels:Tt(e),metricContext:Wt.X({sdkVariant:d,sessionId:g,userId:f,viewId:p}),computeTimeMetrics:(b=e.metrics,i.K4((e=>{let{onServiceStop:t}=e;const n=(0,U.HJ)((()=>{(0,a.zG)((0,U.iE)(),(0,K.bw)((()=>(0,U.ho)(!1))),N.UI((e=>{let[t,n]=e;return(n-t)/1e3})),(e=>{b.track({name:"sdk_ui_thread_compute_first10s_total_seconds",value:e.reduce(((e,t)=>e+t),0),labels:{}}),b.track({name:"sdk_ui_thread_compute_first10s_total_task_overrun_seconds",value:(0,a.zG)(e,N.hX((e=>e>.05)),N.UI((e=>e-.05)),N.u4(0,((e,t)=>e+t))),labels:{}}),b.track({name:"sdk_ui_thread_compute_first10s_longest_task_seconds",value:Math.max(0,...e),labels:{}})}))}),1e4);t(n)})))}),i.ak("sdkql",(t=>{let{lookalikeModels:i}=t;return n(e,{addonsLoaded:r,consent:o,initdAddons:c,lookalikeModels:i,nonQlCohorts:h,thirdPartyData:v,userId:f})})),i.ak("demandPartners",(t=>{let{sdkql:{queryLanguage:n}}=t;return((e,t)=>(0,a.zG)(i.vP({ssp:kt(e.externalData,t)}),i.UI((e=>{let{ssp:t}=e;return t}))))(e,{addonsLoaded:r,consent:o,initdAddons:c,standardCohorts:n.cohorts.standard})})),i.ak("mediaAndEntertainment",(t=>{let{sdkql:{queryLanguage:n}}=t;return((e,t)=>(0,a.zG)(i.vP({freewheel:Pt(Object.assign({activationManager:e.activationManager,externalData:e.externalData},t))}),i.UI((0,a.a9)({}))))(e,{addonsLoaded:r,consent:o,initdAddons:c,queryLanguageCohorts:n.cohorts.all})})),i.ak("publishers",(t=>{let{sdkql:{queryLanguage:n}}=t;return((e,t)=>(0,a.zG)(i.vP({addressability:qt(e,te.vP(t)),audienceMatching:Ft(e,{identities:t.identities,sessionId:t.sessionId,tpdUsage:t.tpdUsage,userId:t.userId})}),i.UI((e=>{let{addressability:t,audienceMatching:n}=e;return{cohorts:{all:te.UI((e=>e.allCohorts),t),gam:te.UI((e=>e.gam),t),xandrSsp:te.UI((e=>e.xandrSsp),t)},refreshThirdPartyData:n.refreshData,thirdPartyData:n.data}}))))(e,{addonsLoaded:r,consent:o,currentTimestampSecs:s,identities:u,initdAddons:c,queryLanguageCohorts:n.cohorts.all,realtime:l,sessionId:g,tpdUsage:n.tpdUsage,userId:f})})),i.ak("advertisers",(t=>{let{demandPartners:n,sdkql:u}=t;return((e,t)=>(0,a.zG)(gt.segmentationService(e,te.vP(t)),i.YO("segmentation"),i.ak("prebidMonitoring",(()=>bt(e,te.vP({consent:t.consent,prebidJS:t.prebidJS})))),i.UI((e=>e.segmentation))))(e,{addonsLoaded:r,consent:o,currentTimestampSecs:s,customCohorts:u.queryLanguage.cohorts.custom,demandPartnerCohorts:te.UI((e=>e.cohorts),n),initdAddons:c,prebidJS:u.prebidJS,sessionId:g,standardCohorts:u.queryLanguage.cohorts.standard,userId:f,viewId:p})})),i.bw((e=>{let{publishers:t}=e;return y(t.thirdPartyData)})),i.UI((e=>{let{advertisers:t,demandPartners:n,metricContext:r,publishers:i,sdkql:o}=e;return{cloudCohorts:{all:(0,a.zG)(te.vP(i.cohorts.all,t.segments.all,te.UI((e=>e.cohorts),n)),te.UI(N.xH)),gam:(0,a.zG)(te.vP(i.cohorts.gam,t.segments.all,te.UI((e=>e.gamTargetingValues),n)),te.UI(N.xH)),xandrSsp:i.cohorts.xandrSsp},eventCollection:o.eventCollection,metricContext:r,pbjsPair:te.UI((e=>e.mainPair),o.prebidJS),queryLanguageCohorts:o.queryLanguage.cohorts,refreshThirdPartyData:i.refreshThirdPartyData,resetQL:o.reset}})),i.bw((e=>{let{cloudCohorts:t}=e;return _(m.G(t.all))})));var b}function Kt(e){return lt(e,$t)}function $t(e,t){return Nt(e,t,ot)}},6640:(e,t,n)=>{n.d(t,{B9:()=>p,iq:()=>d,ti:()=>h});var r=n(2688),i=n(787),o=n(365),s=n(6567),a=n(3735),c=n(2652),u=n(3030);const l="__permutive.",d="__permutiveConfigQueryParams";const g={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",apiProtocol:"https",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,u._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataModelsKey:"permutive-data-models",permutiveDataQueriesKey:"permutive-data-queries",permutiveDataEnrichersKey:"permutive-data-enrichers",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"e1c3fd73-dd41-4abd-b80b-4278d52bf7aa.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:["internal_query_states"],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0}},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},f=e=>{const t={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},n={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0};return Object.keys(e).reduce(((r,i)=>{if(t.hasOwnProperty(i)){const t="true"===e[i];return Object.assign(Object.assign({},r),{[i]:t})}if(n.hasOwnProperty(i)){const t=Number(e[i]);return isNaN(t)?r:Object.assign(Object.assign({},r),{[i]:t})}return Object.assign(Object.assign({},r),{[i]:e[i]})}),{})},p=function(){let{getQueryParams:e=u.zM}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>Object.entries(e).reduce(((e,t)=>{let[n,r]=t;if(!(0===n.indexOf(l)))return e;const i=n.replace(l,"");return[...e,[i,r]]}),[]);return(0,a.zG)(o.Y3((()=>(0,a.zG)(e(),t,(e=>(0,c.m8)(...e)),f,(e=>m({queryConfig:e})))),(e=>`Failed to parse query params. Got ${(0,r.w)(e).message}`)))},m=e=>{let{queryConfig:t}=e;const n=(0,a.zG)(s.Y3((()=>window.sessionStorage.getItem(d))),s.tS(s.ij),s.tS((0,a.ls)(i.A,s.ij)),s.fS((()=>({}))));return(0,c.PM)(n,t)},h=(e,t)=>{var n;const r=null!==(n=e.environment&&g[e.environment])&&void 0!==n?n:{};return(0,c.PM)(g.default,r,e,t)}},4564:(e,t,n)=>{n.d(t,{NY:()=>h,vk:()=>f,qA:()=>g});var r=n(7582),i=n(2688),o=n(365),s=n(3735),a=n(6934),c=n(8259),u=n(1410),l=n(2851);var d=n(30);const g=()=>({opt_in:!0,token:u.L}),f=()=>({opt_in:!1,token:""}),p=e=>{return(0,s.ls)((t=e,e=>(0,s.zG)((0,d.J)(t.consentRequired,e),(e=>{let{consentData:n,isValid:r}=e;return t.consentDatabase.put(n,u.L),r}))),(e=>{let{logger:t,messages:n}=e;return e=>{const r=e?"given":"revoked";return t.log("Consent has been",r),n.emit(`permutive:consent:${r}`),e}})(e));var t},m=e=>(t,n)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",n)},h=e=>(0,r.mG)(void 0,void 0,void 0,(function*(){const{logger:t,namespace:n,consentRequired:r,messages:g}=e,f=new c.oP(window.localStorage,n),h=(0,d.J)(r,yield f.get(u.L)),_=yield(0,s.zG)(a.Y3((()=>f.put(h.consentData,u.L)),(e=>new Error(`LocalStorage access is required. ${(0,i.w)(e).message}`))),(e=>e()));if(o.nM(_))return _;const{consentRef:v,giveConsent:y,revokeConsent:b,isRevoked:w,isGiven:E}=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[t,n]=l.Ue(e),r=()=>!0===t.current;return{consentRef:t,revokeConsent:()=>(n(!1),t.current),giveConsent:()=>(n(!0),t.current),isRevoked:()=>!r(),isGiven:r}}(h.isValid),k={consentRef:v,isGiven:E,isRevoked:w,listenForConsent:m(g)};k.listenForConsent(b,y);const S=p({consentDatabase:f,consentRequired:r,logger:t,messages:g});return o.F2({consentTracking:k,consentValidation:S,consentDatabase:f})}))},1410:(e,t,n)=>{n.d(t,{L:()=>r});const r="permutive-consent"},7708:(e,t,n)=>{n.d(t,{D:()=>d});var r=n(1500),i=n(365),o=n(3735),s=n(6567),a=n(7407),c=n(4922),u=n(1410),l=n(30);const d=e=>{const{partialTagWithKey:t}=e,n=t.key;var d;window[n].consent=(d=e,(0,o.ls)(d.consentModule.consentValidation,s.DT(Boolean),s.UI((0,c.H)(d)),o.Q1));const g=(0,s.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,o.zG)((0,o.a9)(t.consentDatabase.get(u.L)),(0,a.UI)((e=>(0,l.J)(t.consentRequired,e).isValid)));var t}),a.of);return(0,o.zG)((0,o.zG)((e=>{let{consentModule:t,tag:n}=e;const i=(0,r.Ew)((function(e){return"consent"===e.functionName}))(n.q);return(0,s.UI)((e=>t.consentValidation(e.arguments[0])))(i)})(e),g),(0,a.UI)((e=>e?(0,i.F2)(!0):(0,i.t$)("No consent to run on the page"))))}},4769:(e,t,n)=>{n.d(t,{v:()=>r});const r=(e,t,n)=>function(){const r=n()?t:e;return r(...arguments)}},30:(e,t,n)=>{n.d(t,{J:()=>s});var r=n(3735),i=n(6567),o=n(4564);const s=(e,t)=>(0,r.zG)((0,i.ij)(t),(t=>!1===e&&(0,i.Wi)(t)?{isValid:!0,consentData:(0,o.qA)()}:(e=>(0,i.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>{var t;return!0===e.opt_in&&"string"==typeof e.token&&(null===(t=e.token)||void 0===t?void 0:t.length)>0})(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:(0,o.vk)()}))},3298:(e,t,n)=>{n.d(t,{S:()=>v});var r=n(3735),i=n(7582),o=n(6567),s=n(1500),a=n(2851),c=n(1540),u=n(2497),l=n(5165),d=n(3992);var g=n(2652);class f{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var p=n(5057);class m{constructor(e,t,n,r,i,o,s,a,c,u,l,d,g,f,p,m,h,_,v,y,b,w,E,k,S,P,C,A){this.logger=e,this.api=t,this.activationManager=n,this.sessionManager=r,this.metrics=i,this.viewId=o,this.userId=s,this.network=a,this.enrichers=c,this.clientContext=u,this.unprocessedEvents=l,this.queryManager=d,this.taskQueue=g,this.identities=f,this.permutiveReset=p,this.messages=m,this.addons=h,this.trace=_,this.permutiveRealtime=v,this.state=y,this.customProperties=b,this.config=w,this.permutiveData=E,this.externalData=k,this.cookies=S,this.identitiesIngestor=P,this.global=C,this.nextGen=A,this.initialisedAddons=[],this.triggerListeners=[]}identify(e){const t="[Identify]";this.logger.debug("<call> identify",e);const n=(0,g.b2)(),a=this.identities.parseCustomerDefinedIdentities(e),u=Object.assign(Object.assign({},this.identities.getIdentitiesMap()),a.reduce(((e,t)=>{let{tag:n,id:r,priority:i,expiry:o}=t;return Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({id:r},void 0!==i?{priority:i}:{}),void 0!==o?{expiry:o}:{})})}),{})),l=(0,r.zG)(Object.values(u),s.DZ((e=>o.ij(e.id)))),d=this.identities.getPrioritizedIdentities(u);if("string"==typeof e&&(0,c.Bt)("e1c3fd73-dd41-4abd-b80b-4278d52bf7aa","e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",l,window.location.hostname,this.userId.get()))return n.resolve(),n.promise;const m=()=>(0,i.mG)(this,void 0,void 0,(function*(){this.nextGen.refreshThirdPartyData()})),h=e=>(0,i.mG)(this,void 0,void 0,(function*(){yield(0,p.Yj)({clientContext:this.clientContext,global:this.global,identities:this.identities,logger:this.logger,nextGen:this.nextGen,reset:this.permutiveReset,userId:this.userId},e.user_id)}));return this.taskQueue.add(new f((e=>(0,i.mG)(this,void 0,void 0,(function*(){this.logger.debug("<task> identify",a);const r=()=>(0,i.mG)(this,void 0,void 0,(function*(){this.logger.log(t,"request identity");const e=yield this.api.identify(this.metrics,this.userId,d);this.userId.isEqual(e.user_id)?(this.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{identify_reason:"identify_call"}}),yield m()):(this.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{identify_reason:"identify_call"}}),yield h(e))}));this.identities.setIdentities(a).identifyRequestRequired()?yield r():this.logger.log(t,"skip request"),this.logger.debug("<done> identify",a),e(),n.resolve(),yield this.identitiesIngestor.ingestIfEligible(a).catch((e=>this.api.reportError(`Couldn't ingest identities, got ${e}`,this.userId.get())))}))),{wait_prev:!0,block_next:!0})),n.promise}on(e,t){return this.nextGen.eventCollection.on(e,t)}once(e,t){return this.nextGen.eventCollection.once(e,t)}track(){var e,t,n;const[r,i,o]=[arguments.length<=0?void 0:arguments[0],(arguments.length<=1?void 0:arguments[1])||{},(arguments.length<=2?void 0:arguments[2])||{}],s=this.trace.startSpan("track_event");this.logger.log("<call> track",r);const a=(0,g.b2)(),c=null!==(e=o.unprocessedData)&&void 0!==e?e:{},u=null!==(t=c.sessionId)&&void 0!==t?t:this.sessionManager.getSessionId(),l=null!==(n=c.viewId)&&void 0!==n?n:this.viewId.get(),d={success:o.success||(e=>{}),error:o.error||((e,t)=>{})};return this.taskQueue.add(new f((e=>{this.logger.log("<task> track",r);return(c.client?Promise.resolve(c.client):this.clientContext.getClient()).then((t=>{var n;const c={name:r,properties:i,session_id:u,view_id:l,time:new Date};return this.nextGen.eventCollection.track({client:i.client?(0,g.PM)(t,i.client):t,event:c,requestOptions:d,useBeacon:null!==(n=o.useBeacon)&&void 0!==n&&n}).then((t=>{this.logger.log("<done> track",c.name),a.resolve(c),e(),s.finish()})).catch((e=>{var t;null===(t=d.error)||void 0===t||t.call(d,e),this.api.reportError(e,this.userId.get()),a.reject(e)}))}))}))),a.promise}trigger(e,t,n){const r=(0,g.b2)();this.logger.log("<call> trigger",e),this.triggerListeners=this.triggerListeners||[];return this.taskQueue.add(new f((t=>{this.logger.log("<task> trigger",e);const i=this.messages.on("permutive:query:changed",(function(t){t.queryCode===e&&(n(t.result),r.resolve(t.result))}));this.triggerListeners.push(i),this.logger.log("<done> trigger",e),t()}))),r.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const n=(0,g.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new f((r=>{var i;this.logger.log("<task> segment",e);const o=this.queryManager.stateMap.value[e];t((null===(i=null==o?void 0:o.result)||void 0===i?void 0:i.result)||!1),n.resolve(),this.logger.log("<done> segment",e),r()}))),n.promise}segments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const n=(0,g.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new f((r=>{this.logger.log("<task> segments ("+t+")");const i=i=>{e(i),n.resolve(i),this.logger.log("<done> segments ("+t+")"),r()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{this.addons.dfp&&i([...this.addons.dfp.segments.liveSegments])})):i([...this.nextGen.queryLanguageCohorts.all.current])}))),n.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.unprocessedEvents.PageviewComplete.reset(),this.nextGen.resetQL({downloadState:!1,preserveEventsFromCurrentView:!1})]).then((e=>{let[t]=e;this.userId.set(t.id)})).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.api.reportError(`Error resetting internals. Got ${e}`)}))}addon(e,t){const s=Object.assign(Object.assign({},t),{permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,state:this.state,queryManager:this.queryManager,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,addons:this.addons,enrichers:this.enrichers,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGen}),c=(0,r.zG)(this.nextGen.pbjsPair,a.UI(o.UI((0,g.vg)("pbjs"))));if(-1===this.initialisedAddons.indexOf(e))switch(this.initialisedAddons.push(e),this.messages.emit("permutive:addon:preinit",e),e){case"web":Promise.resolve().then(n.bind(n,4400)).then((e=>this.addons.web=new e.WebAddon(s))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"nativo":case"freewheel":case"facebook_pixel_v2":case"eyeota_pixel":case"rubicon":case"rubicon_ssp":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"prebid":case"gam_log":case"smart":case"tradedesk":case"appnexus":case"pubmatic":case"ctv":case"ssp":0;break;case"overlays":Promise.resolve().then(n.bind(n,8087)).then((e=>this.addons.overlays=new e.OverlaysAddon(s)));break;case"scriptrunner":Promise.resolve().then(n.bind(n,7416)).then((e=>this.addons.scriptrunner=new e.ScriptRunnerAddon(s)));break;case"dfp":Promise.resolve().then(n.bind(n,9658)).then((e=>(0,i.mG)(this,void 0,void 0,(function*(){return this.addons.dfp=yield e.createAddon(s)}))));break;case"tracking_pixel":Promise.resolve().then(n.bind(n,3792)).then((e=>this.addons.tracking_pixel=new e.PixelAddon(s)));break;case"classification_models":Promise.resolve().then(n.bind(n,6320)).then((e=>this.addons.classification_models=new e.ClassificationModelsAddon(s)));break;case"clean_room":Promise.resolve().then(n.bind(n,5912)).then((e=>this.addons.clean_room=new e.CleanRoomAddon(Object.assign(Object.assign({},s),{pbjs:c}))));break;case"ddp":case"dbm":Promise.resolve().then(n.bind(n,9319)).then((e=>this.addonIfTCFConsent({Addon:e.DDPPixel,key:"ddp"},s)))}else"web"===e&&!0!==t.auto_init?((e,t,n,r)=>new Promise(((i,s)=>{var a;const c=(0,o.Y3)(e);if((0,o.pC)(c))return i(c.value);n.once(t,(()=>(0,o.g_)((()=>s(new Error(`Error after waiting for event ${t}`))),i)((0,o.Y3)(e))));const u=null!==(a=null==r?void 0:r.timeout)&&void 0!==a?a:1e4;(0,d.HJ)((()=>s(new Error(`Event ${t} was not received within the timeout period ${u}ms`))),u)})))((()=>{if(!this.addons.web)throw new Error('"web" addon not ready');return this.addons.web.reset(t)}),"permutive:web:ready",this.messages).catch((e=>{this.api.reportError(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())})):"ctv"===e&&(null==t||t.auto_init)}addonIfTCFConsent(e,t){const n=()=>{switch(e.key){case"tradedesk":this.addons.tradedesk=new e.Addon(t);break;case"ddp":this.addons.ddp=new e.Addon(t);break;case"appnexus":this.addons.appnexus=new e.Addon(t);break;case"pubmatic":this.addons.pubmatic=new e.Addon(t)}},i=t=>t[l.D[e.key]]?n():(0,r.Q1)();return(0,u._8)(window).then((e=>{switch(e.type){case"missing":return n();case"aborted":return(0,r.Q1)();case"loaded":return(0,r.zG)((0,u.Ec)(e.data),(0,o.g_)(n,i))}}))}ready(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"initialised";const n=(0,g.b2)(),r=()=>{e(),n.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?r():this.messages.on("permutive:ready",r);break;case"realtime":this.permutiveRealtime.isRealtime()?r():this.messages.once("permutive:realtime",r)}return n.promise}}var h=n(4769);const _=e=>{const{logger:t,consentTracking:n}=e,o=function(){return t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null)};return e=>class extends e{constructor(){super(...arguments),this.track=(0,h.v)(super.track.bind(this),o,n.isRevoked),n.isRevoked()&&this.consentRevoked(),n.listenForConsent((()=>this.consentRevoked()),r.Q1)}consentRevoked(){return(0,i.mG)(this,void 0,void 0,(function*(){return yield this.sessionManager.reset(),this.reset()}))}}},v=(e,t,n,i,o,s,a,c,u,l,d,g,f,p,h,v,y,b,w,E,k,S,P,C,A,I,L,D,M)=>new((0,r.zG)(m,_({consentTracking:D,logger:e})))(e,t,n,i,o,s,a,c,u,l,d,g,f,p,h,v,y,b,w,E,k,S,P,C,A,I,L,M)},6416:(e,t,n)=>{n.d(t,{O:()=>c});var r=n(1828),i=n(365),o=n(3735);const s=e=>(0,o.zG)((e=>"function"==typeof e.Map?(0,i.F2)(new e.Map([["a",1]])):(0,i.t$)("Maps not supported"))(e),i.tS((e=>1===e.size?(0,i.F2)(null):(0,i.t$)("Iterable Maps not supported")))),a=e=>(0,o.zG)((e=>"function"==typeof e.Set?(0,i.F2)(new e.Set([1,2])):(0,i.t$)("Sets not supported"))(e),i.tS((e=>2===e.size?(0,i.F2)(null):(0,i.t$)("Iterable Sets not supported")))),c=e=>(0,o.zG)((0,r.gz)(i.G5)(s(e),a(e),(e=>e.Worker&&e.Blob?(0,i.F2)(null):(0,i.t$)("WebWorkers not supported"))(e)),(e=>(0,i.UI)(o.Q1)(e)))},5057:(e,t,n)=>{n.d(t,{Yj:()=>re,TZ:()=>te});var r=n(7582),i=n(2688),o=n(7407),s=n(3735),a=n(7341),c=n(6567),u=n(4870);function l(e,t){return function(n){return e.map(n,t.compact)}}function d(e,t,n){var r=l(e,t),i=(0,a.UI)(e,n);return function(e){return u.s4(r((0,s.zG)(e,i(c.IS))),r((0,s.zG)(e,i(c.EK))))}}var g=n(6017);function f(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.filter(e,n)}))}}}function p(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.filterMap(e,n)}))}}}function m(e,t){var n=f(e,t);return function(e){var t=n((0,g.ff)(e)),r=n(e);return function(e){return(0,u.s4)(t(e),r(e))}}}function h(e,t){var n=p(e,t);return function(e){return function(t){return(0,u.s4)((0,s.zG)(t,n((function(t){return(0,c.IS)(e(t))}))),(0,s.zG)(t,n((function(t){return(0,c.EK)(e(t))}))))}}}var _=n(9679),v=n(9384),y=n(1828);function b(e){return(0,s.ls)(c.G,e.of)}function w(e){return(0,s.a9)(e.of(c.YP))}function E(e){return function(t){return e.map(t,c.G)}}function k(e){return(0,s.ls)(c.ij,e.of)}function S(e){var t=k(e);return function(e){return(0,s.ls)(e,t)}}function P(e){var t=q(e),n=S(e);return function(e){return t(n(e))}}function C(e){return function(t){return(0,s.ls)(t,e.of)}}function A(e){var t=q(e),n=C(e);return function(e){return t(n(e))}}function I(e){return function(t){return function(n){return e.of(c.DT(t)(n))}}}function L(e){return(0,s.ls)(c.Uo,e.of)}function D(e){return function(t,n){return function(r){return e.map(r,c.EQ(t,n))}}}function M(e){return function(t,n){return function(r){return e.chain(r,c.EQ(t,n))}}}function x(e){return function(t){return function(n){return e.chain(n,c.EQ(t,e.of))}}}function O(e){return(0,a.UI)(e,c.dO)}function T(e){return(0,y.ap)(e,c.G5)}function q(e){var t=w(e);return function(n){return function(r){return e.chain(r,c.EQ((function(){return t()}),n))}}}function G(e){var t=b(e);return function(n){return function(r){return e.chain(r,c.EQ(n,t))}}}var U=b(o.PM),R=(o.PM,o.of,o.PM,function(e){return B(o.tD(e))}),B=E(o.dO),z=(c.Uo,D(o.dO)),j=(o.qo,o.UA,o.PM,o.PM,o.UA,o.PM,o.UA,O(o.dO)),F=T(o.Hi),W=U,N=q(o.UA),K=(o.UA,o.PM,o.dO,c.Ri,o.dO,c.Ri,c.dO,o.dO,c.xu,o.dO,c.xu,o.dO,c.xu,o.dO,c.xu,function(e,t){return(0,s.zG)(e,j(t))}),$=function(e,t){return(0,s.zG)(e,F(t))},H=function(e,t){return(0,s.zG)(e,N(t))},Y="TaskOption",V={URI:Y,map:K,ap:$,chain:H},Q={URI:Y,fromIO:R,fromTask:B},J=(0,_.oU)(Q,V),Z=(v.F4,v.Xl,n(2652));var X=n(1540);const ee=e=>(0,r.mG)(void 0,void 0,void 0,(function*(){yield e.identities.thirdParty,yield function(e,t){return(0,X.Bt)("e1c3fd73-dd41-4abd-b80b-4278d52bf7aa","e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.userId.get())?t.reset():Promise.resolve()}(e,e.permutiveMethods);const t=yield function(e){const t=e.trace.startSpan("identify");0;return(e=>(0,r.mG)(void 0,void 0,void 0,(function*(){const t="[Identify Init]",{logger:n,api:r,userId:i,identities:o,metrics:s,identitiesIngestor:a,messages:c,sessionManager:u}=e,l=yield o.thirdParty,d=o.extractIdentifyFromQueue(e),g=o.getIdentitiesMap(),f=d.reduce(((e,t)=>{let{tag:n,id:r,priority:i,expiry:o}=t;return Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({id:r},o?{expiry:o}:{}),void 0!==i?{priority:i}:{})})}),{}),p=Object.assign(Object.assign({},g),f),m=o.setIdentities(Object.entries(p).map((e=>{let[t,{id:n,priority:r,expiry:i}]=e;return Object.assign(Object.assign({tag:t,id:n},i?{expiry:i}:{}),void 0!==r?{priority:r}:{})}))),h=o.getPrioritizedIdentities(p);n.log("Begin identification");const _=e.sessionCount>1&&u.sessionHasChanged()||l.identifyRequestRequired()||m.identifyRequestRequired()?yield(n.debug(t,"request identity"),r.identify(s,i,h).then((e=>{const r=e.user_id;return i.isEqual(r)?{identityChanged:!1}:(n.debug(t,"fetch received new user id",r),{identityChanged:!0,userId:r})})).catch((e=>(r.reportError(`${t} Fetch failed. Got ${e}`,i.get()),{identityChanged:!1}))).then((0,Z.bw)((t=>e.metrics.track({name:`sdk_identity_${t.identityChanged?"changed":"remained"}_total`,value:1,labels:{identify_reason:"sdk_init"}}))))):(n.debug(t,"skip request"),{identityChanged:!1});return a.ingestIfEligible(h).catch((e=>r.reportError(`Couldn't ingest identities, got ${e}`,_.identityChanged?_.userId:i.get()))),c.emit("permutive:user:ready"),n.debug(t,"result",_),_})))(e).catch((t=>(e.api.reportError(`Failed to identify. Got ${(0,i.w)(t)}`),{identityChanged:!1}))).then((e=>(t.finish(),e)))}(e);return t.identityChanged?yield re(e,t.userId):(e.logger.log("Identity has not changed"),e.nextGen.refreshThirdPartyData()),t})),te=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};return(0,r.mG)(void 0,void 0,void 0,(function*(){ee(e).then(t),yield ne(e.logger,e.trace,e.permutiveMethods,e.unprocessedEvents,e.queryManager,e.eventCollection,e.metrics)(),ie(e.global,e.clientContext)}))};function ne(e,t,n,i,a,c,u){e.log("Assuming identity hasn't changed");const l=a.hasNewOrModifiedQueries,d=l?(0,s.zG)((()=>c.allEvents()),o.tS((e=>a.bootstrap(e)))):a.bootstrap([]),g=(0,s.zG)((()=>i.PageviewComplete.getIfPresent()),(0,Z.bw)(z((()=>e.debug("No unprocessed PVC data detected")),(t=>e.debug("Unprocessed PVC data detected",t)))),J((e=>{var{props:t}=e,s=(0,r._T)(e,["props"]);return y.gz(o.oE)((()=>n.track("PageviewComplete",t,{unprocessedData:s})),(()=>i.PageviewComplete.reset()))})),o.UI((()=>{})));return(0,s.zG)(y.gz(o.oE)((()=>(0,r.mG)(this,void 0,void 0,(function*(){return t.startSpan(`qm_bootstrap_${l}`)}))),d,g),o.UI((e=>{let[t]=e;return t.finish()})))}function re(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){e.logger.log("Identity has changed"),yield e.reset.reset(),e.userId.set(t),ie(e.global,e.clientContext),e.nextGen.refreshThirdPartyData(),e.identities.setIdentities([]),yield e.nextGen.resetQL({downloadState:!0,preserveEventsFromCurrentView:!0})}))}function ie(e,t){return e.context=t.getContext()}},5919:(e,t,n)=>{function r(e,t,n,r,i){i.debug("set SDK as ready"),e.setAsReady(),t.emit("permutive:api:ready"),n.track({name:"sdk_local_storage_byte_total",value:r.getStateSizeInBytes(),labels:{}}),n.track({name:"sdk_query_states_byte_total",value:e.getStateSizeInBytes(),labels:{}})}n.d(t,{R:()=>r})},7985:(e,t,n)=>{n.d(t,{$o:()=>s,je:()=>a});var r=n(365),i=n(3735),o=n(6640);const s=e=>{var t,n;const o="e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",s=void 0!==(null===(t=e[o])||void 0===t?void 0:t.q)&&void 0!==(null===(n=e[o])||void 0===n?void 0:n.config)?o:"permutive";return(0,i.zG)(e[s],(0,r.ij)("Can't find permutive tag on the page"),(0,r.UI)((e=>({tag:e,key:s}))))},a=(e,t)=>{let{tag:n,key:r}=e;return Object.assign(Object.assign({},n),{config:(0,o.ti)(Object.assign(Object.assign({},n.config),{windowKey:r}),t)})}},7078:(e,t,n)=>{n.d(t,{LA:()=>a});var r=n(1500),i=n(7209),o=n(2652);const s=(e,t,n)=>{let{api:r,state:i}=n;r.reportError(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,i.userId.get())};function a(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d;const u=c(e),l=o.startSpan("queued_methods"),g={api:i,state:t},f=e=>{if(e.functionName in n){n[e.functionName].apply(r,e.arguments)}else s(new Error("Does not exist."),e,g)},p=e=>!a.includes(e);u.forEach((e=>{try{p(e.functionName)&&f(e)}catch(t){const n=t instanceof Error?t:new Error("Unknown error.");s(n,e,g)}})),l.finish()}function c(e){const t=(0,r.uK)((e=>-1!==l.indexOf(e.functionName)))(e),n=t.right,s=t.left.filter((e=>"consent"!==e.functionName)),a=(0,i.Zt)(((e,t)=>u(e)&&u(t)?(0,o.lW)(g).compare(e.arguments[0],t.arguments[0]):(0,o.lW)(l).compare(e.functionName,t.functionName)));return(0,r.DY)(a)(n).concat(s)}const u=e=>"addon"===e.functionName,l=["identify","trigger","addon","track"],d=["identify"],g=["dfp","appnexus_adserver","web"]},4922:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>initialiseWebSDK,f:()=>initialisationSequence});var tslib__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(7582),_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(2688),fp_ts_Either__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(365),fp_ts_function__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(3735),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(6934),_framework_ref__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2851),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6967),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1540),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(7658),_sdkql_blockers__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(122),_sdkql_query_language_queryWorkerInit__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8318),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8975),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9853),_core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(2836),_sdkql_event_collection_events_cache_store_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6197),_sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(7748),_core_events_unprocessed_UnprocessedPageviewComplete__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(389),_core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(5865),_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5461),_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(9773),_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(342),_core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(8491),_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7594),_core_metrics_Metrics__WEBPACK_IMPORTED_MODULE_59__=__webpack_require__(4074),_sdkql_query_language_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1628),_core_session_SessionManager__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(8317),_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4026),_sdkql_state_sync_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3622),_core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(569),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(7575),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(7256),_sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1229),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(7274),_core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(9117),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(9880),_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(7554),_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(9332),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(2497),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(6037),_sdkql_event_collection_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(3116),_sdkql_event_collection_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(6341),_dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(9078),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(7423),_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(4586),_http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(310),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2652),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(4996),_utils_Trace__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(6574),_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(3030),_Config__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(6640),_Consent_Consent__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(4564),_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(7708),_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(6416),_initialisation_identity__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(5057),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(5919),_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(7985),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(7078),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(3298),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(3992),fp_ts_Task__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(7407);const prefix="[Initialisation Web]",sdkInitTimestamp=window.performance.now(),initialiseWebSDK=_ref=>{let{consentModule,logger,messages,metrics,namespace,network,partialTagWithKey,permutiveData,queryWorker,tag,sessionStorage,configFromQueryParams,urls}=_ref;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Y3)((()=>(0,tslib__WEBPACK_IMPORTED_MODULE_30__.mG)(void 0,void 0,void 0,(function*(){const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,viewId=new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_15__.W(config),trace=new _utils_Trace__WEBPACK_IMPORTED_MODULE_31__.l(config),sdkReadySpan=trace.startSpan("sdk_ready"),{consentTracking,consentValidation}=consentModule;(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)(consentTracking.consentRef,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>{e?sessionStorage.put(configFromQueryParams,_Config__WEBPACK_IMPORTED_MODULE_22__.iq).then(fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.Q1,(e=>{logger.warn(prefix,`Failed to cache "${_Config__WEBPACK_IMPORTED_MODULE_22__.iq}".`,(0,_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_33__.w)(e))})):sessionStorage.delete(_Config__WEBPACK_IMPORTED_MODULE_22__.iq)}))),window[windowKey].consent=consentValidation;const context=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_21__.PM)(tag.context||{},{path:window.location.pathname,url:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_34__.bk)(window.location.href),referrer:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_34__.bk)(document.referrer),view_id:viewId.get()}),createInternalsSpan=trace.startSpan("internals"),cookieStore=(0,_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_7__.S)(namespace,config,logger,consentTracking),localStorage=(0,_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_35__.E)(namespace,logger,consentTracking),externalData=(0,_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_36__.S)(namespace,logger,consentTracking),clientContext=new _core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_37__.z(context);(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)(viewId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["view_id",e]))));const userId=new _core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_14__.M(config,clientContext,cookieStore,externalData),eventSourceId=new _sdkql_state_sync_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_12__.$(permutiveData),enrichers=new _sdkql_event_collection_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_38__.J,api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_19__.F(urls,config,network,metrics,logger),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_39__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_40__.u(metrics,messages),sessionManager=yield _core_session_SessionManager__WEBPACK_IMPORTED_MODULE_10__.S.initialise(cookieStore,localStorage,logger),unprocessedArgs={consentTracking,logger,namespace},unprocessedEvents={PageviewComplete:new _core_events_unprocessed_UnprocessedPageviewComplete__WEBPACK_IMPORTED_MODULE_41__.p(unprocessedArgs),PrebidAuctions:new _core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_42__.J(unprocessedArgs)},customProperties=new _sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_43__.X,queryManagerTransitionDebounceTime=1e3,queryManagerTransitionMaxDebounceTime=1e4,queryManager=new _sdkql_query_language_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_9__.c({customProperties,externalData,logger,messages,api,permutive:permutiveGlobal,permutiveData,queryWorker,realtime:permutiveRealtime,sessionManager,transitionDebounceMaxTime:queryManagerTransitionMaxDebounceTime,transitionDebounceTime:queryManagerTransitionDebounceTime,userId,viewId,metrics}),permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_44__.a(config,localStorage,logger,permutiveData,eventSourceId,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_45__.i(messages),stateSync=new _sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_13__.N(api,network,sessionManager,permutiveData,queryManager,metrics,userId,eventSourceId,(0,_sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_13__.e)()),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_4__.v(logger,permutiveGlobal,clientContext),[addonsLoadedRef,setAddonsLoaded]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(!1),nextGen=yield(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,9131))),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_46__.SF,fp_ts_Task__WEBPACK_IMPORTED_MODULE_47__.UI((e=>{let{runNextGenFeaturesWeb:t}=e;return t({activationManager,addonsLoaded:addonsLoadedRef,api,config,consentTracking,enrichers,externalData,identities:identities.ref,logger,messages,metrics,namespace,network,permutiveData,queryManager,realtime:permutiveRealtime,sessionManager,stateSync,trace,track:function(){return permutiveGlobal.track(...arguments)},unprocessedPVC:unprocessedEvents.PageviewComplete,urls,userId,viewId})})))();(0,_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__.p)({api,context:nextGen.metricContext,enrichers,logger,messages,metrics});const state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_48__.u(permutiveData,permutiveReset,userId,viewId,nextGen.eventCollection),addons={},permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__.S)(logger,api,activationManager,sessionManager,metrics,viewId,userId,network,enrichers,clientContext,unprocessedEvents,queryManager,taskQueue,identities,permutiveReset,messages,addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,identitiesIngestor,permutiveGlobal,consentTracking,nextGen);createInternalsSpan.finish(),[].forEach((s=>{fp_ts_Either__WEBPACK_IMPORTED_MODULE_49__.Y3((()=>eval(s)),(e=>{api.reportError(Object.assign(Object.assign({},e),{message:`Error running custom script ${s}`}),userId.get())}))}));const blockers=(0,_sdkql_blockers__WEBPACK_IMPORTED_MODULE_50__.X)({logger,messages});blockers.addBlocker("permutive:queries:initialised"),messages.on("permutive:user:ready",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods);const e=identities.extractIdentifyFromQueue({global:permutiveGlobal});e.length>0&&permutiveGlobal.identify(e)})),messages.on("permutive:blockers:empty",(()=>{permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getContext(),permutiveGlobal.addons=addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_27__.LA)(permutiveGlobal.q,state,permutiveGlobal,permutiveMethods,api,trace),setAddonsLoaded(!0)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_18__.C)({extMessages:new _dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_51__.a(messages),nextGen,messages,viewId,state,sessionManager,api,clientContext,externalData,logger,metrics,network,permutive:permutiveGlobal,q:permutiveGlobal.q,userId}),loadAddonsSpan.finish();const loadEnrichersSpan=trace.startSpan("load_enrichers"),enricherEnv={api,config,clientContext,logger,permutiveData,metrics,sessionManager,enrichers,network},loadEnrichersPromise=(0,_sdkql_event_collection_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_52__.H)(enricherEnv)();loadEnrichersPromise.then((()=>{loadEnrichersSpan.finish()})),yield(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_25__.TZ)({api,clientContext,eventCollection:nextGen.eventCollection,externalData,global:permutiveGlobal,identities,identitiesIngestor,logger,messages,metrics,network,nextGen,permutiveMethods,queryManager,reset:permutiveReset,stateSync,trace,unprocessedEvents,userId,sessionManager,sessionCount:nextGen.metricContext.current.session_count}),yield loadEnrichersPromise,(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_53__.R)(queryManager,messages,metrics,state,logger),sdkReadySpan.finish()}))),(e=>`Exception during initialisation. Got ${e}`))},initialisationSequence=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)(fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Do,(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("support",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_54__.O)(globalThis)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("queryWorker",(()=>_sdkql_query_language_queryWorkerInit__WEBPACK_IMPORTED_MODULE_3__.F)),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("partialTagWithKey",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__.$o)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("configFromQueryParams",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_Config__WEBPACK_IMPORTED_MODULE_22__.B9)()))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("tag",(e=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__.je)(e.partialTagWithKey,e.configFromQueryParams)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("logger",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_55__.SX)(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("urls",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_56__.s(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("network",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__.E))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("namespace",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_57__.L(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("messages",(e=>{let{logger:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_58__.Q(t))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consentModule",(e=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)((()=>(0,_Consent_Consent__WEBPACK_IMPORTED_MODULE_23__.NY)(Object.assign(Object.assign({},e),{consentRequired:e.tag.config.consentRequired}))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Vn)((e=>e.message))))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("sessionStorage",(e=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_16__.u)(e.namespace,e.logger,e.consentModule.consentTracking)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("permutiveData",(e=>{let{tag:t,namespace:n,logger:r,consentModule:i}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_11__.S)(t.config,n,r,i.consentTracking))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("metrics",(e=>{let{tag:t,messages:n,logger:r,permutiveData:i}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_metrics_Metrics__WEBPACK_IMPORTED_MODULE_59__.g)(sdkInitTimestamp,t.config,i,n,r))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consent",(e=>(0,_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_24__.D)(e))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.tS)((e=>initialiseWebSDK(e))))},333:(e,t,n)=>{n.r(t);var r=n(365),i=n(3735),o=n(6341),s=n(7927),a=n(2197),c=n(6567),u=n(4673);n(2652);class l{constructor(e,t){this.config=e,this.logger=t,this.defaultReplacementMap=this.filterReplacementMap(this.config.defaultMap),this.replacementMap=this.setReplacementMap(this.config.replacementMap)}get getReplacementMap(){return this.replacementMap}setReplacementMap(e){return this.replacementMap=Object.assign(Object.assign({},this.defaultReplacementMap),this.filterReplacementMap(e)),this.logger.debug(`enrichers[${this.config.name}]: replacement map updated`,this.getReplacementMap),this.getReplacementMap}}class d extends l{filterReplacementMap(e){return e}}const g="geoip",f="enricher:geoip",p={},m={include_geo:(null==p?void 0:p.include_geo)||!0,include_isp:(null==p?void 0:p.include_isp)||!0,include_ip_hash:(null==p?void 0:p.include_ip_hash)||!0,include_ip:(null==p?void 0:p.include_ip)||!1},h=(e,t)=>{var n;const{$ip_geo_info_continent:r,$ip_address:o,$ip_address_hash:c}=u.U,l={$ip_geo_info_continent:r,$ip_address:o,$ip_geo_info:{city:u.U.$ip_geo_info_city,continent:u.U.$ip_geo_info_continent,country:u.U.$ip_geo_info_country,postal_code:u.U.$ip_geo_info_postal_code,province:u.U.$ip_geo_info_province},$ip_address_hash:c,$ip_isp_info:{autonomous_system_number:0,isp:u.U.$ip_isp_info_isp,autonomous_system_organization:u.U.$ip_isp_info_autonomous_system_organization,organization:u.U.$ip_isp_info_organization}},f=(0,i.zG)({$ip_geo_info:null==e?void 0:e.geo_info,$ip_geo_info_continent:null===(n=null==e?void 0:e.geo_info)||void 0===n?void 0:n.continent,$ip_isp_info:null==e?void 0:e.isp_info,$ip_address:null==e?void 0:e.ip,$ip_address_hash:null==e?void 0:e.ip_hash},s.hX(a.ff((e=>void 0===e))));return new d({name:g,defaultMap:l,replacementMap:f},t)},_=e=>{let{clientContext:t,api:n,permutiveData:r,metrics:i,sessionManager:o,enrichers:s,network:a,logger:c,config:u}=e;const l=e=>{e.isp_info&&t.updateContext(["isp",e.isp_info.isp],["organization",e.isp_info.organization],["autonomous_system_number",e.isp_info.autonomous_system_number],["autonomous_system_organization",e.isp_info.autonomous_system_organization]),e.geo_info&&t.updateContext(["continent",e.geo_info.continent],["country",e.geo_info.country],["city",e.geo_info.city],["province",e.geo_info.province],["postal_code",e.geo_info.postal_code])},d=r.getData(f);return d&&d.session_id===o.getSessionId()?(l(d.data),s.register(h(d.data,c)),Promise.resolve()):(c.debug("enrichers[geoip]: start HTTP request"),v(n,i,u,m).then((e=>(c.debug("enrichers[geoip]: end HTTP request"),l(e),r.setData(f,{session_id:o.getSessionId(),data:e}),e))).catch((e=>(n.reportError(`Error while registering the geoip enricher: got ${e}`),null))).then((e=>{s.register(h(e,c))})))},v=(e,t,n,r)=>{const i=[];return r.include_geo&&i.push(["include","geo"]),r.include_isp&&i.push(["include","isp"]),r.include_ip&&i.push(["include","ip"]),r.include_ip_hash&&i.push(["include","ip_hash"]),e.reqWithMetrics(t,"sdk_http_geoip_seconds",{url:e.urls.getEndpointUrl("/geoip",(0,c.G)(n.apiVersion),i),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})},y=()=>(0,o.B)({load:_});const b=()=>{};var w,E=n(4922);w=E.f,y(),b(),w().then((0,r.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),i.Q1))},2652:(e,t,n)=>{n.d(t,{Bf:()=>y,G6:()=>C,Gz:()=>w,HP:()=>O,Or:()=>L,PM:()=>d,PQ:()=>A,SL:()=>f,Z_:()=>M,a4:()=>m,aT:()=>v,b0:()=>E,b2:()=>p,bw:()=>q,cO:()=>I,eu:()=>h,fl:()=>S,k$:()=>b,lW:()=>D,lo:()=>G,m8:()=>k,qh:()=>l,rH:()=>R,rO:()=>T,vg:()=>x,vp:()=>g});var r=n(1500),i=n(3735),o=n(6567),s=n(7209),a=n(6017),c=n(2751),u=n(3992);const l=e=>Object.entries(e);function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}function g(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function f(e){return t=>{let n=0;for(let r of t){n=n+e(r)|0}return n}}a.ff(c.xb);function p(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),reject:t,resolve:e}}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},{waitTimeInMs:s,exponentialBackOff:a,maxAttempts:c}=d(r,n);let l=0;const g=n=>new Promise((r=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>r((0,o.G)(e)))):(0,i.zG)(l++,(e=>e<c?(0,u.HJ)((()=>r(g(n*(a?2:1)))),n):r(o.YP)))))));return g(s)}function h(e,t){const n=Object.create(null);for(const r of t)n[r]=e[r];return n}let _=[];function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(_.unshift(e),_.length>1)return;const n=["beforeunload","pagehide"],r=n.concat(["visibilitychange"]),i=e=>{if(!o&&e){o=!0;const e=_;_=[],e.forEach((e=>{try{e()}catch(e){}}))}};let o=!1;r.forEach((e=>{window.addEventListener(e,(()=>{const n=("visibilitychange"!==e||document.hidden)&&P(t);i(n)}))})),n.forEach((e=>{window.addEventListener(e,(()=>i(!0)))}))}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({capture:!0},t);const n=["visibilitychange","pagehide"];n.forEach((n=>window.addEventListener(n,(()=>o.Y3((()=>{"pagehide"!==n&&"hidden"!==document.visibilityState||e()}))),{capture:t.capture})))}function b(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(globalThis.crypto||globalThis.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function w(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function E(e,t){const n=Object.keys(e),r=n.length,i={};for(let s=0;s<r;s++){const r=n[s],a=t(r,e[r]);(0,o.pC)(a)&&(i[r]=a.value)}return i}function k(){const e={},t=arguments.length;for(let n=0;n<t;n++){const[t,r]=n<0||arguments.length<=n?void 0:arguments[n];e[t]=r}return e}function S(e,t){return E(e,((e,n)=>t(e)?(0,o.G)(n):o.YP))}function P(e){return/Mobi|Android/i.test(e)}function C(e){return/^((?!chrome|android).)*safari/i.test(e)}function A(e,t){return new Promise((n=>{var r;(0,u.HJ)((()=>{Promise.resolve(e()).then(n)}),null!==(r=null==t?void 0:t.timeout)&&void 0!==r?r:0)}))}function I(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}const L=()=>({equals:(e,t)=>Object.is(e,t)});function D(e){return(0,s.Zt)(((t,n)=>{const r=e.indexOf(t),i=e.indexOf(n);switch(!0){case-1===r&&-1===i:return 0;case-1!==r&&-1===i:return-1;case-1===r&&-1!==i:return 1;default:return r<=i?-1:1}}))}function M(e,t,n){return function(){try{return n(...arguments)}catch(n){e.reportError(n,t.get())}}}function x(e){return t=>null!=t&&e in t?t[e]:void 0}function O(e){let t=o.YP;const n=(0,o.fS)((()=>{const n=e();return t=(0,o.G)(n),n}));return()=>n(t)}const T=e=>t=>{var n;const r=Object.assign({},t);for(const i in e)r[i]=null===(n=e[i])||void 0===n?void 0:n.call(e,t[i]);return r};function q(e){return t=>(e(t),t)}const G=e=>t=>{const n=e.slice(0,-1),s=e.slice(-1)[0];return(0,i.zG)(n,r.f2((e=>{let[n,r]=e;return(0,i.zG)(t,o.DT(n),o.UI(r))})),o.fS((()=>s(t))))},U=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const n=e(t);return Number.isNaN(n)?void 0:n}},R=U(parseInt);U(parseFloat)},6574:(e,t,n)=>{n.d(t,{l:()=>r});class r{constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=!1,this.placeholderSpan={spanId:null,finish:()=>({})},this.shouldUsePerformanceMark=(null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled}startSpan(e){var t;if(this.shouldUsePerformanceMark){const n=this.generateId(),r=`permutive_${e}`,i=`${r}${n}_start`;return null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t||t.mark(i),{spanId:i,finish:()=>{var e,t;null===(t=null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.measure)||void 0===t||t.call(e,r,i)}}}return this.placeholderSpan}generateId(){return"_"+Math.random().toString(36).substr(2,9)}}},4730:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(2652),i=n(3992);class o{constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,n)}scheduleAccumulated(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,n,r,t)}scheduleForPageUnload(e){return(0,r.aT)(e)}debounce(e,t,n,o){let s,a,c,u=[];return l=>{o&&(c=o.concat(null!=c?c:o.empty,l));const d=(0,r.b2)();u.push(d);return null==s||s(),s=(0,i.HJ)((()=>{null==a||a(),a=void 0;const t=e(c||l);u.forEach((e=>e.resolve(t))),c=null==o?void 0:o.empty,u=[]}),t),a||(a=(0,i.HJ)((()=>{null==s||s(),a=void 0;const t=e(c||l);u.forEach((e=>e.resolve(t))),c=null==o?void 0:o.empty,u=[]}),n)),d.promise}}}},4996:(e,t,n)=>{n.d(t,{i:()=>i});var r=n(3992);class i{constructor(e){this.messages=e,this.queue=[],this.nextNotify=null,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,(0,r.HJ)(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,n=0;for(let r=0;r<this.queue.length;r++){const i=this.queue[r];if(i.complete)n+=1;else if(i.started)t=!0,e=e||i.blocks();else{if(i.waits()&&t)break;e||(t=!0,e=e||i.blocks(),i.execute((()=>{this.notify()})))}}this.queue.splice(0,n)}size(){return this.queue.length}}},3030:(e,t,n)=>{n.d(t,{_Y:()=>s,bk:()=>o,zM:()=>i});var r=n(3735);const i=()=>{var e,t;const n=null===(t=null===(e=window.location.href.split("?")[1])||void 0===e?void 0:e.split("#")[0])||void 0===t?void 0:t.split("&");return void 0===n?{}:n.reduce(((e,t)=>{const[n,r]=t.split("=");return Object.assign(Object.assign({},e),{[n]:r})}),{})},o=e=>{if(!e)return"";return(0,r.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function s(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),n=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),r=e.match(/localhost/);if(n&&n.length>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return t&&(null==t?void 0:t.length)>0?t[0]:r&&(null==r?void 0:r.length)>0?"localhost":""}},6320:(e,t,n)=>{n.r(t),n.d(t,{ClassificationModelsAddon:()=>i,addonName:()=>r,load:()=>o});const r="classification_models";class i{constructor(e){}}const o=e=>{({overlays:{auto_init:!0,activationConfigs:[]},web:{auto_init:!1,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},scriptrunner:{auto_init:!0,activationConfigs:[]},clean_room:{auto_init:!0,publisher_permissions:{"89a805cd-dd0e-4976-93bc-d1ec7bfa4363":["allow_custom_insights","allow_targeting_known_audiences","allow_targeting_modelled_audiences","allow_insights"]},activationConfigs:[]},classification_models:{auto_init:!0,activationConfigs:[]},dfp:{auto_init:!0,networks:[{network_code:"5887",name:"Default"}],track_slot_rendered:!0,track_slot_viewable:!0,track_slot_clicked:!0,track_targeting_keys:!1,activationConfigs:[]},tracking_pixel:{auto_init:!0,activationConfigs:[]},dbm:{auto_init:!0,entity_id:926898717,product_type:"INVITE_PARTNER",activationConfigs:[]}})[r].auto_init&&e.q.push({functionName:"addon",arguments:[r,{}]})}},7826:(e,t,n)=>{n.d(t,{$7:()=>h,Cg:()=>f,Qd:()=>m,cs:()=>p,dN:()=>d,zi:()=>g});var r=n(365),i=n(3735),o=n(6567),s=n(3328),a=n(2116),c=n(2851),u=n(2652);const l="[PrebidJS]";function d(e){const t=(()=>{const e=["pbjs",...window._pbjsGlobals||[]];return[...new Set(e)]})();e.logger.debug(l,"Found keys",t);return a.K4((()=>(0,i.zG)(t,s.UI((0,i.ls)((e=>(e=>{const t={maxAttempts:100,waitTimeInMs:50};let n;return{windowPropertyKey:e,pbjs:(0,u.a4)((()=>n),(()=>{const t=(0,i.zG)(window,(0,u.vg)(e));return!(!(null==t?void 0:t.que)||"function"!=typeof(null==t?void 0:t.getEvents)||(n=t,0))}),t)}})(e)),(t=>(0,i.zG)(c.p4(t.pbjs),c.UI((n=>{const s=r.pF((n=>(n.message=`Failed to resolve key "${t.windowPropertyKey}". ${n.message}`,e.reportError(`${l} ${n.toString()}`),o.YP)));return(0,i.zG)(n,(0,u.bw)(o.UI((n=>e.logger.debug(l,`Completed check for key "${t.windowPropertyKey}"`,{result:n})))),o.UI(s),o.UI(o.UI((e=>({windowPropertyKey:t.windowPropertyKey,pbjs:e})))))})))))),(e=>c.vP(...e)),c.UI((e=>({completedChecks:e.every(o.pC),pbjsKeyPairs:e.map(o.xH)}))),c.UI((e=>{let{pbjsKeyPairs:t,completedChecks:n}=e;const r=t.filter(o.pC),[a,...c]=r;return{completedChecks:n,mainPair:null!=a?a:o.YP,otherPairs:(0,i.zG)(c,s.DZ(i.yR))}})))))}const g=e=>"function"==typeof e.readConfig?e.readConfig():e.getConfig();function f(e){var t;const n=null===(t=e.meta)||void 0===t?void 0:t.advertiserDomains;if("string"==typeof n)return[n];if(Array.isArray(n)){const e=n.filter((e=>"string"==typeof e));return e.length>0?e:void 0}}const p=e=>{var t;const n=e.appnexus&&"object"==typeof e.appnexus&&"buyerMemberId"in e.appnexus&&e.appnexus.buyerMemberId,r=e.rubicon&&"object"==typeof e.rubicon&&"networkId"in e.rubicon&&e.rubicon.networkId,i=n||r||(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.networkId);return i?`${i}`:void 0},m=e=>{var t;const n=e=>isNaN(e)?void 0:e;try{return"number"==typeof e.cpm?n(e.cpm):(0,i.zG)(null!==(t=e.cpm)&&void 0!==t?t:"",parseFloat,n)}catch(e){return}},h=e=>e.dealId?`${e.dealId}`:void 0},122:(e,t,n)=>{n.d(t,{X:()=>r});const r=e=>{let t=!0;const n=[];return{addBlocker:r=>{n.push(r),e.logger.log("<blockers> added blocker "+r),e.messages.on(r,(()=>{if(t){const i=n.indexOf(r);i>=0&&(n.splice(i,1),e.logger.log("<blockers> removed blocker "+r)),0===n.length&&(t=!1,e.messages.emit("permutive:blockers:empty"),e.logger.log("<blockers> complete"))}}))}}}},7748:(e,t,n)=>{n.d(t,{X:()=>r});class r{constructor(){this.properties={}}overrideCustomProps(e){this.properties=e}getCustomProps(){return this.properties}}},3116:(e,t,n)=>{n.d(t,{J:()=>i});const r=e=>"string"==typeof e&&"$"===e[0];class i{constructor(){this.replacementMap={}}register(e){this.replacementMap=Object.assign(Object.assign({},this.replacementMap),e.getReplacementMap)}enrich(e,t){return this.enrichRecursive(e,t)}enrichRecursive(e,t){const n={output:{},isFullyEnriched:!0},i=Object.keys(e);for(let o=0;o<i.length;o++){const s=i[o],a=e[s];switch(!0){case r(a):const[e,i]=this.isPropertyReplaceable(a);n.output[s]=e?i:a,this.replacementMap.hasOwnProperty(a)&&i===a&&t&&delete n.output[s],n.isFullyEnriched=!!e&&n.isFullyEnriched;break;case null!==a&&"object"==typeof a&&a.constructor===Object:const o=this.enrichRecursive(a,t);n.output[s]=o.output,n.isFullyEnriched=n.isFullyEnriched&&o.isFullyEnriched;break;default:n.output[s]=a}}return n}isPropertyReplaceable(e){const t=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&t!==e,t]}}},6341:(e,t,n)=>{n.d(t,{B:()=>a,H:()=>c});var r=n(3735),i=n(7407),o=n(6934);const s=[],a=e=>{s.push(e)},c=e=>{const t=s.map((t=>(0,o.Y3)((()=>t.load(e)),(t=>{e.api.reportError(t)}))));return(0,r.zG)((0,i.RD)(t),(0,i.UI)(r.Q1))}},2546:(e,t,n)=>{n.r(t),n.d(t,{make:()=>T});var r=n(3735),i=n(7582);let o,s;const a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap;let g={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(h(this),t),m(a.get(this))}:function(...t){return m(e.apply(h(this),t))}:function(t,...n){const r=e.call(h(this),t,...n);return u.set(r,t.sort?t.sort():[t]),m(r)}}function p(e){return"function"==typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(c.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));c.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,g):e);var t}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(m(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&a.set(t,e)})).catch((()=>{})),d.set(t,e),t}(e);if(l.has(e))return l.get(e);const t=p(e);return t!==e&&(l.set(e,t),d.set(t,e)),t}const h=e=>d.get(e);const _=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],y=new Map;function b(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(y.get(t))return y.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=v.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let s=o.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),i&&o.done]))[0]};return y.set(t,o),o}g=(e=>({...e,get:(t,n,r)=>b(t,n)||e.get(t,n,r),has:(t,n)=>!!b(t,n)||e.has(t,n)}))(g);var w=n(2688),E=n(365),k=n(7407),S=n(6934),P=n(2652);function C(e){return"development"===e.environment?window.isSecureContext:"https:"===window.location.protocol}var A=n(3992);const I="[IDB]",L=(e,t,n,o,s,a)=>(0,r.zG)((0,k.of)(e.getNamespacedStorageKey(s)),(0,k.tS)((e=>(0,S.Y3)((()=>(0,i.mG)(void 0,void 0,void 0,(function*(){return n.put(o,a,e)}))),w.w))),(0,k.UI)((0,E.g_)((e=>{throw t.error(I,`Failed to store crypto key to ${o} due to unexpected error,\n`,e),e}),(()=>a))),(e=>e()));class D{constructor(e,t,n,r,i,o,s,a){this.namespace=e,this.logger=t,this.cryptoAlg=n,this.idb=r,this.mainObjectStore=i,this.keyObjectStore=o,this.keyObjectKey=s,this.cryptoKey=a,this.MAX_CONSECUTIVE_PUTS=30,this.puts=1,this.hasForcedCompaction=!1,this.logDebug("Created",this.idb)}static initialise(e,t,n,o,s,a,c,u,l,d){const g=(0,P.G6)(navigator.userAgent)&&!1,f=[C(e),s.isAvailable(),!g].every((e=>!0===e)),p=(e,n,a)=>(0,i.mG)(this,void 0,void 0,(function*(){return(0,r.zG)(yield e.get(a,t.getNamespacedStorageKey(n)),(e=>(0,i.mG)(this,void 0,void 0,(function*(){return null!=e?e:s.generateKey(!1)}))),(n=>(0,i.mG)(this,void 0,void 0,(function*(){return L(t,o,e,u,l,yield n)})))).catch((e=>{const t=(0,w.w)(e);throw o.error(I,"Get crypto key failed. Got\n",t),t}))})),m=(e,t,n)=>t.includes(n)?(0,r.Q1)():e.createObjectStore(n),h=f?(0,E.Y3)((()=>function(e){if(!(0,P.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t=()=>{},n=0;return new Promise((e=>{const r=()=>(n++,indexedDB.databases().finally((0,A.GL)(e)));t=(0,A.UM)(r,100),r()})).finally((()=>{t(),e.track({name:"sdk_idb_conn_attempt_safari_count",value:n,labels:{}})}))}(n).then((()=>M(a,d,{upgrade:e=>{const t=[...e.objectStoreNames];m(e,t,c),m(e,t,u)}})))),String):(0,E.t$)("Connection not attempted. Default to localStorage");return(0,E.g_)((e=>(0,S.t$)(e)),(e=>(0,r.zG)((0,S.Y3)((()=>e.then((e=>(0,i.mG)(this,void 0,void 0,(function*(){return{db:e,cryptoKey:yield p(e,l,u)}}))))),String),(0,S.UI)((e=>{let{db:n,cryptoKey:r}=e;return new D(t,o,s,n,c,u,l,r)})))))(h)}put(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){return(0,r.zG)((()=>(0,i.mG)(this,void 0,void 0,(function*(){return(0,r.bc)(JSON.stringify(e),this.cryptoKey)}))),(0,k.tS)((e=>{let[t,n]=e;return(0,k.of)(this.cryptoAlg.encrypt(n,t))})),(0,k.tS)((e=>()=>(0,i.mG)(this,void 0,void 0,(function*(){return yield this.resetIfRequired(this.puts++),e})))),(0,k.tS)((e=>(0,S.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t)))),w.w))),(0,k.UI)((0,E.g_)((n=>{throw this.logError(`Failed to put "${t.toString()}" value`,e,". Got \n",n),"QuotaExceededError"===n.name&&this.forceCompaction(),n}),(()=>t))),(e=>e()))}))}get(e){return(0,r.zG)(this.namespace.getNamespacedStorageKey(String(e)),(t=>this.idb.get(this.mainObjectStore,t).then((e=>(0,i.mG)(this,void 0,void 0,(function*(){return e?JSON.parse(yield this.cryptoAlg.decrypt(this.cryptoKey,e)):null})))).catch((t=>{const n=(0,w.w)(t);throw this.logError(`Get ${e.toString()} failed. Got`,n),n}))))}delete(e){return(0,r.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logDebug("Deleting",this.idb),this.idb.close(),x(this.idb.name)}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logDebug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return M(e).then((t=>(t.close(),x(e))))}resetIfRequired(e){return(0,P.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.reset():Promise.resolve()}reset(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=this.idb.name,t=this.idb.version;yield this.deleteStore(),this.idb=yield M(e,t),this.idb.createObjectStore(this.mainObjectStore),this.idb.createObjectStore(this.keyObjectStore),yield L(this.namespace,this.logger,this.idb,this.keyObjectStore,this.keyObjectKey,this.cryptoKey),this.logDebug("Reset to",this.idb)}))}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(I,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(I,...t)}}const M=(0,r.ls)((function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=m(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(m(s.result),e.oldVersion,e.newVersion,m(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}),A.t_,(e=>e.then((e=>({close:e.close.bind(e),createObjectStore:(0,r.ls)(e.createObjectStore.bind(e),r.Q1),delete:(0,r.ls)(e.delete.bind(e),A.t_),get:(0,r.ls)(e.get.bind(e),A.t_),get name(){return e.name},put:(0,r.ls)(e.put.bind(e),A.t_),get version(){return e.version}}))))),x=(0,r.ls)((function(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),m(n).then((()=>{}))}),A.t_);var O=n(8259);const T=(e,t,n,i,o,s,a,c,u,l,d)=>(0,r.zG)(D,(0,O._z)({logger:l,consentTracking:d,prefix:I})).initialise(e,t,n,l,i,o,s,a,c,u)},6197:(e,t,n)=>{n(2652)},8036:(e,t,n)=>{n.d(t,{AG:()=>a,UC:()=>o,Yh:()=>s});var r=n(6567),i=n(2652);const o=(e,t,n)=>e in t||(()=>{const t="number"==typeof e?e:parseInt(e);return!1===isNaN(t)&&n.has(t)})(),s=e=>(0,i.b0)(e,((e,t)=>t.state?(0,r.G)({[t.checksum]:t.state}):r.YP));function a(e){var t;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}},1628:(e,t,n)=>{n.d(t,{c:()=>We,e:()=>je});var r=n(7183),i=n(2688),o=n(3735),s=n(6934);const a=()=>({kind:"null",value:null}),c=e=>({kind:"string",value:e}),u=e=>({kind:"number",value:e}),l=e=>({kind:"array",value:e}),d=e=>({kind:"object",value:e}),g=e=>e,f=()=>({kind:"bottom"}),p=e=>({kind:"inner",a:e}),m=e=>({kind:"top",error:e}),h=e=>({kind:"unbounded",group:e}),_=(e,t)=>({kind:"windowed",key:t,group:e}),v=(e,t,n)=>({kind:"countLimit",n,limit:t,group:e}),y=(e,t,n)=>({kind:"uniqueLimit",n,limit:t,group:e}),b=e=>({kind:"numberGroup",group:e}),w=e=>({kind:"stringGroup",group:e}),E=e=>({kind:"tuple",tuple:e}),k=e=>({state:e}),S=(e,t)=>({commands:e,payload:t});var P=n(7209),C=n(2751);const A=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return p(t(e.a));case"top":return m(e.error)}},I=e=>(0,P.Zt)(((t,n)=>{if("bottom"===t.kind&&"bottom"===n.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===n.kind)return 1;if("top"===t.kind&&"top"===n.kind)return C.Df.compare(t.error,n.error);if("top"===t.kind)return 1;if("top"===n.kind)return-1;if("inner"===t.kind&&"inner"===n.kind)return e.compare(t.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var L=n(6567),D=n(1885),M=n(1500),x=n(365),O=function(e){return-1===e?1:1===e?-1:0};function T(e,t){return(0,M.oA)(e.map(t))}function q(e,t,n,r){const i=(e,t)=>{if(0===e.length)return(0,M.oA)(t.map((e=>(0,L.G)({1:e[1],2:n(L.YP,(0,L.G)(e[2]))}))));if(0===t.length)return(0,M.oA)(e.map((e=>(0,L.G)({1:e[1],2:n((0,L.G)(e[2]),L.YP)}))));if(e.length>0&&t.length>0&&(0,P.lt)(r)(e[0][1],t[0][1])){const[r,...o]=e,s=r[1],a=r[2];return(0,M.Ce)({1:s,2:n((0,L.G)(a),L.YP)})(i(o,t))}if(e.length>0&&t.length>0&&(0,P.gt)(r)(e[0][1],t[0][1])){const[r,...o]=t,s=r[1],a=r[2];return(0,M.Ce)({1:s,2:n(L.YP,(0,L.G)(a))})(i(e,o))}if(e.length>0&&t.length>0){const[r,...o]=e,[s,...a]=t,c=r[1],u=r[2],l=s[2];return(0,M.Ce)({1:c,2:n((0,L.G)(u),(0,L.G)(l))})(i(o,a))}throw new Error("Non exhaustive match in mapOption2")},o=(0,P.Uz)((e=>e[1]))(r),s=(e=>{const t=T(e,(e=>(0,L.pC)(e[2])?(0,L.G)({1:e[1],2:e[2].value}):L.YP));return 0===t.length?L.YP:(0,L.G)(t)})(i((0,M.DY)(o)([...e].map((e=>({1:e[0],2:e[1]})))),(0,M.DY)(o)([...t].map((e=>({1:e[0],2:e[1]}))))));return(0,L.UI)((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function G(e,t,n,r){const i=(0,P.Uz)((e=>e[0]))(r),o=(0,M.DY)(i)([...t]).reduceRight(((e,t)=>{if((0,x.nM)(e)){const r=n(t[1],e.left);return(0,L.pC)(r)?(0,x.t$)(r.value):(0,x.F2)(t[0])}return e}),(0,x.t$)(e));return(0,L.Uo)(o)}function U(e,t){return new Map([...e].map(t))}function R(e,t){return new Map([...e].filter(t))}var B=n(4268),z=n(4011);function j(e){return JSON.stringify(F(e))}function F(e){switch(e.kind){case"null":return K.encode(e);case"string":return $.encode(e);case"number":return H.encode(e);case"array":return Y.encode(e);case"object":return V.encode(e)}}function W(e){return null===e?K.decode(e):"number"==typeof e?H.decode(e):"string"==typeof e?$.decode(e):Array.isArray(e)?Y.decode(e):V.decode(e)}const N=(e,t)=>(0,x.t$)(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),K={encode:e=>null,decode:e=>null===e?(0,x.F2)({kind:"null",value:null}):N(e,"SimpleNull")},$={encode:e=>e.value,decode:e=>"string"==typeof e?(0,x.F2)(c(e)):N(e,"SimpleString")},H={encode:e=>e.value,decode:e=>"number"==typeof e?(0,x.F2)(u(e)):N(e,"SimpleNumber")},Y={encode:e=>e.value.map(F),decode:e=>{if(Array.isArray(e)){const t=(0,M.fw)(x.g1)(W)(e);return(0,x.UI)(l)(t)}return N(e,"SimpleArray")}},V={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:F(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=(0,M.fw)(x.g1)((([e,t])=>(0,o.zG)(W(t),(0,x.UI)((t=>(0,o.bc)(e,t))))))(Object.entries(e));return(0,x.UI)((e=>d(new Map([...e]))))(t)}return N(e,"SimpleObject")}};function Q(e){return(0,o.zG)(e,Z,(0,L.UI)(j),(0,L.fS)((()=>"<encode error>")))}function J(e){return(0,L.UI)(ie)(function(e){switch(e.state.kind){case"top":return(0,L.G)(c(e.state.error));case"bottom":return L.YP;case"inner":return Z(e.state.a)}}(e))}function Z(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return X(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?(0,L.G)(l(function(e,t){const n=(0,L.UI)((e=>(0,M.Ce)(e)(t)))(e);return(0,L.fS)((()=>t))(n)}((0,L.UI)((e=>c(function(e){const t=e=>(0,L.EQ)((()=>""),(e=>"b"+JSON.stringify(e)))(e.bound),n=e=>{switch(e.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},r=e=>{const r=t(e[1])+n(e[1]);return 1===e[2]?r:r+JSON.stringify(e[2])};return e.map(r).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return c(e.error);case"inner":return u(e.a)}},n=e=>T([ee,te,e=>(0,o.zG)(e,re,d,L.G)],(t=>t(e))),r=e=>T([ee,ne,e=>(0,o.zG)(e,re,(e=>U(e,(([e,t])=>[JSON.stringify(e),t]))),d,L.G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return n(e.group);case"numberGroup":return r(e.group)}}(e.payload)))):L.YP}function X(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||(0,L.pC)(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||(0,L.pC)(e.limit)}}function ee(e){switch(e.kind){case"unbounded":return L.YP;case"windowed":return(0,L.G)(c("w"));case"countLimit":return(0,L.G)(c(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return(0,L.G)(c(1===e.n?"u":`u${e.n}`))}}function te(e){switch(e.kind){case"unbounded":return L.YP;case"windowed":return(0,L.G)(c((0,L.pC)(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return(0,L.G)(c((0,L.pC)(e.limit)?e.limit.value:""))}}function ne(e){switch(e.kind){case"unbounded":return L.YP;case"windowed":return(0,L.pC)(e.key)?(0,L.G)(u(e.key.value)):(0,L.G)({kind:"null",value:null});case"countLimit":case"uniqueLimit":return(0,L.pC)(e.limit)?(0,L.G)(u(e.limit.value)):(0,L.G)({kind:"null",value:null})}}function re(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function ie(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?ie(e.value[0]):l(e.value.map(ie));case"object":return(0,o.zG)(R(e.value,(([e,t])=>"null"!==t.kind)),(e=>U(e,(e=>[e[0],ie(e[1])]))),d);default:return e}}function oe(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return L.YP;const[t,n,r,i]=e;if("string"===t.kind&&"string"===n.kind&&"object"===i.kind){const e=(0,L.DT)((e=>se(e[1].value)&&ae(e[2].value)))({1:t,2:n});return(0,L.UI)((e=>({prim:e[1].value,grp:e[2].value,cutoff:r,m:i.value})))(e)}return L.YP})(e);if((0,L.pC)(t)){const{prim:e,grp:n,cutoff:r,m:i}=t.value,o=ce(r,i,ue(n));return"string"==typeof o?m(o):p(S(le(e),o))}const n=(e=>{if(3!==e.length)return L.YP;const[t,n,r]=e;if("string"===t.kind&&"object"===r.kind){const e=(0,L.DT)((e=>ae(e.value)))(t);return(0,L.UI)((e=>({grp:e.value,cutoff:n,m:r.value})))(e)}return L.YP})(e);if((0,L.pC)(n)){const{grp:e,cutoff:t,m:r}=n.value,i=ce(t,r,ue(e));return"string"==typeof i?m(i):p(S(L.YP,i))}const r=(e=>{if(2!==e.length)return L.YP;const[t,n]=e;if("string"===t.kind&&"object"===n.kind){const e=(0,L.DT)((e=>se(e.value)))(t);return(0,L.UI)((e=>({prim:e.value,m:n.value})))(e)}return L.YP})(e);if((0,L.pC)(r)){const{prim:e,m:t}=r.value;return p(S(le(e),w(h(t))))}const i=(e=>{if(1!==e.length)return L.YP;const[t]=e;return"object"===t.kind?(0,L.G)({m:t.value}):L.YP})(e);if((0,L.pC)(i)){const{m:e}=i.value;return p(S(L.YP,w(h(e))))}const o=(e=>{if(e.length<1)return L.YP;const[t,...n]=e;if("string"===t.kind){const e=(0,L.DT)((e=>se(e.value)))(t);return(0,L.UI)((e=>({prim:e.value,rest:n})))(e)}return L.YP})(e);if((0,L.pC)(o)){const{prim:e,rest:t}=o.value;return p(S(le(e),ge(t)))}return p(S(L.YP,ge(e)))},n=e=>"array"===e.kind?(0,M.tS)(n)(e.value):[e];return"null"===e.kind?k({kind:"bottom"}):k(t(n(e)))}function se(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...n]=t;return-1!=="bpmvn".indexOf(e)&&n.every((e=>-1!=="bpmvn0123456789.".indexOf(e)))}}function ae(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...n]=t;return-1!=="ux".indexOf(e)&&-1===n.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function ce(e,t,n){switch(e.kind){case"string":return w(n({1:(0,L.G)(e.value),2:t}));case"number":case"null":return b(n({1:"null"===e.kind?L.YP:(0,L.G)(e.value),2:R(U(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function ue(e){const t=e=>t=>y(t[2],t[1],e),n=e=>t=>v(t[2],t[1],e),r=e.split("");switch(!0){case"w"===r[0]&&void 0===r[1]:return e=>_(e[2],e[1]);case"u"===r[0]&&void 0===r[1]:return t(1);case"u"===r[0]&&void 0!==r[1]:return t(parseInt(r.slice(1).join("")));case"x"===r[0]&&void 0===r[1]:return n(1);case"x"===r[0]&&void 0!==r[1]:return n(parseInt(r.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function le(e){const t=e=>(0,L.Wi)(e.bound)||"add"===e.operation||"mul"===e.operation?(0,L.G)(e):L.YP,n=(e,n,r)=>{const i=((e,n)=>(0,o.zG)(e,(e=>{switch(e){case"p":return(0,L.G)("add");case"m":return(0,L.G)("mul");case"v":return(0,L.G)("max");case"n":return(0,L.G)("min");default:return L.YP}}),L.UI((e=>({operation:e,bound:n}))),L.tS(t)))(e,r);return(0,L.UI)((e=>{const{init:t,rest:r}=(0,M.zT)((e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t}))(n);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:r.join("")}}))(i)};return(0,L.UI)(g)((0,D.nI)(de(e,(e=>{const t=e.split("");if(0===t.length)return L.YP;const[r,...i]=t;if("b"===r){const{init:e,rest:t}=(0,o.zG)(i,(0,M.zT)((e=>-1!=="1234567890.".indexOf(e))));if(0===e.length||0===t.length)return L.YP;const r=parseFloat(e.join("")),[s,...a]=t;return n(s,a,(0,L.G)(r))}return n(r,i,L.YP)}))))}function de(e,t){const n=t(e);return(0,L.fS)((()=>[]))((0,L.UI)((e=>[e[1]].concat(de(e[2],t))))(n))}function ge(e){return E(e.map(fe))}function fe(e){switch(e.kind){case"number":return p(e.value);case"string":return m(e.value);case"null":return{kind:"bottom"};case"object":return m("{object}");case"array":return m("{array}")}}var pe=n(1828);const me={strategy:(e,t,n)=>r=>{if((0,L.Wi)(n))return t;if("delta"===e&&(0,L.Wi)(t))return L.YP;if((0,L.Wi)(t))return n;if((0,L.pC)(t)&&(0,L.pC)(n))return r(t.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,n,r,i,s)=>{const a=(0,M.pR)(I(s)),c=(0,o.zG)(t.bound,L.EQ((()=>o.yR),(e=>t=>(0,P.VV)(s)(i.fromNumber(e),t))));if("append"===e&&"add"===t.operation)return(0,M.yL)(n,r,Ee("append",(0,o.ls)(i.plus,c)));if("append"===e&&"mul"===t.operation)return(0,M.yL)(n,r,Ee("append",(0,o.ls)(i.times,c)));if("append"===e&&"max"===t.operation)return(0,P.Fp)(a)(n,r);if("join"===e&&"add"===t.operation)return(0,M.yL)(n,r,Ee("join",(0,P.Fp)(s)));if("join"===e&&"mul"===t.operation)return(0,M.yL)(n,r,Ee("join",(0,P.Fp)(s)));if("join"===e&&"max"===t.operation)return(0,P.Fp)(a)(n,r);if("min"===t.operation)return me.operation(e,{operation:"max",bound:t.bound},n,r,i,function(e){return(0,P.Zt)(((t,n)=>O(e.compare(t,n))))}(s));if("delta"===e&&"max"===t.operation)return(0,P.gt)(a)(n,r)?n:r.map(f);if("delta"===e)return(0,M.yL)(n,r,((e,t)=>(0,P.gt)(I(s))(e,t)?A(e,c):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,n,r)=>{if("delta"===e&&"top"===n.kind&&"top"===r.kind)return(0,P.gt)(C.Df)(n.error,r.error)?m(n.error):{kind:"bottom"};if("delta"===e&&"bottom"===r.kind)return n;if("delta"===e&&"bottom"===n.kind)return{kind:"bottom"};if("top"===n.kind&&"top"===r.kind)return m((0,P.Fp)(C.Df)(n.error,r.error));if("top"===n.kind)return n;if("top"===r.kind)return r;if("inner"===n.kind&&"inner"===r.kind)return t(n.a,r.a);if("bottom"===n.kind)return r;if("bottom"===r.kind)return n;throw new Error("Non exhaustive match in extend")}},he={fromNumber:o.yR,plus:(e,t)=>e+t,times:(e,t)=>e*t};function _e(e,t,n,r){if("unbounded"===e.kind&&"unbounded"===t.kind){const i=e.group,o=t.group;return(0,L.fS)(f)((0,L.UI)((e=>p(h(e))))(q(i,o,n,r)))}if("windowed"===e.kind&&"windowed"===t.kind){const i=e.key,o=e.group,s=t.key,a=t.group,c=(0,P.Fp)((0,L.pR)(r))(i,s);return(0,L.fS)(f)((0,L.UI)((e=>p(_(e,c))))(q(o,a,n,r)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const i=e.n,o=t.n;if(i===o){const o=e.limit,s=e.group,a=t.limit,c=t.group,u=(0,P.Fp)((0,L.pR)(r))(o,a);return(0,L.fS)(f)((0,L.UI)((e=>p(v(e,u,i))))(q(s,c,n,r)))}return m("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const i=e.n,o=t.n;if(i===o){const o=e.limit,s=e.group,a=t.limit,c=t.group,u=(0,P.Fp)((0,L.pR)(r))(o,a);return(0,L.fS)(f)((0,L.UI)((e=>p(y(e,u,i))))(q(s,c,n,r)))}return m("Non matching counts")}return m("Non matching group types")}function ve(e,t,n){return(0,L.fS)(a)(ye(e,L.YP)(t,n))}function ye(e,t){const n=t=>(n,r)=>me.strategy(e,n,r)(ye(e,t)),r=(t,r,i)=>{if("stringGroup"===r.kind&&"stringGroup"===i.kind){const e=_e(r.group,i.group,n(t),C.Df);return A(e,(e=>w(we(e,C.Df))))}if("numberGroup"===r.kind&&"numberGroup"===i.kind){const e=_e(r.group,i.group,n(t),z.Df);return A(e,(e=>b(we(e,z.Df))))}if("tuple"===r.kind&&"tuple"===i.kind){const n=(0,L.pC)(t)?t.value:[];return p(E(function(e,t,n,r,i,o){const s=(e,t)=>({1:(0,M.ke)(e)(t).concat((0,M.KB)(Math.max(0,e-t.length),f)),2:(0,M.md)(e)(t)}),a=(t,n,r)=>{if(0===t.length)return me.operation(e,{operation:"max",bound:L.YP},n,r,i,o);if(t.length>0){const[c,...u]=t,l=s(c[2],n),d=l[1],g=l[2],f=s(c[2],r),p=f[1],m=f[2];return me.operation(e,c[1],d,p,i,o).concat(a(u,g,m))}throw new Error("Non exhaustive match in recurse")};return(0,M.GY)((0,M.Qp)((e=>"bottom"===e.kind))((0,M.GY)(a(t,n,r))))}(e,n,r.tuple,i.tuple,he,z.Df)))}throw new Error(`Non matching payload. Got ${r.kind} and ${i.kind}`)},i=(e,n)=>{if((0,L.Eh)((0,D.Eh)((0,B.n_)({1:(0,B.n_)({operation:C.Eq,bound:(0,L.Eh)(z.Eq)}),2:z.Eq}))).equals(e.commands,n.commands)){const i=(0,L.Wi)(e.commands)?t:e.commands,o=r(i,e.payload,n.payload);return A(o,(t=>S(e.commands,t)))}if(i=e.commands,s=n.commands,(0,L.Eh)((0,D.Eh)((0,B.n_)({1:(0,B.n_)({operation:C.Eq}),2:z.Eq}))).equals(i,s)){const i=(0,o.zG)(((e,t)=>(0,o.zG)((0,pe.gz)(L.G5)(e,t),(0,L.UI)((([e,t])=>D.yL(e,t,((e,t)=>({1:{operation:e[1].operation,bound:(0,o.zG)((0,pe.gz)(L.G5)(e[1].bound,t[1].bound),L.UI((([e,t])=>Math.min(e,t))),L.wp((()=>e[1].bound)),L.wp((()=>t[1].bound)))},2:e[2]})))))))(e.commands,n.commands),L.wp((()=>t))),s=r(i,e.payload,n.payload);return A(s,(e=>S(i,e)))}throw new Error(`Non matching primitive strings. Got ${Q(e)} and ${Q(n)}`);var i,s};return(t,n)=>J(k(me.extend(e,i,oe(t).state,oe(n).state)))}function be(e,t,n){const r=(0,L.UI)((t=>R(e,(([e,r])=>(0,P.gf)(n)(e,t)))))(t);return(0,L.fS)((()=>e))(r)}function we(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return(0,L.Wi)(e.key)?e:_(be(e.group,e.key,t),e.key);case"countLimit":{const n=e.limit,r=e.n,i=e.group,o=G(r,i,((e,t)=>t<=1?L.YP:(0,L.G)(t-1)),t),s=(0,P.Fp)((0,L.pR)(t))(n,o);return v(be(i,s,t),s,r)}case"uniqueLimit":{const n=e.limit,r=e.n,i=e.group,o=(e,t)=>{if("object"===e.kind){const n=[...e.value.keys(),...t.keys()],i=new Set(n);return i.size>=r?L.YP:(0,L.G)(i)}return L.YP},s=G(new Set,i,o,t),a=(0,P.Fp)((0,L.pR)(t))(n,s);return y(be(i,a,t),a,r)}}}function Ee(e,t){return(n,r)=>me.extend(e,((e,n)=>p(t(e,n))),n,r)}var ke=n(7407),Se=n(922),Pe=n(2652),Ce=n(4730),Ae=n(8036);class Ie{constructor(e,t,n){this.externalData=e,this.localQueries=t,this.externalQueries=n,this.queryCodesAsList=[],this.queryCodesAsMap={};const r=this.externalData.getExternalJsonData(Se.mL)||[],i=(0,o.zG)((0,L.Y3)((()=>r.filter((e=>(0,Ae.UC)(e,this.localQueries,this.externalQueries))))),(0,L.fS)((()=>[])));this.add(i)}add(e){return(0,o.zG)(e.forEach((e=>this.queryCodesAsMap[e]=!0)),(e=>this.updateSegmentsList()))}remove(e){return(0,o.zG)(e.forEach((e=>delete this.queryCodesAsMap[e])),(e=>this.updateSegmentsList()))}getAllAsList(){return this.queryCodesAsList}getAllAsMap(){return this.queryCodesAsMap}getUpdates(e){const t=[],n=[];return Object.entries(e).forEach((e=>{let[r,i]=e;const o=parseInt(r),s=(null==i?void 0:i.result)||{result:!1},a=!0===(null==s?void 0:s.result)&&!(o in this.queryCodesAsMap),c=!1===(null==s?void 0:s.result)&&o in this.queryCodesAsMap;a?t.push(o):c&&n.push(o)})),{entered:t,exited:n}}flush(){this.externalData.setExternalJsonData(Se.mL,this.getAllAsList())}reset(){this.externalData.removeExternalData(Se.mL),this.queryCodesAsList=[],this.queryCodesAsMap={}}updateSegmentsList(){this.queryCodesAsList=Object.keys(this.queryCodesAsMap).map((e=>parseInt(e)))}}const Le="bootstrap",De="process",Me="processTransitions",xe="updateExternalState",Oe="updateLAL",Te="updateTPD";var qe=n(2851);const Ge="permutive:query:changed",Ue="internal_query_states",Re="external_query_states",Be=e=>class extends e{constructor(){super(...arguments),this.prefix="[Query Manager]",this.isWorkerReady=!1,this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={},this.userSegments=new Ie(this.externalData,this.queryMetadata,this.externalQueries),this.segmentEntryQueryCodes=new Set,this.segmentExitQueryCodes=new Set,this.cohortEntryQueryCodes=new Set,this.cohortExitQueryCodes=new Set,this.hasNewOrModifiedQueries=!1,this.scheduler=new Ce.b(this.transitionDebounceTime,this.transitionDebounceMaxTime),this.debouncedProcessTransitions=this.makeDebouncedProcessTransitions(),this.registerListenersOnlyOnce=(0,Pe.HP)((()=>{this.lalRef.onChange(L.UI((e=>this.postMessage(Oe,[e])()))),this.tpdRef.onChange(L.UI((e=>this.postMessage(Te,[e])())))}));const[e,t]=qe.Ue(this.userSegments.getAllAsList());this.queryCodesRef=e,this.queryCodesRefUpdate=t;const[n,r]=qe.Ue(qe.a9(L.YP));this.setLalRef=r,this.lalRef=qe.xH(n);const[i,o]=qe.Ue(qe.a9(L.YP));this.setTpdRef=o,this.tpdRef=qe.xH(i)}get queryCodesAsRef(){return this.queryCodesRef}makeStateMaps(){const e=this.permutiveData.getData(Ue)||{},t=this.permutiveData.getData(Re)||{};for(const t in e)if("activations"in e[t]){const n=e[t].activations;for(const e in n)n[e]=[...new Set(n[e])]}this.logDebug("Cached state maps",{internal:e,external:t});const n=Object.keys(this.queryMetadata),r=Object.keys(e);this.hasNewOrModifiedQueries=n.length!==r.length||n.filter((t=>{var n;return this.queryMetadata[t]!==(null===(n=e[t])||void 0===n?void 0:n.checksum)})).length>0,this.logDebug("has new or modified queries",this.hasNewOrModifiedQueries);const i=this.hasNewOrModifiedQueries?(0,Pe.fl)(e,(t=>{var n;const r=null===(n=e[t])||void 0===n?void 0:n.checksum,i=r===this.queryMetadata[t];return i||this.logDebug(`Dropping state for query ${t}, mismatched checksum`,{cachedChecksum:r,checksum:this.queryMetadata[t]}),i})):e;this.extStateMap=this.hasNewOrModifiedQueries?this.dropExternalStateMissingFromStateMap(t,i):t,this.stateMap={value:i,promise:Promise.resolve(i)},this.logDebug("Initialised state maps",{internal:this.stateMap.value,external:this.extStateMap,metadata:this.queryMetadata});this.permutiveData.getData("query_states")&&this.permutiveData.deleteKey("query_states")}dropExternalStateMissingFromStateMap(e,t){const n=(0,Pe.fl)(e,(e=>e in t));return this.permutiveData.setData(Re,n),n}makeDebouncedProcessTransitions(){return this.scheduler.scheduleAccumulated((e=>this.processTransitions(e)()),{concat:(e,t)=>e.concat(t),empty:[]})}makeMessage(e,t,n){return{type:e,payload:(0,o.bc)(this.queryMetadata,this.extStateMap,...t),stateMap:n,userId:this.userId.get()}}trackTransition(e,t){const n=Se.ED?this.customProperties.getCustomProps():{},r=Object.assign(Object.assign(Object.assign({},n),{segment_number:t}),{});e?(this.segmentEntryQueryCodes.add(t),this.cohortEntryQueryCodes.add(t.toString())):(this.segmentExitQueryCodes.add(t),this.cohortExitQueryCodes.add(t.toString())),this.permutive.track(e?"SegmentEntry":"SegmentExit",r)}trackSegmentsTransition(e,t){e.forEach((e=>{this.trackTransition(!0,e),this.messages.emit(Ge,{queryCode:e,result:{result:!0}})})),t.forEach((e=>{this.trackTransition(!1,e),this.messages.emit(Ge,{queryCode:e,result:{result:!1}})}))}updateUserSegments(e,t){e.length>0&&this.userSegments.add(e),t.length>0&&this.userSegments.remove(t),(e.length>0||t.length>0)&&(this.userSegments.flush(),this.queryCodesRefUpdate(this.userSegments.getAllAsList()))}onStateChangeReady(e){const{entered:t,exited:n}=this.userSegments.getUpdates(e);this.trackSegmentsTransition(t,n),this.updateUserSegments(t,n),this.logDebug("Updating query state",{updatedStateMap:e}),this.permutiveData.setData(Ue,e);return(t.length>0||n.length>0)&&(this.logDebug("Updated cohorts",{entered:t,exited:n}),this.messages.emit("permutive:segments:updated")),{segmentsEntered:new Set(t),segmentsExited:new Set(n),cohortsEntered:new Set(t.map(String)),cohortsExited:new Set(n.map(String))}}postMessage(e,t){const n=()=>({segmentsEntered:new Set,segmentsExited:new Set,cohortsEntered:new Set,cohortsExited:new Set});return(0,o.ls)((()=>(0,o.a9)(this.stateMap.promise)),ke.UI((n=>this.makeMessage(e,t,n))),ke.tS((e=>this.processMessage(e))),s.UI((e=>this.userId.get()===e.userId?e:{diff:{},errors:[]})),s.UI((0,Pe.bw)((e=>{e.errors.length>0&&this.api.reportError(`QL error(s). Got ${e.errors.join("; ")}`,this.userId.get())}))),s.UI((e=>{let{diff:t,externalStateToDrop:r}=e;if(r){const e=(0,Pe.fl)(this.stateMap.value,(e=>!(e in r)));this.extStateMap=this.dropExternalStateMissingFromStateMap(this.extStateMap,e)}this.stateMap.value=Object.assign(Object.assign({},this.stateMap.value),t);const i=this.isWorkerReady?this.onStateChangeReady(this.stateMap.value):n();return{updatedStateMap:this.stateMap.value,result:(0,o.bc)(t,i)}})),s.fS((e=>(this.api.reportError(`Error during query execution. Got ${e}`,this.userId.get()),ke.of({updatedStateMap:this.stateMap.value,result:(0,o.bc)({},n())})))),(e=>e()),(e=>(this.stateMap.promise=e.then((e=>e.updatedStateMap)),e.then((e=>e.result)))))}processTransitions(e){return this.postMessage(Me,[e])}bootstrap(e){return(0,o.zG)(pe.gz(ke.oE)(this.postMessage(Le,[{segments:{"1p":this.userSegments.getAllAsMap()},sessionId:this.sessionManager.getSessionId(),viewId:this.viewId.get(),lookalikeModels:this.lalRef.current,thirdPartydata:this.tpdRef.current},e]),(()=>Promise.resolve(this.registerListenersOnlyOnce()))),ke.UI((e=>{let[t]=e;return t})))}process(e,t){return(0,Ae.AG)(e)?()=>this.debouncedProcessTransitions([e]):this.processStandard([e],t)}processStandard(e,t){return(0,o.zG)(this.postMessage(De,[e]),ke.UI((0,Pe.bw)((()=>{t&&this.setAsRealTimeifNeeded(e)}))))}updateExternalState(e){return(0,o.zG)((()=>{const t=(0,Pe.b0)(e,((e,t)=>{const n=this.queryMetadata[e];return n&&t[n]?(0,L.Uo)(W(t[n])):L.YP})),n=(0,Pe.b0)(this.extStateMap,((e,t)=>(0,L.Uo)(W(t)))),r=(e,t,n)=>(0,o.zG)((0,L.Y3)((()=>(this.logDebug("Joining external state",{newExtState:e,currentExtState:t}),ve("join",e,t)))),(0,L.fS)((()=>(this.api.reportError(`Failed to join external state for query: ${n}. Had ${j(t)}, received ${j(e)}}`,this.userId.get()),e)))),i=(0,Pe.b0)(Object.assign(Object.assign({},n),t),((e,t)=>n[e]?(0,L.G)(F(r(t,n[e],e))):(0,L.G)(F(t))));return this.permutiveData.setData(Re,i),this.extStateMap=i,Promise.resolve()}),ke.tS((()=>this.postMessage(xe,[]))))}reset(){this.userSegments.reset(),this.permutiveData.setData(Ue,{}),this.permutiveData.setData(Re,{}),this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={}}setAsReady(){this.isWorkerReady=!0,this.onStateChangeReady(this.stateMap.value),this.messages.emit("permutive:queries:initialised")}getStateSizeInBytes(){return 2*JSON.stringify(this.stateMap.value).length}setAsRealTimeifNeeded(e){return!this.realtime.isRealtime()&&e.filter((e=>"Pageview"===e.name)).length>0?this.realtime.setAsRealtime(this.userSegments.getAllAsList().length):void 0}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}};var ze=n(3992);function je(){{const e=n(4386).Z;return(0,r.h)(new e)}}class Fe{constructor(e){this.queryMetadata={16780:"0c8b70cdb7",16781:"22911a2329",16782:"c784c76f7e",16842:"8c5f9ad456",16843:"103749970f",16982:"4997c744c8",16987:"42c90f4f7b",17068:"380d7eb9a3",17075:"38881c4e1b",17117:"77cf8f3bec",17124:"46446ac949",17125:"16ee0b72c9",17127:"58d2b6d13a",17128:"2771fac6be",17135:"b912960866",17138:"0e4dd309d2",17173:"41fa272cce",17174:"28e0d3e756",17176:"6ca9be80a5",17180:"0b3ac08bc9",17182:"9a1f1eea9e",17183:"cf7e337d90",17185:"d0415019d9",17186:"b67d9d5fa2",17187:"5d8be7ab24",17427:"b902fb0e38",18212:"9628467caa",18238:"041d42e238",18239:"b08b1a8105",18240:"e25f3ddb4e",18245:"726840066d",18246:"eed9fb99e4",18247:"885c0d608a",18248:"1633affb26",18250:"40bacbc3a9",18253:"10388b04b2",18254:"89151e5ff0",18260:"b5cda771c8",18262:"567574d7ad",18263:"d6625fca46",18264:"6da9692239",18268:"2d8169515a",18269:"9333b1b098",18270:"22be240e1e",18271:"cc27f4b177",18294:"cef1545569",18295:"71629f428c",18297:"4b5e8103a5",18298:"ca906825a6",18300:"b640e0d431",18310:"00be9595b5",18312:"52f354dc6e",18314:"712ca44b5b",18315:"b2720ffc50",18316:"2718415157",18317:"7a98db60ee",18318:"b1ab0400c7",18320:"5ab3789283",18321:"9727f2c9ae",18323:"a5b3defa6a",18356:"ccd83c3fbc",18437:"d6208e961e",18439:"c1124faccd",18440:"cde6c8b99a",18443:"bf521fa741",18445:"a00a8ed49a",18731:"a16bcf0978",18732:"93f3806b98",18733:"741ce2218f",18734:"75e88b58a7",18735:"a76df9c2bc",18782:"d2f664deef",18790:"c4c2711f62",18791:"f5426320ab",18797:"9e98d08744",18803:"e8dde19f3d",18805:"e3e172cd5b",18806:"774e69043e",18807:"c588a207a7",19597:"00a3168789",19669:"cedc16d7a7",19902:"fb24407ac0",20008:"65adfca5f6",20277:"d7ebf56c86",20278:"c72c3a6d5d",20279:"a047409afb",20281:"c46cba3007",20283:"5c87035621",20431:"71b7bf78c8",20469:"6a89bb1d86",20494:"0f97917850",20531:"4508e9caa7",20534:"8a22e4f80b",20645:"ee9b882cc2",20646:"67bd3902df",20714:"1e28df5f8d",20715:"5fffb0bdab",20833:"2070c0308c",21070:"e8d5c0c975",21267:"942c916850",21535:"25117f9959",21538:"af0e68f677",21540:"1b6906c148",21541:"3ef780789b",21548:"7a0ae8cfb1",21615:"566eeac680",21670:"c6dd7e394c",22407:"075ee85c82",22408:"981456f86e",22409:"bcd0fc54c4",22410:"e65e70bbbd",22411:"9ed22f5b9e",22412:"3d1eccf21b",22514:"dd445a0dcf",22515:"72691b4595",22529:"2e5841f9b6",22567:"9399930345",22581:"91d23fdf23",22598:"febb8b919f",22600:"a9bc1b0bc0",22710:"efb4ba1b8a",22892:"9027c51963",23027:"ec6180d4fb",23832:"9e939dc176",23833:"1412d1fa4c",23835:"c3553c27f8",23852:"d802216c3b",23853:"c2b7ea37ba",23937:"2186b5b340",24101:"546c35fdb4",24102:"d54808796e",24103:"405602724a",24104:"2061069b4c",24105:"ba3c6f6585",24106:"0d0ca46630",24244:"c5cef6667a",24245:"9a7c2a7788",24324:"87a7e1b006",24339:"75ec81e4b2",24978:"34b28a1556",26090:"48a922a3f2",26091:"163c7a4ad8",26376:"47f7b67e4d",26380:"bce6f2eb14",26381:"a878b65f13",26383:"e851cc52f9",26440:"d0816c8e5d",26442:"7d0551b3f7",26443:"8d91935d6e",27111:"e3e172cd5b",27314:"c0c889a12b",27315:"d31a1112ba",27316:"b5d24d19c5",27317:"7484332f65",27318:"efa6a38d20",27320:"a5a5f40224",27321:"27fc760883",27323:"0947124537",27324:"89ea470937",27326:"6e9e7ec5ef",27327:"cf9d44e170",27330:"3a98372066",27331:"92e97e9e37",27332:"0e1dd9b1d2",27333:"54a5202334",27334:"9926bea7dd",27335:"cc5c08ed53",27336:"37df25393d",27338:"42916fe042",27339:"f21c75a8a5",27340:"58400ab701",27342:"63708f4f54",27343:"55d8a00c2b",27344:"2c1d9271cd",27345:"1863d76d26",27346:"8965fb1fa2",27347:"65cf7b0cb1",27348:"0e2eaa6162",27349:"8fd8a92a0c",27350:"61469cdfb8",27351:"835c7dcd97",27352:"d348241e7b",27353:"122d2e0f04",27354:"2e35f672d1",27355:"49195d11cc",27356:"e0d6824b3b",27357:"48ec033db3",27358:"1f5b5aaba1",27359:"fb1629957e",27360:"f72ada8d4e",27361:"0f44e19eef",27362:"a561f0a743",27363:"f3f09b5e59",27364:"310d71c820",27365:"f17b2eced3",27366:"3496547b5a",27367:"1af9f74af8",27368:"04641050d0",27369:"110d4e03fb",27370:"c24b48b1b6",27371:"35aed7f9a4",27372:"c16f1eac5a",27373:"8ebbaf4b67",27374:"ef8f801206",27375:"a3d1cbab09",27376:"2a558f7f10",27377:"853fffedd9",27378:"0735d87b44",27379:"5d151e7c9e",27380:"59ab88c252",27382:"7689410886",27384:"20f8d72c14",27385:"0221d1b037",27386:"45d7fec7be",27387:"50b1051267",27388:"7ae5814bd9",27389:"655d0d57a9",27390:"0b061b825c",27391:"d869d227df",27392:"36832bc24f",27393:"11fff6f956",27394:"8c8ffe5940",27395:"6a611f321d",27396:"7dbc452a1b",27397:"b97b810210",27398:"348603af58",27399:"ebe10622f0",27400:"1be6d0a31c",27706:"677472ee81",27708:"607c3e221c",27710:"5e025c8cb0",27711:"cd238ed229",27714:"4731589f7b",28394:"eba9fc793c",28714:"9efda3bc52",29255:"ce22c80e64",29259:"d0f54b617c",30222:"39f57b2bff",30363:"c4f1391bcc",30365:"aea916952d",30366:"cb81e73a7b",30367:"b83c4796d1",30368:"aea0de8dcc",30369:"e04893c9f3",31187:"e386cca67f",32094:"54687d0c18",32095:"03629580de",32729:"ee0102cf01",33786:"eb3c3082ae",34414:"a229e34496",34415:"771a4e082f",34989:"9675b7eee4",37314:"91f405d7d9",38068:"49485355ed",38340:"9b6f91deac",38341:"5e07ca631e",38342:"df62d0912b",38343:"1850642364",38344:"80de688dc6",38346:"1e088ae027",38352:"fe708944e3",38353:"48c4e6c4bb",38354:"d737f860bb",38355:"3930d1c8d4",38356:"8d214479ca",38357:"38d74e7af3",38358:"1f5ebcee93",38359:"955e23fcb4",38360:"05d9e9a749",38361:"cea7654c8f",38362:"09999dfa42",38470:"4ccf70d6c0",38472:"2245976a76",38473:"ffc59b576a",38474:"af53a49d92",38475:"870f4dc569",38476:"3ce08603be",38477:"b264d03028",38478:"58e2b9e708",38479:"7d1cc69be7",38497:"0ac4684986",38498:"328e5ed050",38819:"60db6efb84",38827:"63707f4af6",41489:"c4320f24db",42437:"8c5f7b4813",42438:"230be8e1f8",42439:"773fb94e3a",42441:"49159201ff",46761:"82ce53de40",46762:"1be7fb9d7e",46763:"322e897fd5",47581:"d000893588",47583:"ab77d217bf",47584:"3847c4a068",47585:"078a51bb5e",47586:"f536ee7a65",51098:"63e4075d10",51099:"4f6ebc6c0a",51100:"fec8b612e1",51101:"ae2a26b253",52127:"12d1610e7c",52133:"d6fbacc863",52142:"13cab2bebf",55914:"6e1cb39fec",55934:"4b6b7e0d5d",56089:"83469fa05b",56090:"a1cceb3d87",56274:"1ea31f55f1",57152:"28e94e0195",58181:"fe1f0cea1f",58310:"6fcab06785",62486:"a1ea30e692",66495:"a1ef284267",66564:"29f0eabf25",71282:"8821e43b95",71287:"7ceb838ba0",72255:"2c78b521a2",72256:"586bb2805d",72257:"362cd36709",73221:"26984e3244",73285:"5ff39d098f",73287:"7ef1315dd9",73288:"3c14ca83af",73289:"8d539644a5",73290:"d22f5cffd5",73291:"da7ed4b553",73292:"5065150063",73402:"d7d6f2946d",73748:"e54ae403dd",74123:"bbff4bcb26",74145:"8d50b08a84",74349:"bd5648c37e",74452:"20b7d8a2ea",74657:"be77e24aff",74659:"b067b4eb1b",74660:"a88838f1a3",74661:"3fc5afea9d",74662:"c70a26740e",74664:"d7be35102a",74665:"e2876eae03",75311:"7d8b50f366",75636:"874d27a2a4",75640:"8a5a2399d2",75854:"7dcc21b25f",75874:"9f1b69b969",75963:"ebd56efe0e",76328:"7321d91d1c",76378:"50b7c7e250",76402:"bca30d157b",76414:"09a3d5b238",76507:"d62b784392",76510:"3aa996925e",76799:"5aa4e41d45",76800:"87fc16e1a3",77423:"81ec30cb9e",77425:"2f686d9260",77426:"118ecc2016",77520:"4166988bbb",77841:"3bfabedd76",77848:"ff80ec3664",77849:"8544a70021",78740:"a53b28508e",78743:"35fdb655a7",78924:"2014c1331e",79074:"4750421ccd",79157:"e033712087",79176:"ef741762a2",79183:"7a9f2703ef",79184:"8988be14b9",79187:"a2939dcbbd",79188:"6c861dd9c6",79190:"e63b20a8a4",79436:"649c7d2491",80663:"a1c069203a",81250:"351ebe6de7",81707:"b97ebf64e4",81780:"4d5b0c15f6",81781:"466f23ea95",81782:"5fa5739063",81783:"e7d59eba2e",81784:"1de17ab818",81785:"9fa89e6164",81786:"7d0294e6e4",81787:"2fa2adf3b8",81788:"c2b52fd341",81789:"ca72e169a5",81790:"07861da5d8",81791:"286022afe6",81792:"86b8862764",81793:"61475117d4",81794:"cfac49464c",81795:"ad52e71da6",84257:"a2a163e3f2",85612:"21434272b9",85622:"a09b6bee4d",85906:"d34bbb2baa",85907:"39d5c25073",85908:"4dd7a2f880",86173:"e954897689",86956:"e61b93ded0",87626:"e05210be5c",87678:"97040433c6",87696:"c1c6c69d84",87738:"4a8b130b15",87739:"1e8d3cbaf4",87740:"05dbf2bfba",87741:"35bca428dc",87742:"ae09618e51",87744:"8ca50644e7",88113:"4fe6ba9010",88865:"4a270b8989",91003:"c21206f4fb",91345:"eac427c4a5",92621:"aa28b683cd",92622:"54c2d6e883",94606:"101c7eea64",94607:"4d0ed29ea1",94608:"22ed82e0c1",95434:"89c636216d",98074:"b197f78916",98331:"eb09f0bf17",99503:"69f52a9a61",99504:"57608a9d6c",99536:"38e75847d0",99689:"508feae9e8",100186:"0f34831d9b",101060:"d3c1be9023",101061:"7959ea664f",101171:"12a109163d",101387:"ce9291b03e",101388:"d8e8605bf7",101389:"36bf7d31fe",102103:"250f4961cd",102153:"5d1abeb768",102212:"08b9a043c2",102213:"1abefebc5b",102214:"93b7d3de3c",103258:"dab6307615",104170:"8077830323",104405:"1f202c11c2",104406:"9da4d21ffa",104640:"9820b8a89d",105294:"5f61a2e38b",105978:"b1c7b6c2b2",105979:"d6282309ef",106717:"c6a8977f08",109466:"48cc466031",113877:"8715546977",113878:"b9953a617c",113879:"e917dd8843",113880:"7c5eeaab61",114692:"6ba615c053",116599:"9a28cb1b7f",117084:"1d574bdc78",117171:"0b8196b0f1",117680:"67d40bf130",120985:"7a84e72571",122044:"97d6f5a187",122045:"a20d562795",122046:"c6fdcc9c64",122047:"1bce5fc490",122049:"38c3266067",122051:"4178aad403",122054:"dcb24449fb",122721:"00951deb02",123787:"25bdcf4901",124792:"b4ddeb76b0",125008:"f682a8f1dd",125770:"eb3c3f58e6",126197:"0f34831d9b",128830:"fc7ff95f23",129643:"7a14b5c7d7",131423:"f72e42ccf2",135703:"22063badc9",135704:"6b88c03f0d",135705:"f8b6660e94",135706:"41e302126f",136045:"c6fa80e6d1",136624:"591d241aa4",136628:"70602865af",136630:"4bab0154e7",136865:"1d70cb763d",139562:"61385d5634",139619:"8829191be5",139666:"d64d37cd01",141502:"926be3bc90",142287:"e4697649ad",143049:"dd5c196b70",147446:"fc73b48262",147779:"8b731a4ff3",147839:"a70f486b01",148102:"faf495e6db",148849:"2765f8f920",148898:"e79f173761",149016:"ec4b8aecc8",149036:"b8597829b9",149349:"2c6bfa4a66",149351:"8bf6a0af46",150943:"dac921da5e",150951:"91c344a6cb",151073:"5903d82537",151211:"a3ab67eadb",153433:"e86cc97d4a",153624:"9f71598cb8",153825:"85c7cf06a7",156645:"da6cf43477",156961:"9c48010158",158432:"7948870a26",158434:"2cc56ccc4e",158465:"65c4778f9c",158466:"6e4817ff9d",158533:"527108748f",158581:"1d823b9aa5",158583:"253011cb71",158585:"0169edc6b3",158589:"8360e99c7e",158591:"25c19aaad4",162776:"56f14b8b7f",163161:"1e561e28f6",163164:"8a08bac5ec",163168:"da3d4dd2a6",163169:"56b90d7c82",163170:"ad8bdda93d",163171:"0db74e6c57",163172:"e38e932602",163173:"a8d946dd66",163808:"a9019c3f79",164501:"0b731ed088",164538:"2e37e5e15b",165850:"132aa73c96",166461:"eb5b8e0284",167131:"e9065c476e"},this.externalQueries=new Set([]),this.customProperties=e.customProperties,this.externalData=e.externalData,this.logger=e.logger,this.messages=e.messages,this.api=e.api,this.permutive=e.permutive,this.permutiveData=e.permutiveData,this.queryWorker=e.queryWorker,this.realtime=e.realtime,this.sessionManager=e.sessionManager,this.transitionDebounceMaxTime=e.transitionDebounceMaxTime,this.transitionDebounceTime=e.transitionDebounceTime,this.userId=e.userId,this.viewId=e.viewId,this.metrics=e.metrics}processMessage(e){return s.Y3((()=>(0,ze.t_)(this.queryWorker.postMessage(Object.assign({engine:"QLE"},e)))),i.w)}}class We extends((()=>(0,o.zG)(Fe,Be))()){constructor(e){super(e),this.makeStateMaps()}}},8318:(e,t,n)=>{n.d(t,{F:()=>s});var r=n(6934),i=n(1628),o=n(3992);const s=(0,r.Y3)((()=>{const e=(0,i.e)();return(0,o.t_)(e.postMessage(Object.assign({engine:"QLE",type:"noop",userId:""},{}))),Promise.resolve(e)}),(e=>`Failed to start QueryWorker. Got ${e}`))},3622:(e,t,n)=>{n.d(t,{$:()=>i});var r=n(2652);class i{constructor(e){this.permutiveData=e,this.eventSourceId=e.getData("event-source-id")||this.generateAndStoreEventSourceId()}get(){return this.eventSourceId}generateAndSet(){this.eventSourceId=this.generateAndStoreEventSourceId()}generateAndStoreEventSourceId(){const e=(0,r.k$)();return this.permutiveData.setData("event-source-id",e),e}}},1229:(e,t,n)=>{n.d(t,{N:()=>f,e:()=>d});var r=n(7582),i=n(2688),o=n(7183),s=n(365),a=n(3735),c=n(4730),u=n(8036),l=n(3992);function d(){{const e=n(4386).Z;return(0,o.h)(new e)}}const g={concat:(e,t)=>Object.assign(Object.assign({},e),t),empty:{}};class f{constructor(e,t,n,r,i,o,s,a,d){this.api=e,this.network=t,this.sessionManager=n,this.permutiveData=r,this.queryManager=i,this.metrics=o,this.userId=s,this.eventSourceId=a,this.stateWorker=d,this.DEBOUNCE_TIME=1e3,this.MAX_DEBOUNCE_TIME=5e3,this.fetchUnseenState=!0,this.scheduler=new c.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedSyncIfNotEmpty=this.scheduler.scheduleAccumulated((e=>this.syncIfNotEmpty.bind(this)("standard",e)),g),this.fetchUnseenState=!!p.includes("e1c3fd73-dd41-4abd-b80b-4278d52bf7aa")||this.sessionManager.sessionHasChanged(),this.stateOffset=this.permutiveData.getData("state_offset")||0,this.lastSentStateMapWithChecksum=(0,u.Yh)(this.permutiveData.getData("internal_query_states")||{}),(0,l.t_)(this.stateWorker.postMessage({engine:"SSE",type:"noop"}))}sync(e){return(0,a.zG)(this.debouncedSyncIfNotEmpty(e),(e=>Promise.resolve()))}syncWithUnseen(){return this.syncIfNotEmpty("unseen",{}).then(a.Q1)}syncIfNotEmpty(e,t){const[n,r,o]="standard"===e?[this.stateOffset,t,this.fetchUnseenState]:"unseen"===e?[this.stateOffset,this.queryManager.stateMap.value,!0]:[0,{},!0],s=this.metrics.startTimer("sdk_compute_delta_seconds",{}),c={type:"delta",stateMap:r,lastSentStateMapWithChecksum:this.lastSentStateMapWithChecksum},u=(0,a.zG)(this.stateWorker.postMessage(Object.assign({engine:"SSE"},c)),l.t_,(e=>e.then((e=>(this.metrics.stopTimer("sdk_compute_delta_seconds",s),e))))),d=e=>{this.fetchUnseenState=!1;const t=(0,a.ls)((e=>this.api.reportError(`Error sending state delta. Got ${(0,i.w)(e)}`,this.userId.get())),(e=>({})));return this.api.state(this.metrics,this.userId.get(),this.eventSourceId.get(),e,n,o).then((e=>function(e){return!!e}(e)?this.onStateResponse(e):{})).then((t=>(this.lastSentStateMapWithChecksum=e,t))).catch(t)};return u.then((e=>o||Object.keys(e).length>0?d(e):Promise.resolve({})))}resetSync(){return(0,r.mG)(this,void 0,void 0,(function*(){this.reset(),yield this.syncIfNotEmpty("reset",{})}))}reset(){this.lastSentStateMapWithChecksum={}}onStateResponse(e){const t=(0,s.Y3)((()=>JSON.parse(e.state)),(e=>this.api.reportError(`Failed to parse State API response, got ${e}`,this.userId.get()))),n=e=>e?this.queryManager.updateExternalState(e)():(0,a.Q1)();return(0,s.tO)(t)?(0,a.zG)(e.state_offset,(e=>this.stateOffset=e),(e=>this.permutiveData.setData("state_offset",e)),(e=>n(t.right)),(e=>t.right)):{}}}const p=["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"]},926:(e,t,n)=>{n.d(t,{Kd:()=>i,eJ:()=>o});var r=n(2116);n(2851),n(2652);const i="addon:twitter_pixel",o=function(e){return r.K4((()=>{}))}},1828:(e,t,n)=>{n.d(t,{ap:()=>o,gz:()=>u});var r=n(3735),i=n(9384);function o(e,t){return function(n){return function(r){return e.ap(e.map(r,(function(e){return function(n){return t.ap(e,n)}})),n)}}}function s(e,t,n){return function(r){for(var i=Array(n.length+1),o=0;o<n.length;o++)i[o]=n[o];return i[n.length]=r,0===t?e.apply(null,i):s(e,t-1,i)}}var a={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(n){return[e,t,n]}}},4:function(e){return function(t){return function(n){return function(r){return[e,t,n,r]}}}},5:function(e){return function(t){return function(n){return function(r){return function(i){return[e,t,n,r,i]}}}}}};function c(e){return i.e$.call(a,e)||(a[e]=s(r.bc,e-1,[])),a[e]}function u(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,i=c(r),o=e.map(t[0],i),s=1;s<r;s++)o=e.ap(o,t[s]);return o}}},1500:(e,t,n)=>{n.d(t,{Ce:()=>l,DY:()=>k,DZ:()=>x,Ew:()=>y,GY:()=>E,KB:()=>g,Qp:()=>v,f2:()=>b,fw:()=>R,jV:()=>A,ke:()=>p,md:()=>_,oA:()=>O,pR:()=>z,t9:()=>P,tS:()=>L,u4:()=>G,uK:()=>T,xH:()=>D,yL:()=>S,zT:()=>h});var r=n(3735),i=(n(7341),n(9384)),o=n(1885),s=n(3328),a=n(4870),c=(n(5605),function(e){return 0===e.length}),u=o.Od,l=o.Ce,d=(o.ws,o.R3),g=(o.Im,function(e,t){return e<=0?[]:o.KB(t)(e)});var f=o.dC,p=(s.P5,s.YM,s.Z$,function(e){return function(t){return f(e,t)?w(t):t.slice(0,e)}});var m=function(e,t){for(var n=e.length,r=0;r<n&&t(e[r]);r++);return r};function h(e){return function(t){var n=C(m(t,e))(t);return{init:n[0],rest:n[1]}}}var _=function(e){return function(t){return e<=0||c(t)?w(t):e>=t.length?[]:t.slice(e,t.length)}};function v(e){return function(t){return t.slice(m(t,e))}}s.cx;function y(e){return s.Ew(e)}var b=s.f2;s.JO,s.qr;var w=function(e){return e.slice()},E=function(e){return c(e)?[]:e.slice().reverse()},k=function(e){return function(t){return t.length<=1?w(t):t.slice().sort(e.compare)}},S=function(e,t,n){for(var r=[],i=Math.min(e.length,t.length),o=0;o<i;o++)r[o]=n(e[o],t[o]);return r};var P=s.t9,C=function(e){return function(t){return e>=1&&u(t)?o.lx(e)(t):c(t)?[w(t),[]]:[[],w(t)]}};function A(e){var t=P(e);return function(n,r){if(void 0===r){var i=A(e);return function(e){return i(e,n)}}return n.filter((function(e){return t(e,r)}))}}s.kp,s.Eq;var I=o.of,L=function(e){return function(t){return(0,r.zG)(t,function(e){return function(t){for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},D=L(r.yR),M=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var o=e(r,t[r]);i.pC(o)&&n.push(o.value)}return n}},x=function(e){return M((function(t,n){return e(n)}))},O=x(r.yR),T=function(e){return q((function(t,n){return e(n)}))},q=function(e){return function(t){for(var n=[],r=[],i=0;i<t.length;i++){var o=t[i];e(i,o)?r.push(o):n.push(o)}return(0,a.s4)(n,r)}},G=(s.Lx,s.xP,s.u4),U=s.OE,R=(s.nq,s.iw,function(e){var t=B(e);return function(e){return t((function(t,n){return e(n)}))}}),B=function(e){return function(t){return U(e.of([]),(function(n,i,o){return e.ap(e.map(i,(function(e){return function(t){return(0,r.zG)(e,d(t))}})),t(n,o))}))}},z=(s.ZN,s.Eh,s.pR);s.pJ,s.oR,o.oo,s.yW,s.j0,i.F4,o.w6,o.QI,o.Ss},6862:(e,t,n)=>{function r(e){return function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}}}function i(e){return function(t,n){return function(r){return e.chain(r,(function(r){return e.map(n(r),(function(e){var n;return Object.assign({},r,((n={})[t]=e,n))}))}))}}}n.d(t,{a:()=>i,m:()=>r})},365:(e,t,n)=>{n.d(t,{g1:()=>v,G5:()=>_,dO:()=>p,Pd:()=>E,ak:()=>B,tS:()=>b,g_:()=>M,ij:()=>G,Yo:()=>C,DT:()=>P,fS:()=>O,pF:()=>x,nM:()=>A,tO:()=>I,t$:()=>a,UI:()=>f,Vn:()=>k,EQ:()=>D,vx:()=>q,F2:()=>c,LF:()=>T,i$:()=>R,Y3:()=>U});var r=n(6862),i=n(2690),o=n(3735),s=(n(7341),n(9384)),a=s.t$,c=s.F2,u=function(e,t){return(0,o.zG)(e,f(t))},l=function(e,t){return(0,o.zG)(e,h(t))},d=function(e,t){return(0,o.zG)(e,b(t))},g="Either",f=function(e){return function(t){return A(t)?t:c(e(t.right))}},p={URI:g,map:u},m=c,h=function(e){return function(t){return A(t)?t:A(e)?e:c(t.right(e.right))}},_={URI:g,map:u,ap:l},v={URI:g,map:u,ap:l,of:m},y=function(e){return function(t){return A(t)?t:e(t.right)}},b=y,w={URI:g,map:u,ap:l,chain:d},E=function(e,t){return function(n){return A(n)?a(e(n.left)):c(t(n.right))}},k=function(e){return function(t){return A(t)?a(e(t.left)):t}},S={URI:g,fromEither:o.yR},P=(0,i.DT)(S),C=(0,i.Yo)(S),A=s.nM,I=s.tO,L=function(e,t){return function(n){return A(n)?e(n.left):t(n.right)}},D=L,M=D,x=function(e){return function(t){return A(t)?e(t.left):t.right}},O=x,T=function(e){return A(e)?c(e.left):a(e.right)},q=function(e){return function(t){return A(t)?e(t.left):t}},G=function(e){return function(t){return null==t?a(e):c(t)}},U=function(e,t){try{return c(e())}catch(e){return a(t(e))}},R=L(o.yR,o.yR);s.F4;var B=(0,r.a)(w);s.Xl},4268:(e,t,n)=>{n.d(t,{Uz:()=>o,f7:()=>r,n_:()=>i,w4:()=>s});n(3735);var r=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},i=function(e){return r((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},o=function(e){return function(t){return r((function(n,r){return t.equals(e(n),e(r))}))}},s={equals:function(e,t){return e===t}};s.equals},2690:(e,t,n)=>{n.d(t,{DT:()=>s,Yo:()=>o,fX:()=>c});var r=n(3735),i=n(9384);function o(e){return function(t){return function(n){return e.fromEither(i.Wi(n)?i.t$(t()):i.F2(n.value))}}}function s(e){return function(t,n){return function(r){return e.fromEither(t(r)?i.F2(r):i.t$(n(r)))}}}function a(e){return function(t){return(0,r.ls)(t,e.fromEither)}}function c(e,t){var n=a(e);return function(e){return function(r){return t.chain(r,n(e))}}}},9679:(e,t,n)=>{n.d(t,{oU:()=>i});var r=n(3735);function i(e,t){return function(n){var i=(0,r.ls)(n,e.fromTask);return function(e){return t.chain(e,i)}}}},7341:(e,t,n)=>{function r(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.map(e,n)}))}}}function i(e){return function(t){return function(n){return e.map(n,(function(e){var n;return(n={})[t]=e,n}))}}}function o(e){return function(t,n){return function(r){return e.map(r,(function(e){var r;return Object.assign({},e,((r={})[t]=n(e),r))}))}}}n.d(t,{Hr:()=>o,UI:()=>r,YO:()=>i})},1885:(e,t,n)=>{n.d(t,{Ce:()=>l,Eh:()=>E,Im:()=>d,KB:()=>h,Od:()=>a,QI:()=>S,R3:()=>g,Ss:()=>P,dC:()=>c,lx:()=>w,nI:()=>m,of:()=>y,oo:()=>f,w6:()=>_,ws:()=>u,yL:()=>b});var r=n(3735),i=(n(7341),n(9384)),o=n(7241),s=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},a=function(e){return e.length>0},c=function(e,t){return e<0||e>=t.length},u=function(e){return function(t){return s([e],t,!0)}},l=u,d=function(e){return function(t){return s(s([],t,!0),[e],!1)}},g=d,f=function(e,t,n){if(a(n)){var r=p(n);return r.splice(e,0,t),r}return[t]},p=i.r1,m=function(e){return a(e)?i.G(e):i.YP},h=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],i=1;i<n;i++)r.push(e(i));return r}},_=function(e,t){return e<=t?h((function(t){return e+t}))(t-e+1):[e]};var v=p,y=function(e){return[e]},b=function(e,t,n){for(var r=[n(e[0],t[0])],i=Math.min(e.length,t.length),o=1;o<i;o++)r[o]=n(e[o],t[o]);return r};o.xP,o.Lx;var w=function(e){return function(t){var n=Math.max(1,e);return n>=t.length?[v(t),[]]:[(0,r.zG)(t.slice(1,n),l(k(t))),t.slice(n)]}},E=(o.u4,o.OE,o.nq,o.iw,o.YM,o.ZN,o.Eh),k=(i.F4,o.YM);o.Z$,o.VV,o.Fp,o.j0;function S(e,t){return void 0===t?l(e):(0,r.zG)(t,l(e))}var P=function(e,t){return(0,r.zG)(e,g(t))};o.ur},6567:(e,t,n)=>{n.d(t,{DT:()=>u,DZ:()=>O,EK:()=>d,EQ:()=>j,Eh:()=>y,G:()=>c,G5:()=>P,IS:()=>l,Ri:()=>M,UI:()=>w,Uo:()=>U,Wi:()=>B,Y3:()=>$,YP:()=>a,dO:()=>E,fS:()=>W,g_:()=>F,hX:()=>x,ij:()=>K,pC:()=>R,pR:()=>b,tS:()=>C,wp:()=>A,xH:()=>N,xu:()=>G});var r=n(3735),i=(n(7341),n(9384)),o=n(6017),s=n(4870),a=(n(5605),i.YP),c=i.G;function u(e){return function(t){return e(t)?c(t):a}}var l=function(e){return"Right"===e._tag?a:c(e.left)},d=function(e){return"Left"===e._tag?a:c(e.right)},g=function(e,t){return(0,r.zG)(e,w(t))},f=function(e,t){return(0,r.zG)(e,S(t))},p=function(e,t){return(0,r.zG)(e,x(t))},m=function(e,t){return(0,r.zG)(e,O(t))},h=function(e,t){return(0,r.zG)(e,T(t))},_=function(e,t){return(0,r.zG)(e,q(t))},v="Option",y=function(e){return{equals:function(t,n){return t===n||(B(t)?B(n):!B(n)&&e.equals(t.value,n.value))}}},b=function(e){return{equals:y(e).equals,compare:function(t,n){return t===n?0:R(t)?R(n)?e.compare(t.value,n.value):1:-1}}},w=function(e){return function(t){return B(t)?a:c(e(t.value))}},E={URI:v,map:g},k=c,S=function(e){return function(t){return B(t)||B(e)?a:c(t.value(e.value))}},P={URI:v,map:g,ap:f},C=function(e){return function(t){return B(t)?a:e(t.value)}},A=function(e){return function(t){return B(t)?e():t}},I=C(r.yR),L=(0,s.s4)(a,a),D=function(e){return B(e)?L:(0,s.s4)(l(e.value),d(e.value))},M={URI:v,compact:I,separate:D},x=function(e){return function(t){return B(t)?a:e(t.value)?t:a}},O=function(e){return function(t){return B(t)?a:e(t.value)}},T=function(e){return function(t){return(0,s.s4)(p(t,(0,o.ff)(e)),p(t,e))}},q=function(e){return(0,r.ls)(w(e),D)},G={URI:v,map:g,compact:I,separate:D,filter:p,filterMap:m,partition:h,partitionMap:_},U=d,R=i.pC,B=function(e){return"None"===e._tag},z=function(e,t){return function(n){return B(n)?e():t(n.value)}},j=z,F=j,W=function(e){return function(t){return B(t)?e():t.value}},N=I,K=function(e){return null==e?a:c(e)},$=function(e){try{return c(e())}catch(e){return a}};i.F4,i.Xl},7209:(e,t,n)=>{n.d(t,{Fp:()=>g,Uz:()=>a,VV:()=>d,Zt:()=>s,gf:()=>l,gt:()=>u,lt:()=>c,uZ:()=>f});var r=n(4268),i=n(3735),o=function(e){return function(t,n){return t===n||0===e(t,n)}},s=function(e){return{equals:o(e),compare:function(t,n){return t===n?0:e(t,n)}}},a=function(e){return function(t){return s((function(n,r){return t.compare(e(n),e(r))}))}},c=(i.W8,function(e){return function(t,n){return-1===e.compare(t,n)}}),u=function(e){return function(t,n){return 1===e.compare(t,n)}},l=function(e){return function(t,n){return-1!==e.compare(t,n)}},d=function(e){return function(t,n){return t===n||e.compare(t,n)<1?t:n}},g=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}},f=function(e){var t=d(e),n=g(e);return function(e,r){return function(i){return n(t(i,r),e)}}};r.w4.equals},6017:(e,t,n)=>{n.d(t,{ff:()=>r,xD:()=>i});n(3735);var r=function(e){return function(t){return!e(t)}},i=function(e){return function(t){return function(n){return t(n)&&e(n)}}}},3328:(e,t,n)=>{n.d(t,{DZ:()=>R,Eh:()=>V,Eq:()=>L,Ew:()=>b,JO:()=>E,Lx:()=>W,OE:()=>N,Od:()=>g,P5:()=>h,Su:()=>q,UI:()=>T,YM:()=>_,Z$:()=>v,ZN:()=>Y,bj:()=>P,cx:()=>y,f2:()=>w,hX:()=>G,hp:()=>S,iw:()=>$,j0:()=>ne,kp:()=>I,nI:()=>X,nq:()=>K,oR:()=>Z,pJ:()=>J,pR:()=>Q,qr:()=>k,t9:()=>C,u4:()=>F,uK:()=>B,vP:()=>H,xH:()=>O,xP:()=>j,xb:()=>d,yW:()=>te});var r=n(4268),i=n(3735),o=(n(7341),n(9384)),s=n(4011),a=n(7209),c=n(7241),u=n(4870),l=(n(5605),function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}),d=function(e){return 0===e.length},g=c.Od,f=(c.Ce,c.ws,c.R3);c.Im;var p=function(e,t){return function(n){return g(n)?t(n):e()}},m=c.dC;function h(e,t){return void 0===t?function(t){return h(e,t)}:m(e,t)?o.YP:o.G(t[e])}var _=function(e){return g(e)?o.G(c.YM(e)):o.YP},v=function(e){return g(e)?o.G(c.Z$(e)):o.YP};var y=function(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return o.G(n);return o.YP}};function b(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return o.G(t[n]);return o.YP}}var w=function(e){return function(t){for(var n=0;n<t.length;n++){var r=e(t[n]);if(o.pC(r))return r}return o.YP}};var E=function(e){return function(t){for(var n=t.length-1;n>=0;n--){var r=e(t[n]);if(o.pC(r))return r}return o.YP}},k=function(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return o.G(n);return o.YP}},S=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"Right"===r._tag&&t.push(r.right)}return t},P=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"Left"===r._tag&&t.push(r.left)}return t};function C(e){return function(t,n){if(void 0===n){var r=C(e);return function(e){return r(t,e)}}for(var i,o=0;o<n.length;o++)if(i=n[o],e.equals(i,t))return!0;return!1}}var A=function(e,t,n){return(0,i.zG)(e,F(t,n))},I=function(e,t){return(0,i.zG)(e,J(t))},L=function(e,t){return(0,i.zG)(e,Z(t))},D=c.of,M=function(){return ee},x=function(e){return function(t){return(0,i.zG)(t,function(e){return function(t){if(d(t))return ee;for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},O=x(i.yR),T=function(e){return function(t){return t.map((function(t){return e(t)}))}},q=function(e){return function(t){return t.map((function(t,n){return e(n,t)}))}},G=function(e){return function(t){return t.filter(e)}},U=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var i=e(r,t[r]);o.pC(i)&&n.push(i.value)}return n}},R=function(e){return U((function(t,n){return e(n)}))},B=(i.yR,function(e){return z((function(t,n){return e(n)}))}),z=function(e){return function(t){for(var n=[],r=[],i=0;i<t.length;i++){var o=t[i];e(i,o)?r.push(o):n.push(o)}return(0,u.s4)(n,r)}},j=function(e){return function(t){return function(n){return n.reduce((function(n,r,i){return e.concat(n,t(i,r))}),e.empty)}}},F=function(e,t){return N(e,(function(e,n,r){return t(n,r)}))},W=function(e){var t=j(e);return function(e){return t((function(t,n){return e(n)}))}},N=function(e,t){return function(n){for(var r=n.length,i=e,o=0;o<r;o++)i=t(o,i,n[o]);return i}},K=function(e,t){return $(e,(function(e,n,r){return t(n,r)}))},$=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},H=function(e){return function(t){return A(t,e.of(M()),(function(t,n){return e.ap(e.map(t,(function(e){return function(t){return(0,i.zG)(e,f(t))}})),n)}))}},Y=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},V=function(e){return(0,r.f7)((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},Q=function(e){return(0,a.Zt)((function(t,n){for(var r=t.length,i=n.length,o=Math.min(r,i),a=0;a<o;a++){var c=e.compare(t[a],n[a]);if(0!==c)return c}return s.Df.compare(r,i)}))},J=function(e){return function(t){for(var n=l([],e(t),!0),r=[];n.length>0;){var i=n.shift();o.nM(i)?n.unshift.apply(n,e(i.left)):r.push(i.right)}return r}},Z=function(e){return function(t){var n=e(t),r=[],i=[];function s(t){o.nM(t)?e(t.left).forEach((function(e){return r.push(e)})):i.push(t.right)}for(var a=0,c=n;a<c.length;a++){s(c[a])}for(;r.length>0;)s(r.shift());return i}},X=(c.oo,function(e){return d(e)?ee:e.slice()}),ee=c.cS;function te(e){return function(t){return t.every(e)}}var ne=function(e){var t=c.j0(e);return function(n){return p((function(){return e.empty}),t(n))}};o.F4,c.w6,c.QI,c.Ss},7241:(e,t,n)=>{n.d(t,{R3:()=>_,Im:()=>h,ur:()=>j,QI:()=>W,cS:()=>d,Lx:()=>I,xP:()=>M,Eh:()=>q,ZN:()=>T,ru:()=>E,vM:()=>k,YM:()=>G,j0:()=>F,Od:()=>g,dC:()=>f,Z$:()=>R,Fp:()=>z,VV:()=>B,of:()=>C,Ce:()=>m,ws:()=>p,w6:()=>b,u4:()=>A,nq:()=>L,iw:()=>x,OE:()=>D,Ss:()=>N,oo:()=>v,Ri:()=>S});var r,i=n(4268),o=n(3735),s=(n(7341),n(9384)),a=n(7209),c=function(e){return{concat:a.VV(e)}},u=function(e){return{concat:a.Fp(e)}};r=void 0;var l=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},d=s.Xl,g=s.Od,f=function(e,t){return e<0||e>=t.length},p=function(e){return function(t){return l([e],t,!0)}},m=p,h=function(e){return function(t){return l(l([],t,!0),[e],!1)}},_=h,v=function(e,t,n){if(g(n)){var r=s.r1(n);return r.splice(e,0,t),r}return[t]},y=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],i=1;i<n;i++)r.push(e(i));return r}},b=function(e,t){return e<=t?y((function(t){return e+t}))(t-e+1):[e]};function w(e,t){return t?e.concat(t):function(t){return t.concat(e)}}function E(e){return function(t){var n=t.length;if(0===n)return d;for(var r=[],i=t[0],o=[i],s=1;s<n;s++){var a=t[s];e.equals(a,i)?o.push(a):(r.push(o),o=[i=a])}return r.push(o),r}}var k=function(e){return function(t){for(var n={},r=0,i=t;r<i.length;r++){var o=i[r],a=e(o);s.e$.call(n,a)?n[a].push(o):n[a]=[o]}return n}};var S=function(e){for(var t=[e[0][0]],n=[e[0][1]],r=1;r<e.length;r++)t[r]=e[r][0],n[r]=e[r][1];return[t,n]},P=function(e){return function(t){for(var n=[e,t[0]],r=1;r<t.length;r++)n.push(e,t[r]);return n}},C=s.ri,A=function(e,t){return D(e,(function(e,n,r){return t(n,r)}))},I=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r){return e.concat(n,t(r))}),t(n[0]))}}},L=function(e,t){return x(e,(function(e,n,r){return t(n,r)}))},D=function(e,t){return function(n){return n.reduce((function(e,n,r){return t(r,e,n)}),e)}},M=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r,i){return e.concat(n,t(i+1,r))}),t(0,n[0]))}}},x=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},O=s.YM,T=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},q=function(e){return(0,i.f7)((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},G=(s.F4,O),U=s.Gb,R=function(e){return e[e.length-1]},B=function(e){var t=c(e);return function(e){return e.reduce(t.concat)}},z=function(e){var t=u(e);return function(e){return e.reduce(t.concat)}},j=function(e){return function(t){return t.reduce(e.concat)}},F=function(e){var t=j(e);return function(e){return(0,o.ls)(function(e){return function(t){var n=U(t);return g(n)?(0,o.zG)(n,P(e),m(G(t))):t}}(e),t)}};function W(e,t){return void 0===t?m(e):(0,o.zG)(t,m(e))}var N=function(e,t){return(0,o.zG)(e,w([t]))}},4923:(e,t,n)=>{n.d(t,{Bu:()=>h,CC:()=>R,DZ:()=>te,EW:()=>K,Eh:()=>le,G:()=>O,HA:()=>q,I8:()=>z,P5:()=>_,RF:()=>B,RJ:()=>F,SW:()=>H,Su:()=>y,UI:()=>b,Ub:()=>V,V_:()=>N,XP:()=>d,Yz:()=>D,_Y:()=>W,_r:()=>C,dp:()=>c,dx:()=>p,e$:()=>m,hX:()=>ee,jt:()=>I,kp:()=>U,mK:()=>Z,mS:()=>j,nn:()=>G,nr:()=>ge,nu:()=>$,oA:()=>ae,oh:()=>ce,qS:()=>J,ri:()=>S,sq:()=>M,t9:()=>T,tV:()=>re,uK:()=>ne,uZ:()=>de,vA:()=>Q,vP:()=>P,xb:()=>u,yW:()=>x,z7:()=>L,zV:()=>Y});var r=n(4268),i=n(3735),o=n(9384),s=n(4870),a=n(2751),c=(n(5605),function(e){return Object.keys(e).length}),u=function(e){for(var t in e)if(o.e$.call(e,t))return!1;return!0},l=function(e){return function(t){return Object.keys(t).sort(e.compare)}},d=l(a.Df);function g(e){if("function"==typeof e)return g(a.Df)(e);var t=l(e);return function(e){return function(n){for(var r=[],i=0,o=t(n);i<o.length;i++){var s=o[i];r.push(e(s,n[s]))}return r}}}var f=g(a.Df)((function(e,t){return[e,t]}));var p=function(e,t){return function(n){if(o.e$.call(n,e)&&n[e]===t)return n;var r=Object.assign({},n);return r[e]=t,r}},m=function(e,t){return o.e$.call(t,e)};function h(e){return function(t,n){if(void 0===n){var r=h(e);return function(e){return r(e,t)}}for(var i in t)if(!o.e$.call(n,i)||!e.equals(t[i],n[i]))return!1;return!0}}function _(e,t){return void 0===t?function(t){return _(e,t)}:o.e$.call(t,e)?o.G(t[e]):o.YP}var v={};function y(e){return function(t){var n={};for(var r in t)o.e$.call(t,r)&&(n[r]=e(r,t[r]));return n}}function b(e){return y((function(t,n){return e(n)}))}function w(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return w(a.Df).apply(void 0,e);var n=l(e[0]);return function(e,t){return function(r){for(var i=e,o=n(r),s=o.length,a=0;a<s;a++){var c=o[a];i=t(c,i,r[c])}return i}}}function E(e){if("compare"in e){var t=l(e);return function(e){return function(n){return function(r){for(var i=e.empty,o=t(r),s=o.length,a=0;a<s;a++){var c=o[a];i=e.concat(i,n(c,r[c]))}return i}}}}return E(a.Df)(e)}function k(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return k(a.Df).apply(void 0,e);var n=l(e[0]);return function(e,t){return function(r){for(var i=e,o=n(r),s=o.length-1;s>=0;s--){var a=o[s];i=t(a,r[a],i)}return i}}}var S=function(e,t){var n;return(n={})[e]=t,n};function P(e){return Z(a.Df)(e)}function C(e){return function(t){var n={},r={};for(var i in t)if(o.e$.call(t,i)){var a=e(i,t[i]);switch(a._tag){case"Left":n[i]=a.left;break;case"Right":r[i]=a.right}}return(0,s.s4)(n,r)}}function A(e){return function(t){var n={},r={};for(var i in t)if(o.e$.call(t,i)){var a=t[i];e(i,a)?r[i]=a:n[i]=a}return(0,s.s4)(n,r)}}function I(e){return function(t){var n={};for(var r in t)if(o.e$.call(t,r)){var i=e(r,t[r]);o.pC(i)&&(n[r]=i.value)}return n}}function L(e){return function(t){var n={},r=!1;for(var i in t)if(o.e$.call(t,i)){var s=t[i];e(i,s)?n[i]=s:r=!0}return r?n:t}}var D=f,M=function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];t[i[0]]=i[1]}return t};function x(e){return function(t){for(var n in t)if(!e(t[n]))return!1;return!0}}function O(e){return function(t){for(var n in t)if(e(t[n]))return!0;return!1}}function T(e){return function(t,n){if(void 0===n){var r=T(e);return function(e){return r(t,e)}}for(var i in n)if(e.equals(n[i],t))return!0;return!1}}var q=function(e,t){return(0,i.zG)(e,b(t))},G=function(e,t){return(0,i.zG)(e,y(t))},U=function(e){var t=ie(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},R=function(e){return function(t){var n=oe(e)(t);return function(e,t){return(0,i.zG)(e,n(t))}}},B=function(e){var t=se(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},z=function(e,t){return(0,i.zG)(e,ee(t))},j=function(e,t){return(0,i.zG)(e,te(t))},F=function(e,t){return(0,i.zG)(e,ne(t))},W=function(e,t){return(0,i.zG)(e,re(t))},N=function(e){var t=w(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},K=function(e){var t=E(e);return function(e){var n=t(e);return function(e,t){return(0,i.zG)(e,n(t))}}},$=function(e){var t=k(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},H=function(e,t){return(0,i.zG)(e,C(t))},Y=function(e,t){return(0,i.zG)(e,A(t))},V=function(e,t){return(0,i.zG)(e,I(t))},Q=function(e,t){return(0,i.zG)(e,L(t))},J=function(e){var t=X(e);return function(e){var n=t(e);return function(e,t){return n(e,(0,i.ls)(i.SK,t))}}},Z=function(e){var t=J(e);return function(e){var n=t(e);return function(e){return n(e,i.yR)}}},X=function(e){return function(t){var n=l(e);return function(e,r){var i=n(e);if(0===i.length)return t.of(v);for(var o=t.of({}),s=function(n){o=t.ap(t.map(o,(function(e){return function(t){var r;return Object.assign({},e,((r={})[n]=t,r))}})),r(n,e[n]))},a=0,c=i;a<c.length;a++){s(c[a])}return o}}},ee=function(e){return L((function(t,n){return e(n)}))},te=function(e){return I((function(t,n){return e(n)}))},ne=function(e){return A((function(t,n){return e(n)}))},re=function(e){return C((function(t,n){return e(n)}))};function ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=w(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return ie(a.Df).apply(void 0,e)}function oe(e){if("compare"in e){var t=E(e);return function(e){var n=t(e);return function(e){return n((function(t,n){return e(n)}))}}}return oe(a.Df)(e)}function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=k(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return se(a.Df).apply(void 0,e)}var ae=function(e){var t={};for(var n in e)if(o.e$.call(e,n)){var r=e[n];o.pC(r)&&(t[n]=r.value)}return t},ce=function(e){var t={},n={};for(var r in e)if(o.e$.call(e,r)){var i=e[r];o.nM(i)?t[r]=i.left:n[r]=i.right}return(0,s.s4)(t,n)},ue="ReadonlyRecord";function le(e){var t=h(e);return(0,r.f7)((function(e,n){return t(e)(n)&&t(n)(e)}))}function de(e){return{concat:function(t,n){if(u(t))return n;if(u(n))return t;var r=Object.assign({},t);for(var i in n)o.e$.call(n,i)&&(r[i]=o.e$.call(t,i)?e.concat(t[i],n[i]):n[i]);return r},empty:v}}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;function ge(e,t){return o.e$.call(void 0===t?this:t,e)}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df},7927:(e,t,n)=>{n.d(t,{UI:()=>u,XP:()=>a,dx:()=>c,hX:()=>b,xb:()=>o});var r=n(4923),i=n(2751),o=(n(5605),r.dp,r.xb),s=function(e){return function(t){return Object.keys(t).sort(e.compare)}},a=s(i.Df);var c=r.dx;r.e$;r.Bu,r.P5,r.Su;var u=r.UI;r.ri;function l(e){return r.vP(e)}r._r;r.jt;r.yW,r.G,r.t9;var d=r.HA,g=(r.nn,r.kp),f=r.CC,p=r.RF,m=(r.I8,r.mS,r.RJ,r._Y,r.V_),h=r.EW,_=r.nu,v=(r.SW,r.zV,r.Ub,r.vA,r.qS),y=(r.mK,function(e){return function(t){var n=s(e);return function(e,r){var i=n(e);if(0===i.length)return t.of({});for(var o=t.of({}),s=function(n){o=t.ap(t.map(o,(function(e){return function(t){return e[n]=t,e}})),r(n,e[n]))},a=0,c=i;a<c.length;a++){s(c[a])}return o}}}),b=r.hX;r.DZ,r.uK,r.tV;r.oA,r.oh;var w="Record";r.Eh,r.uZ,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,r.nr,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df},2197:(e,t,n)=>{n.d(t,{ff:()=>r});var r=function(e){return function(t){return!e(t)}}},4870:(e,t,n)=>{n.d(t,{Pd:()=>i,s4:()=>r});n(3735);var r=function(e,t){return{left:e,right:t}},i=function(e,t){return function(n){return r(e(o(n)),t(s(n)))}},o=function(e){return e.left},s=function(e){return e.right}},7407:(e,t,n)=>{n.d(t,{qA:()=>b,Hi:()=>y,qo:()=>w,dO:()=>_,UA:()=>E,PM:()=>v,ak:()=>I,YO:()=>A,tS:()=>m,mU:()=>S,At:()=>C,tD:()=>c,UI:()=>g,of:()=>p,RD:()=>O,oE:()=>q,uU:()=>x,pE:()=>T});var r=n(6862),i=n(3735);function o(e,t){var n=(0,r.m)(t);return function(t){return n((0,i.ls)(t,e.fromIO))}}var s=n(7341),a=n(9384),c=function(e){return function(){return Promise.resolve().then(e)}};var u=function(e,t){return(0,i.zG)(e,g(t))},l=function(e,t){return(0,i.zG)(e,f(t))},d=function(e,t){return(0,i.zG)(e,m(t))},g=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},f=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},p=function(e){return function(){return Promise.resolve(e)}},m=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},h="Task";var _={URI:h,map:u},v={URI:h,of:p},y={URI:h,map:u,ap:l},b={URI:h,map:u,ap:l,of:p},w={URI:h,map:u,ap:l,chain:d},E={URI:h,map:u,of:p,ap:l,chain:d},k=i.yR,S=(0,r.m)(w),P={URI:h,fromIO:c},C=o(P,w),A=(a.F4,(0,s.YO)(_)),I=(0,r.a)(w),L=p(a.Xl),D=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,n){return Promise.resolve().then((function(){return e(n,t)()}))})))}}}(e);return function(e){return a.Od(e)?t(e):L}},M=function(e){var t=function(e){return function(t){return function(){return a.Gb(t).reduce((function(t,n,r){return t.then((function(t){return Promise.resolve().then(e(r+1,n)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,a.YM(t))).then(a.ri))}}}(e);return function(e){return a.Od(e)?t(e):L}},x=function(e){return D((function(t,n){return e(n)}))},O=x(i.yR),T=function(e){return M((function(t,n){return e(n)}))},q={URI:h,map:u,of:p,ap:l,chain:d,fromIO:c,fromTask:k}},6934:(e,t,n)=>{n.d(t,{Do:()=>me,ak:()=>he,tS:()=>ie,fX:()=>ge,wE:()=>pe,Zl:()=>oe,Uo:()=>F,tD:()=>z,fF:()=>j,fS:()=>K,t$:()=>q,UI:()=>ee,Vn:()=>ne,EQ:()=>W,LV:()=>N,vx:()=>H,F2:()=>G,Ij:()=>_e,Y3:()=>$});var r=n(6862),i=n(1828),o=n(365),s=n(3735),a=n(7341);function c(e){return(0,s.ls)(o.F2,e.of)}function u(e){return(0,s.ls)(o.t$,e.of)}function l(e){return function(t){return e.map(t,o.F2)}}function d(e){return function(t){return e.map(t,o.t$)}}function g(e){return function(t){return(0,s.ls)(o.ij(t),e.of)}}function f(e){var t=g(e);return function(e){var n=t(e);return function(e){return(0,s.ls)(e,n)}}}function p(e){var t=_(e),n=f(e);return function(e){var r=n(e);return function(e){return t(r(e))}}}function m(e){return(0,a.UI)(e,o.dO)}function h(e){return(0,i.ap)(e,o.G5)}function _(e){return function(t){return function(n){return e.chain(n,(function(n){return o.nM(n)?e.of(n):t(n.right)}))}}}function v(e){return function(t){return function(n){return e.chain(n,(function(n){return o.nM(n)?t():e.of(n)}))}}}function y(e){return function(t,n){return function(r){return e.map(r,o.Pd(t,n))}}}function b(e){return function(t){return function(n){return e.map(n,o.Vn(t))}}}function w(e){return function(t,n){return function(r){return e.map(r,o.EQ(t,n))}}}function E(e){return function(t,n){return function(r){return e.chain(r,o.EQ(t,n))}}}function k(e){return function(t){return function(n){return e.chain(n,o.EQ(t,e.of))}}}function S(e){return function(t){return function(n){return e.chain(n,(function(n){return o.nM(n)?t(n.left):e.of(n)}))}}}function P(e){var t=S(e);return function(n){return t((function(t){return e.map(n(t),(function(e){return o.nM(e)?e:o.t$(t)}))}))}}function C(e){return function(t){return function(n){return e.chain(n,o.EQ((function(n){return e.map(t(n),o.t$)}),(function(t){return e.of(o.F2(t))})))}}}function A(e){return function(t){return e.map(t,o.LF)}}function I(e){return function(t){return e.map(t,o.i$)}}var L=n(2690),D=n(9679),M=n(9384),x=n(7407),O=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},T=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},q=u(x.PM),G=c(x.PM),U=l(x.dO),R=d(x.dO),B=(0,s.ls)(x.tD,U),z=(x.tD,B),j=U,F=x.of,W=(x.tD,w(x.dO)),N=E(x.UA),K=k(x.UA),$=function(e,t){return function(){return O(void 0,void 0,void 0,(function(){var n;return T(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e().then(M.F2)];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,M.t$(t(n))];case 3:return[2]}}))}))}},H=(x.dO,x.PM,x.PM,x.UA,S(x.UA)),Y=(x.UA,x.UA,x.dO,function(e,t){return(0,s.zG)(e,ee(t))}),V=function(e,t){return(0,s.zG)(e,re(t))},Q=function(e,t){return(0,s.zG)(e,ie(t))},J=function(e,t,n){return(0,s.zG)(e,te(t,n))},Z=function(e,t){return(0,s.zG)(e,ne(t))},X=function(e,t){return(0,s.zG)(e,se(t))},ee=m(x.dO),te=y(x.dO),ne=b(x.dO),re=h(x.Hi),ie=_(x.UA),oe=ie,se=v(x.UA),ae=G,ce=q,ue="TaskEither";var le={URI:ue,map:Y,ap:V,chain:Q},de={URI:ue,fromEither:F},ge=(0,L.fX)(de,le),fe={URI:ue,fromIO:z,fromTask:j},pe=(0,D.oU)(fe,le);var me=ae(M.F4),he=(0,r.a)(le),_e=(M.Xl,{URI:ue,bimap:J,mapLeft:Z,map:Y,of:ae,ap:V,chain:Q,alt:X,fromIO:z,fromTask:j,throwError:ce})},5605:(e,t,n)=>{function r(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.separate)}}}function i(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.compact)}}}n.d(t,{BL:()=>i,Fj:()=>r})},3735:(e,t,n)=>{n.d(t,{MZ:()=>i,Q1:()=>c,SK:()=>g,W8:()=>s,a9:()=>o,bc:()=>l,gn:()=>a,ls:()=>u,yR:()=>r,zG:()=>d});function r(e){return e}var i=r;function o(e){return function(){return e}}var s=o(!0),a=o(null),c=o(void 0);function u(e,t,n,r,i,o,s,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return o(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(o(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return a(s(o(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(s(o(i(r(n(t(e.apply(this,arguments)))))))))}}}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function d(e,t,n,r,i,o,s,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return o(i(r(n(t(e)))));case 7:return s(o(i(r(n(t(e))))));case 8:return a(s(o(i(r(n(t(e)))))));case 9:return c(a(s(o(i(r(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var g=function(e,t){return t}},9384:(e,t,n)=>{n.d(t,{F2:()=>d,F4:()=>_,G:()=>a,Gb:()=>m,Od:()=>f,Wi:()=>i,Xl:()=>h,YM:()=>p,YP:()=>s,e$:()=>v,nM:()=>c,pC:()=>o,r1:()=>y,ri:()=>g,t$:()=>l,tO:()=>u});var r=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=function(e){return"None"===e._tag},o=function(e){return"Some"===e._tag},s={_tag:"None"},a=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},d=function(e){return{_tag:"Right",right:e}},g=function(e){return[e]},f=function(e){return e.length>0},p=function(e){return e[0]},m=function(e){return e.slice(1)},h=[],_={},v=Object.prototype.hasOwnProperty,y=function(e){return r([e[0]],e.slice(1),!0)}},4011:(e,t,n)=>{n.d(t,{Df:()=>i,Eq:()=>r});var r={equals:function(e,t){return e===t}},i={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};r.equals,i.compare},2751:(e,t,n)=>{n.d(t,{Df:()=>i,Eq:()=>r,pn:()=>s,xb:()=>o});var r={equals:function(e,t){return e===t}},i={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},o=function(e){return 0===e.length},s=function(e,t){return function(n){return n.endsWith(e,t)}}},4386:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(477),i=n.n(r);function o(){return i()('/*! permutive-javascript-sdk v19.97.7 (web) (built 2023-09-21T09:52:11.940Z) */(()=>{"use strict";function e(e){return e}function n(e){return function(){return e}}var r=n(void 0);function t(e,n,r,t,i,o,a,s,c){switch(arguments.length){case 1:return e;case 2:return function(){return n(e.apply(this,arguments))};case 3:return function(){return r(n(e.apply(this,arguments)))};case 4:return function(){return t(r(n(e.apply(this,arguments))))};case 5:return function(){return i(t(r(n(e.apply(this,arguments)))))};case 6:return function(){return o(i(t(r(n(e.apply(this,arguments))))))};case 7:return function(){return a(o(i(t(r(n(e.apply(this,arguments)))))))};case 8:return function(){return s(a(o(i(t(r(n(e.apply(this,arguments))))))))};case 9:return function(){return c(s(a(o(i(t(r(n(e.apply(this,arguments)))))))))}}}function i(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e}function o(e,n,r,t,i,o,a,s,c){switch(arguments.length){case 1:return e;case 2:return n(e);case 3:return r(n(e));case 4:return t(r(n(e)));case 5:return i(t(r(n(e))));case 6:return o(i(t(r(n(e)))));case 7:return a(o(i(t(r(n(e))))));case 8:return s(a(o(i(t(r(n(e)))))));case 9:return c(s(a(o(i(t(r(n(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var a=function(e,n,r){if(r||2===arguments.length)for(var t,i=0,o=n.length;i<o;i++)!t&&i in n||(t||(t=Array.prototype.slice.call(n,0,i)),t[i]=n[i]);return e.concat(t||Array.prototype.slice.call(n))},s=function(e){return"Some"===e._tag},c={_tag:"None"},u=function(e){return{_tag:"Some",value:e}},l=function(e){return"Left"===e._tag},g=Object.prototype.hasOwnProperty,f=function(e){return a([e[0]],e.slice(1),!0)},d=function(e){return function(n){return!e(n)}};var m=c,p=u;function y(e){return function(n){return e(n)?p(n):m}}var b=function(e){return"Left"===e._tag?m:p(e.right)},w=function(e,n){return o(e,A(n))},h=function(e,n){return o(e,C(n))},E="Option",v=function(e){return{equals:function(n,r){return n===r||(I(n)?I(r):!I(r)&&e.equals(n.value,r.value))}}},L=function(e){return{equals:v(e).equals,compare:function(n,r){return n===r?0:x(n)?x(r)?e.compare(n.value,r.value):1:-1}}},A=function(e){return function(n){return I(n)?m:p(e(n.value))}},C=function(e){return function(n){return I(n)||I(e)?m:p(n.value(e.value))}},k={URI:E,map:w,ap:h},S=function(e){return function(n){return I(n)?m:e(n.value)}},P=function(e){return function(n){return I(n)?e():n}},q=b,x=s,I=function(e){return"None"===e._tag},M=function(e,n){return function(r){return I(r)?e():n(r.value)}},_=M,T=_,G=function(e){return function(n){return I(n)?e():n.value}};function B(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}const F=()=>({kind:"null",value:null}),D=e=>({kind:"string",value:e}),R=e=>({kind:"number",value:e}),U=e=>({kind:"array",value:e}),N=e=>({kind:"object",value:e}),O=e=>e,H=()=>({kind:"bottom"}),W=e=>({kind:"inner",a:e}),z=e=>({kind:"top",error:e}),j=e=>({kind:"unbounded",group:e}),V=(e,n)=>({kind:"windowed",key:n,group:e}),K=(e,n,r)=>({kind:"countLimit",n:r,limit:n,group:e}),J=(e,n,r)=>({kind:"uniqueLimit",n:r,limit:n,group:e}),Y=e=>({kind:"numberGroup",group:e}),$=e=>({kind:"stringGroup",group:e}),Q=e=>({kind:"tuple",tuple:e}),X=e=>({state:e}),Z=(e,n)=>({commands:e,payload:n});var ee=function(e){return{equals:function(n,r){return n===r||e(n,r)}}},ne=function(e){return ee((function(n,r){for(var t in e)if(!e[t].equals(n[t],r[t]))return!1;return!0}))},re=function(e){return function(n,r){return n===r||0===e(n,r)}},te=function(e){return{equals:re(e),compare:function(n,r){return n===r?0:e(n,r)}}},ie=function(e){return function(n){return te((function(r,t){return n.compare(e(r),e(t))}))}},oe=function(e){return function(n,r){return-1===e.compare(n,r)}},ae=function(e){return function(n,r){return 1===e.compare(n,r)}},se=function(e){return function(n,r){return n===r||e.compare(n,r)<1?n:r}},ce=function(e){return function(n,r){return n===r||e.compare(n,r)>-1?n:r}};var ue={equals:function(e,n){return e===n}},le={equals:ue.equals,compare:function(e,n){return e<n?-1:e>n?1:0}};const ge=(e,n)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return W(n(e.a));case"top":return z(e.error)}},fe=e=>te(((n,r)=>{if("bottom"===n.kind&&"bottom"===r.kind)return 0;if("bottom"===n.kind)return-1;if("bottom"===r.kind)return 1;if("top"===n.kind&&"top"===r.kind)return le.compare(n.error,r.error);if("top"===n.kind)return 1;if("top"===r.kind)return-1;if("inner"===n.kind&&"inner"===r.kind)return e.compare(n.a,r.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var de;de=void 0;var me=function(e){return e[0]},pe=me;var ye=function(e,n,r){if(r||2===arguments.length)for(var t,i=0,o=n.length;i<o;i++)!t&&i in n||(t||(t=Array.prototype.slice.call(n,0,i)),t[i]=n[i]);return e.concat(t||Array.prototype.slice.call(n))},be=function(e){return e.length>0},we=function(e,n){return e<0||e>=n.length},he=function(e){return function(n){return ye([e],n,!0)}},Ee=he,ve=function(e){return function(n){return ye(ye([],n,!0),[e],!1)}},Le=ve,Ae=f,Ce=function(e){return be(e)?u(e):c},ke=function(e){return function(n){for(var r=Math.max(0,Math.floor(n)),t=[e(0)],i=1;i<r;i++)t.push(e(i));return t}};var Se=Ae,Pe=function(e,n,r){for(var t=[r(e[0],n[0])],i=Math.min(e.length,n.length),o=1;o<i;o++)t[o]=r(e[o],n[o]);return t};var qe=function(e){return function(n){var r=Math.max(1,e);return r>=n.length?[Se(n),[]]:[o(n.slice(1,r),Ee(Ie(n))),n.slice(r)]}},xe=function(e){return ee((function(n,r){return n.length===r.length&&n.every((function(n,t){return e.equals(n,r[t])}))}))},Ie=pe;var Me={equals:function(e,n){return e===n}},_e={equals:Me.equals,compare:function(e,n){return e<n?-1:e>n?1:0}};function Te(e){return function(n,r){if(void 0===r){var t=Te(e);return function(e){return t(n,e)}}for(var i,o=0;o<r.length;o++)if(i=r[o],e.equals(i,n))return!0;return!1}}var Ge=function(e,n){return function(r){for(var t=r.length,i=e,o=0;o<t;o++)i=n(o,i,r[o]);return i}};var Be=function(e){return 0===e.length},Fe=be,De=Ee,Re=Le,Ue=function(e,n){return e<=0?[]:ke(n)(e)};var Ne=we,Oe=function(e){return function(n){return Ne(e,n)?je(n):n.slice(0,e)}};var He=function(e,n){for(var r=e.length,t=0;t<r&&n(e[t]);t++);return t};function We(e){return function(n){var r=$e(He(n,e))(n);return{init:r[0],rest:r[1]}}}var ze=function(e){return function(n){return e<=0||Be(n)?je(n):e>=n.length?[]:n.slice(e,n.length)}};var je=function(e){return e.slice()},Ve=function(e){return Be(e)?[]:e.slice().reverse()},Ke=function(e){return function(n){return n.length<=1?je(n):n.slice().sort(e.compare)}},Je=function(e,n,r){for(var t=[],i=Math.min(e.length,n.length),o=0;o<i;o++)t[o]=r(e[o],n[o]);return t};var Ye=Te,$e=function(e){return function(n){return e>=1&&Fe(n)?qe(e)(n):Be(n)?[je(n),[]]:[[],je(n)]}};function Qe(e){var n=Ye(e);return function(r,t){if(void 0===t){var i=Qe(e);return function(e){return i(e,r)}}return r.filter((function(e){return!n(e,t)}))}}var Xe=function(e){return function(n){return o(n,function(e){return function(n){for(var r=[],t=0;t<n.length;t++)r.push.apply(r,e(t,n[t]));return r}}((function(n,r){return e(r)})))}},Ze=function(e){return function(n){for(var r=[],t=0;t<n.length;t++){var i=e(t,n[t]);s(i)&&r.push(i.value)}return r}},en=function(e){return Ze((function(n,r){return e(r)}))},nn=en(e),rn=Ge,tn=function(e){var n=on(e);return function(e){return n((function(n,r){return e(r)}))}},on=function(e){return function(n){return rn(e.of([]),(function(r,t,i){return e.ap(e.map(t,(function(e){return function(n){return o(e,Re(n))}})),n(r,i))}))}},an=function(e){return te((function(n,r){for(var t=n.length,i=r.length,o=Math.min(t,i),a=0;a<o;a++){var s=e.compare(n[a],r[a]);if(0!==s)return s}return _e.compare(t,i)}))},sn=function(e){return{_tag:"Left",left:e}},cn=function(e){return{_tag:"Right",right:e}},un=function(e,n){return o(e,fn(n))},ln=function(e,n){return o(e,mn(n))},gn="Either",fn=function(e){return function(n){return yn(n)?n:cn(e(n.right))}},dn=cn,mn=function(e){return function(n){return yn(n)?n:yn(e)?e:cn(n.right(e.right))}},pn={URI:gn,map:un,ap:ln,of:dn},yn=l,bn=function(e){return function(n){return yn(n)?e(n.left):n.right}},wn=bn,hn=function(e,n){try{return cn(e())}catch(e){return sn(n(e))}};var En=function(e){return-1===e?1:1===e?-1:0};function vn(e,n){return nn(e.map(n))}function Ln(e,n,r,t){const i=(e,n)=>{if(0===e.length)return nn(n.map((e=>p({1:e[1],2:r(m,p(e[2]))}))));if(0===n.length)return nn(e.map((e=>p({1:e[1],2:r(p(e[2]),m)}))));if(e.length>0&&n.length>0&&oe(t)(e[0][1],n[0][1])){const[t,...o]=e,a=t[1],s=t[2];return De({1:a,2:r(p(s),m)})(i(o,n))}if(e.length>0&&n.length>0&&ae(t)(e[0][1],n[0][1])){const[t,...o]=n,a=t[1],s=t[2];return De({1:a,2:r(m,p(s))})(i(e,o))}if(e.length>0&&n.length>0){const[t,...o]=e,[a,...s]=n,c=t[1],u=t[2],l=a[2];return De({1:c,2:r(p(u),p(l))})(i(o,s))}throw new Error("Non exhaustive match in mapOption2")},o=ie((e=>e[1]))(t),a=(e=>{const n=vn(e,(e=>x(e[2])?p({1:e[1],2:e[2].value}):m));return 0===n.length?m:p(n)})(i(Ke(o)([...e].map((e=>({1:e[0],2:e[1]})))),Ke(o)([...n].map((e=>({1:e[0],2:e[1]}))))));return A((e=>new Map(e.map((e=>[e[1],e[2]])))))(a)}function An(e,n,r,t){const i=ie((e=>e[0]))(t),o=Ke(i)([...n]).reduceRight(((e,n)=>{if(yn(e)){const t=r(n[1],e.left);return x(t)?sn(t.value):cn(n[0])}return e}),sn(e));return q(o)}function Cn(e,n){return new Map([...e].map(n))}function kn(e,n){return new Map([...e].filter(n))}function Sn(e){return JSON.stringify(Pn(e))}function Pn(e){switch(e.kind){case"null":return In.encode(e);case"string":return Mn.encode(e);case"number":return _n.encode(e);case"array":return Tn.encode(e);case"object":return Gn.encode(e)}}function qn(e){return null===e?In.decode(e):"number"==typeof e?_n.decode(e):"string"==typeof e?Mn.decode(e):Array.isArray(e)?Tn.decode(e):Gn.decode(e)}const xn=(e,n)=>sn(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${n}`),In={encode:e=>null,decode:e=>null===e?cn({kind:"null",value:null}):xn(e,"SimpleNull")},Mn={encode:e=>e.value,decode:e=>"string"==typeof e?cn(D(e)):xn(e,"SimpleString")},_n={encode:e=>e.value,decode:e=>"number"==typeof e?cn(R(e)):xn(e,"SimpleNumber")},Tn={encode:e=>e.value.map(Pn),decode:e=>{if(Array.isArray(e)){const n=tn(pn)(qn)(e);return fn(U)(n)}return xn(e,"SimpleArray")}},Gn={encode:e=>{const n=[...e.value.entries()];return Object.assign({},...Array.from(n,(([e,n])=>({[e]:Pn(n)}))))},decode:e=>{if(e&&e.constructor===Object){const n=tn(pn)((([e,n])=>o(qn(n),fn((n=>i(e,n))))))(Object.entries(e));return fn((e=>N(new Map([...e]))))(n)}return xn(e,"SimpleObject")}};function Bn(e){return o(e,Dn,A(Sn),G((()=>"<encode error>")))}function Fn(e){return A(Wn)(function(e){switch(e.state.kind){case"top":return p(D(e.state.error));case"bottom":return m;case"inner":return Dn(e.state.a)}}(e))}function Dn(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return Rn(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?p(U(function(e,n){const r=A((e=>De(e)(n)))(e);return G((()=>n))(r)}(A((e=>D(function(e){const n=e=>_((()=>""),(e=>"b"+JSON.stringify(e)))(e.bound),r=e=>{switch(e.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},t=e=>{const t=n(e[1])+r(e[1]);return 1===e[2]?t:t+JSON.stringify(e[2])};return e.map(t).join("")}(e))))(e.commands),function(e){const n=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return D(e.error);case"inner":return R(e.a)}},r=e=>vn([Un,Nn,e=>o(e,Hn,N,p)],(n=>n(e))),t=e=>vn([Un,On,e=>o(e,Hn,(e=>Cn(e,(([e,n])=>[JSON.stringify(e),n]))),N,p)],(n=>n(e)));switch(e.kind){case"tuple":return e.tuple.map(n);case"stringGroup":return r(e.group);case"numberGroup":return t(e.group)}}(e.payload)))):m}function Rn(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||x(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||x(e.limit)}}function Un(e){switch(e.kind){case"unbounded":return m;case"windowed":return p(D("w"));case"countLimit":return p(D(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return p(D(1===e.n?"u":`u${e.n}`))}}function Nn(e){switch(e.kind){case"unbounded":return m;case"windowed":return p(D(x(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return p(D(x(e.limit)?e.limit.value:""))}}function On(e){switch(e.kind){case"unbounded":return m;case"windowed":return x(e.key)?p(R(e.key.value)):p({kind:"null",value:null});case"countLimit":case"uniqueLimit":return x(e.limit)?p(R(e.limit.value)):p({kind:"null",value:null})}}function Hn(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function Wn(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?Wn(e.value[0]):U(e.value.map(Wn));case"object":return o(kn(e.value,(([e,n])=>"null"!==n.kind)),(e=>Cn(e,(e=>[e[0],Wn(e[1])]))),N);default:return e}}function zn(e){const n=e=>{if(0===e.length)return{kind:"bottom"};const n=(e=>{if(4!==e.length)return m;const[n,r,t,i]=e;if("string"===n.kind&&"string"===r.kind&&"object"===i.kind){const e=y((e=>jn(e[1].value)&&Vn(e[2].value)))({1:n,2:r});return A((e=>({prim:e[1].value,grp:e[2].value,cutoff:t,m:i.value})))(e)}return m})(e);if(x(n)){const{prim:e,grp:r,cutoff:t,m:i}=n.value,o=Kn(t,i,Jn(r));return"string"==typeof o?z(o):W(Z(Yn(e),o))}const r=(e=>{if(3!==e.length)return m;const[n,r,t]=e;if("string"===n.kind&&"object"===t.kind){const e=y((e=>Vn(e.value)))(n);return A((e=>({grp:e.value,cutoff:r,m:t.value})))(e)}return m})(e);if(x(r)){const{grp:e,cutoff:n,m:t}=r.value,i=Kn(n,t,Jn(e));return"string"==typeof i?z(i):W(Z(m,i))}const t=(e=>{if(2!==e.length)return m;const[n,r]=e;if("string"===n.kind&&"object"===r.kind){const e=y((e=>jn(e.value)))(n);return A((e=>({prim:e.value,m:r.value})))(e)}return m})(e);if(x(t)){const{prim:e,m:n}=t.value;return W(Z(Yn(e),$(j(n))))}const i=(e=>{if(1!==e.length)return m;const[n]=e;return"object"===n.kind?p({m:n.value}):m})(e);if(x(i)){const{m:e}=i.value;return W(Z(m,$(j(e))))}const o=(e=>{if(e.length<1)return m;const[n,...r]=e;if("string"===n.kind){const e=y((e=>jn(e.value)))(n);return A((e=>({prim:e.value,rest:r})))(e)}return m})(e);if(x(o)){const{prim:e,rest:n}=o.value;return W(Z(Yn(e),Qn(n)))}return W(Z(m,Qn(e)))},r=e=>"array"===e.kind?Xe(r)(e.value):[e];return"null"===e.kind?X({kind:"bottom"}):X(n(r(e)))}function jn(e){const n=e.split("");if(!0==(0===n.length))return!1;{const[e,...r]=n;return-1!=="bpmvn".indexOf(e)&&r.every((e=>-1!=="bpmvn0123456789.".indexOf(e)))}}function Vn(e){const n=e.split("");switch(!0){case 0===n.length:return!1;case"w"===n[0]&&void 0===n[1]:return!0;default:{const[e,...r]=n;return-1!=="ux".indexOf(e)&&-1===r.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function Kn(e,n,r){switch(e.kind){case"string":return $(r({1:p(e.value),2:n}));case"number":case"null":return Y(r({1:"null"===e.kind?m:p(e.value),2:kn(Cn(n,(([e,n])=>[Number(e),n])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function Jn(e){const n=e=>n=>J(n[2],n[1],e),r=e=>n=>K(n[2],n[1],e),t=e.split("");switch(!0){case"w"===t[0]&&void 0===t[1]:return e=>V(e[2],e[1]);case"u"===t[0]&&void 0===t[1]:return n(1);case"u"===t[0]&&void 0!==t[1]:return n(parseInt(t.slice(1).join("")));case"x"===t[0]&&void 0===t[1]:return r(1);case"x"===t[0]&&void 0!==t[1]:return r(parseInt(t.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function Yn(e){const n=e=>I(e.bound)||"add"===e.operation||"mul"===e.operation?p(e):m,r=(e,r,t)=>{const i=((e,r)=>o(e,(e=>{switch(e){case"p":return p("add");case"m":return p("mul");case"v":return p("max");case"n":return p("min");default:return m}}),A((e=>({operation:e,bound:r}))),S(n)))(e,t);return A((e=>{const{init:n,rest:t}=We((e=>{return"number"==typeof(n=parseInt(e))&&isFinite(n)&&Math.floor(n)===n;var n}))(r);return{1:{1:e,2:0===n.length?1:parseInt(n.join(""))},2:t.join("")}}))(i)};return A(O)(Ce($n(e,(e=>{const n=e.split("");if(0===n.length)return m;const[t,...i]=n;if("b"===t){const{init:e,rest:n}=o(i,We((e=>-1!=="1234567890.".indexOf(e))));if(0===e.length||0===n.length)return m;const t=parseFloat(e.join("")),[a,...s]=n;return r(a,s,p(t))}return r(t,i,m)}))))}function $n(e,n){const r=n(e);return G((()=>[]))(A((e=>[e[1]].concat($n(e[2],n))))(r))}function Qn(e){return Q(e.map(Xn))}function Xn(e){switch(e.kind){case"number":return W(e.value);case"string":return z(e.value);case"null":return{kind:"bottom"};case"object":return z("{object}");case"array":return z("{array}")}}function Zn(e,n,r){return function(t){for(var i=Array(r.length+1),o=0;o<r.length;o++)i[o]=r[o];return i[r.length]=t,0===n?e.apply(null,i):Zn(e,n-1,i)}}var er={1:function(e){return[e]},2:function(e){return function(n){return[e,n]}},3:function(e){return function(n){return function(r){return[e,n,r]}}},4:function(e){return function(n){return function(r){return function(t){return[e,n,r,t]}}}},5:function(e){return function(n){return function(r){return function(t){return function(i){return[e,n,r,t,i]}}}}}};function nr(e){return g.call(er,e)||(er[e]=Zn(i,e-1,[])),er[e]}function rr(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var t=n.length,i=nr(t),o=e.map(n[0],i),a=1;a<t;a++)o=e.ap(o,n[a]);return o}}const tr={strategy:(e,n,r)=>t=>{if(I(r))return n;if("delta"===e&&I(n))return m;if(I(n))return r;if(x(n)&&x(r))return t(n.value,r.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(n,r,i,a,s,c)=>{const u=an(fe(c)),l=o(r.bound,_((()=>e),(e=>n=>se(c)(s.fromNumber(e),n))));if("append"===n&&"add"===r.operation)return Je(i,a,gr("append",t(s.plus,l)));if("append"===n&&"mul"===r.operation)return Je(i,a,gr("append",t(s.times,l)));if("append"===n&&"max"===r.operation)return ce(u)(i,a);if("join"===n&&"add"===r.operation)return Je(i,a,gr("join",ce(c)));if("join"===n&&"mul"===r.operation)return Je(i,a,gr("join",ce(c)));if("join"===n&&"max"===r.operation)return ce(u)(i,a);if("min"===r.operation)return tr.operation(n,{operation:"max",bound:r.bound},i,a,s,function(e){return te(((n,r)=>En(e.compare(n,r))))}(c));if("delta"===n&&"max"===r.operation)return ae(u)(i,a)?i:a.map(H);if("delta"===n)return Je(i,a,((e,n)=>ae(fe(c))(e,n)?ge(e,l):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,n,r,t)=>{if("delta"===e&&"top"===r.kind&&"top"===t.kind)return ae(le)(r.error,t.error)?z(r.error):{kind:"bottom"};if("delta"===e&&"bottom"===t.kind)return r;if("delta"===e&&"bottom"===r.kind)return{kind:"bottom"};if("top"===r.kind&&"top"===t.kind)return z(ce(le)(r.error,t.error));if("top"===r.kind)return r;if("top"===t.kind)return t;if("inner"===r.kind&&"inner"===t.kind)return n(r.a,t.a);if("bottom"===r.kind)return t;if("bottom"===t.kind)return r;throw new Error("Non exhaustive match in extend")}},ir={fromNumber:e,plus:(e,n)=>e+n,times:(e,n)=>e*n};function or(e,n,r,t){if("unbounded"===e.kind&&"unbounded"===n.kind){const i=e.group,o=n.group;return G(H)(A((e=>W(j(e))))(Ln(i,o,r,t)))}if("windowed"===e.kind&&"windowed"===n.kind){const i=e.key,o=e.group,a=n.key,s=n.group,c=ce(L(t))(i,a);return G(H)(A((e=>W(V(e,c))))(Ln(o,s,r,t)))}if("countLimit"===e.kind&&"countLimit"===n.kind){const i=e.n,o=n.n;if(i===o){const o=e.limit,a=e.group,s=n.limit,c=n.group,u=ce(L(t))(o,s);return G(H)(A((e=>W(K(e,u,i))))(Ln(a,c,r,t)))}return z("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===n.kind){const i=e.n,o=n.n;if(i===o){const o=e.limit,a=e.group,s=n.limit,c=n.group,u=ce(L(t))(o,s);return G(H)(A((e=>W(J(e,u,i))))(Ln(a,c,r,t)))}return z("Non matching counts")}return z("Non matching group types")}function ar(e,n,r,t,i,o){const a=(e,n)=>({1:Oe(e)(n).concat(Ue(Math.max(0,e-n.length),H)),2:ze(e)(n)}),s=(n,r,t)=>{if(0===n.length)return tr.operation(e,{operation:"max",bound:m},r,t,i,o);if(n.length>0){const[c,...u]=n,l=a(c[2],r),g=l[1],f=l[2],d=a(c[2],t),m=d[1],p=d[2];return tr.operation(e,c[1],g,m,i,o).concat(s(u,f,p))}throw new Error("Non exhaustive match in recurse")};return Ve((c=e=>"bottom"===e.kind,function(e){return e.slice(He(e,c))})(Ve(s(n,r,t))));var c}function sr(e,n,r){return G(F)(cr(e,m)(n,r))}function cr(e,n){const r=n=>(r,t)=>tr.strategy(e,r,t)(cr(e,n)),t=(n,t,i)=>{if("stringGroup"===t.kind&&"stringGroup"===i.kind){const e=or(t.group,i.group,r(n),le);return ge(e,(e=>$(lr(e,le))))}if("numberGroup"===t.kind&&"numberGroup"===i.kind){const e=or(t.group,i.group,r(n),_e);return ge(e,(e=>Y(lr(e,_e))))}if("tuple"===t.kind&&"tuple"===i.kind){const r=x(n)?n.value:[];return W(Q(ar(e,r,t.tuple,i.tuple,ir,_e)))}throw new Error(`Non matching payload. Got ${t.kind} and ${i.kind}`)},i=(e,r)=>{if(v(xe(ne({1:ne({operation:ue,bound:v(Me)}),2:Me}))).equals(e.commands,r.commands)){const i=I(e.commands)?n:e.commands,o=t(i,e.payload,r.payload);return ge(o,(n=>Z(e.commands,n)))}if(i=e.commands,a=r.commands,v(xe(ne({1:ne({operation:ue}),2:Me}))).equals(i,a)){const i=o(((e,n)=>o(rr(k)(e,n),A((([e,n])=>Pe(e,n,((e,n)=>({1:{operation:e[1].operation,bound:o(rr(k)(e[1].bound,n[1].bound),A((([e,n])=>Math.min(e,n))),P((()=>e[1].bound)),P((()=>n[1].bound)))},2:e[2]})))))))(e.commands,r.commands),P((()=>n))),a=t(i,e.payload,r.payload);return ge(a,(e=>Z(i,e)))}throw new Error(`Non matching primitive strings. Got ${Bn(e)} and ${Bn(r)}`);var i,a};return(n,r)=>Fn(X(tr.extend(e,i,zn(n).state,zn(r).state)))}function ur(e,n,r){const t=A((n=>kn(e,(([e,t])=>function(e){return function(n,r){return-1!==e.compare(n,r)}}(r)(e,n)))))(n);return G((()=>e))(t)}function lr(e,n){switch(e.kind){case"unbounded":return e;case"windowed":return I(e.key)?e:V(ur(e.group,e.key,n),e.key);case"countLimit":{const r=e.limit,t=e.n,i=e.group,o=(e,n)=>n<=1?m:p(n-1),a=An(t,i,o,n),s=ce(L(n))(r,a);return K(ur(i,s,n),s,t)}case"uniqueLimit":{const r=e.limit,t=e.n,i=e.group,o=(e,n)=>{if("object"===e.kind){const r=[...e.value.keys(),...n.keys()],i=new Set(r);return i.size>=t?m:p(i)}return m},a=An(new Set,i,o,n),s=ce(L(n))(r,a);return J(ur(i,s,n),s,t)}}}function gr(e,n){return(r,t)=>tr.extend(e,((e,r)=>W(n(e,r))),r,t)}function fr(e,n){return sr("append",e,n)}function dr(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce(((e,n)=>Object.assign(Object.assign({},e),n)),{})}d((function(e){return 0===e.length}));function mr(e,n){const r=Object.keys(e),t=r.length,i={};for(let o=0;o<t;o++){const t=r[o],a=n(t,e[t]);x(a)&&(i[t]=a.value)}return i}const pr=e=>n=>{if("number"==typeof n)return n;if("string"==typeof n){const r=e(n);return Number.isNaN(r)?void 0:r}};pr(parseInt),pr(parseFloat);function yr(e){var n;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(n=e.properties)||void 0===n?void 0:n.segment_number)}const br="process";let wr=!1,hr=[],Er=!1;const vr={};let Lr={getCurrentTime:()=>new Date,getCurrentSession:()=>"",getCurrentView:()=>"",getSegments:()=>({}),get1PSegments:()=>({}),get3PSegments:()=>({}),getSegmentsArray:()=>({}),getLookalikeModels:()=>({}),setSegmentActivation:()=>{}};const Ar=()=>{const e=Ir.concat(Lr.get1PSegments(),Lr.get3PSegments()),n=xr(e);Lr.getSegments=()=>e,Lr.getSegmentsArray=()=>n};function Cr(e,n,r,t,i,a,s){wr=!1,hr=[],Er=!1;const c=o(t.thirdPartydata,_((()=>t.segments),(e=>Ir.concat(t.segments,e)))),u=xr(c);Lr={getCurrentTime:()=>new Date,getCurrentSession:()=>t.sessionId,getCurrentView:()=>t.viewId,get1PSegments:()=>t.segments,get3PSegments:()=>o(t.thirdPartydata,G((()=>({})))),getSegments:()=>c,getSegmentsArray:()=>u,getLookalikeModels:()=>o(t.lookalikeModels,G((()=>({})))),setSegmentActivation:(e,n)=>{}},Er=x(t.lookalikeModels),wr=x(t.thirdPartydata);const l=mr(n,((n,r)=>{var t;return(null===(t=e[n])||void 0===t?void 0:t.checksum)===r?m:p(((e,n)=>{const r=a[e].interpret(null,Lr);return Object.assign({checksum:n},!1===r.result?{}:{result:r})})(n,r))}));if(0===i.length)return{diff:Object.assign(Object.assign({},e),l),errors:[]};if(0===Object.keys(l).length)return{diff:e,errors:[]};{const t=Sr(l,n,r,i,"bootstrap",a,s);return{diff:Object.assign(Object.assign({},e),t.diff),errors:t.errors}}}function kr(e,n,r,t,i,o){(e=>{const n=Object.assign({},e);delete n["1p"],Lr.get3PSegments=()=>n})(t),Ar(),Lr.setSegmentActivation=qr(e,n),wr=!0;const a=Sr(e,n,r,hr.length>0?hr:[vr],"updateTPD",i,o);return hr=[],a}function Sr(e,n,r,t,i,o,a){let s={diff:{},errors:[]};const c=t.length,u=()=>t.filter((e=>{return n=a["!UpdateLookalikeModels"]||[],yr(r=e)&&n.includes(r.properties.segment_number.toString());var n,r})).length===t.length?"lookalikeTransition":"transition",l=(e,n,r)=>"transition"===e?r===n-1?u():"event":e;for(let u=0;u<c;u++){const g=t[u],f=l(i,c,u),d=Pr(Object.assign(Object.assign({},e),s.diff),n,r,g,f,o,a);s={diff:Object.assign(Object.assign({},s.diff),d.diff),errors:s.errors.concat(d.errors)}}return s}function Pr(e,n,a,s,c,u,l){var g;"bootstrap"!==c&&(Lr.setSegmentActivation=qr(e,n));const f=F,d=(e,n)=>{const c=u[e],l=c.lift(s,Lr),g=t(qn,wn(f)),d=g(n.state||null),m=g(l),p=o(hn((()=>fr(d,m)),B),bn((e=>{throw B(`Failed to append lifted event ${Sn(m)} to internal state ${Sn(d)}. Got ${e}`)}))),b=o(a[e],y(Boolean),A(g)),[w,h]=o(b,T((()=>i(p,!1)),(e=>o(hn((()=>i(fr(p,e),!1)),r),wn((()=>i(p,!0))))))),E=Pn(p),v=c.interpret(Pn(w),Lr),L=n.activations||{};return Object.assign(Object.assign(Object.assign(Object.assign({checksum:n.checksum},null===E?{}:{state:E}),!1===v.result?{}:{result:v}),0===Object.keys(L).length?{}:{activations:L}),!1===h?{}:{dropExternalState:h})},m={diff:{},errors:[]},p=function(e,n,r,t,i){switch(e){case"event":const e=(null==i?void 0:i[t.name])||[];if(wr)return e;{hr.push(t);const n=[...i["!UpdateSecondPartyData"]||[],...i["!UpdateThirdPartyData"]||[]];return Qe(ue)(e,n)}case"lookalikeTransition":return(null==i?void 0:i[t.name])||[];case"transition":const o=(null==i?void 0:i[t.name])||[];if(Er){const e=i["!UpdateLookalikeModels"]||[];return o.concat(e)}return o;case"bootstrap":const a=((null==i?void 0:i[t.name])||[]).filter((e=>void 0!==n[e]));return Qe(ue)(a,[...wr?[]:(i["!UpdateSecondPartyData"]||[]).concat(i["!UpdateThirdPartyData"]||[]),...Er?[]:i["!UpdateLookalikeModels"]||[]]);case"updateExternalState":return Object.keys(r);case"updateLAL":return i["!UpdateLookalikeModels"]||[];case"updateTPD":return[...i["!UpdateSecondPartyData"]||[],...i["!UpdateThirdPartyData"]||[]];default:return[]}}(c,e,a,s,l),b=p.length;!function(e){yr(e)&&((e=>{const n=Lr.get1PSegments(),r={"1p":Object.assign(Object.assign({},n["1p"]),e["1p"])};Lr.get1PSegments=()=>r})({"1p":{[e.properties.segment_number]:"SegmentEntry"===e.name}}),Ar())}(s);for(let r=0;r<b;r++){const t=p[r],i=e[t]||{checksum:n[t]};let o=i;try{o=d(t,i)}catch(e){m.errors.push(`Failed to interpret query ${t}. Got ${e}`)}o.dropExternalState&&(null!==(g=m.externalStateToDrop)&&void 0!==g||(m.externalStateToDrop={}),m.externalStateToDrop[t]=!0),m.diff[t]=o}return m}function qr(e,n){return(r,t,i)=>{if(!(i in e)){const r=n[i];if(void 0===r)throw new Error("Checksum not in internalStateMap");e[i]={checksum:r}}"activations"in e[i]||(e[i].activations={});const o=e[i].activations;r in o||(o[r]=[]);const a=o[r];a.includes(t)||(o[r]=[...a,t])}}function xr(e){return Object.keys(e).reduce(((n,r)=>{const t=Object.keys(e[r]),i=[];return t.forEach((n=>{!0===e[r][n]&&i.push(n)})),n[r]=i,n}),{})}const Ir={empty:{},concat:(e,n)=>{const r=Object.assign({},e);for(const[e,t]of Object.entries(n))r[e]?r[e]=dr(r[e],t):r[e]=t;return r}};const Mr=(e,n)=>{const r=function(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),i=1;i<r;i++)t[i-1]=arguments[i];return[e.stateMap,...e.payload,...t,n.rawQueries,n.queriesByEvent]};return"bootstrap"===e.type?Cr(...r(e)):"updateLAL"===e.type?function(e,n,r,t,i,o){return Lr.getLookalikeModels=()=>t,Er=!0,Pr(e,n,r,vr,"updateLAL",i,o)}(...r(e)):"updateTPD"===e.type?kr(...r(e)):"updateExternalState"===e.type?function(e,n,r,t,i){return Pr(e,n,r,vr,"updateExternalState",t,i)}(...r(e)):e.type===br?Sr(...r(e,"event")):"processTransitions"===e.type?function(e,n,r,t,i,o){return Sr(e,n,r,t,"transition",i,o)}(...r(e)):{diff:{},errors:[]}};var _r;_r="bun",globalThis["_____"+"sourceCodeRuntime"]=_r;const Tr=function(e){let n=m;const r=G((()=>{const r=e();return n=p(r),r}));return()=>r(n)}((function(){var e=this&&this.__assign||function(){return e=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},e.apply(this,arguments)},n=this&&this.__values||function(e){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&e[n],t=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,i,o=r.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(t=o.next()).done;)a.push(t.value)}catch(e){i={error:e}}finally{try{t&&!t.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},t=this&&this.__spreadArray||function(e,n,r){if(r||2===arguments.length)for(var t,i=0,o=n.length;i<o;i++)!t&&i in n||(t||(t=Array.prototype.slice.call(n,0,i)),t[i]=n[i]);return e.concat(t||Array.prototype.slice.call(n))},i=function(){function i(e){return"number"==typeof e?a[e]:e}function o(e){return"number"==typeof e?s[e]:e}function f(e){return"number"==typeof e?c[e]:e}function d(e){switch(e.length){case 0:return null;case 1:return e[0];default:return e}}function m(e,n,r){void 0===r&&(r=b);var t=f(n).reduce((function(e,n){return e&&null!=e[n]?e[n]:null}),e);return null===t?null:r(t)}function p(e,n){var r=f(n).slice();return r.unshift(e),r}function y(e,n,r){return void 0===r&&(r=b),m(e,p("properties",n),r)}var b=function(e){return e},w=function(e){return!0};function h(e,n){return function(r){for(var t=0;t<e.length;t++){if((e[t](r)||!1)===n)return n}return!n}}var E=function(e){return function(n){return!e(n)}},v=function(e,n){return function(r){return r>=e&&r<=n}},L=function(e){return new Date(e).getTime()},A=function(e){return m(e,["time"],L)},C=function(e,n){return m(n,e,L)},k=function(e,n,r,t,i,o){return function(a){var s=m(a,e,(function(e){return e.filter(t).map((function(e){return m(e,n)})).reduce(i,o)}));return r(null===s?o:s)}};function S(e,r,t,i){var o,a;try{for(var s=n(e),c=s.next();!c.done;c=s.next()){var u=c.value;if(t(u)&&r(u)===i)return i}}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return!i}var P=function(e){return function(n){return("string"==typeof e||"number"==typeof e)&&"string"==typeof n&&n.toLowerCase().indexOf(o(e).toLowerCase())>-1}},q=function(e){return function(n){return null!=n&&Array.isArray(n)&&n.indexOf(e)>=0}};function x(e,n,r,t,i){var o=m(e.getSegments(),[n,r])||!1;return i&&(t||o)&&e.setSegmentActivation(n,r,i),o}function I(e,n,r){return m(e.getSegments(),[n,r])||!1}function M(e,n,t){return void 0===t&&(t=18e5),function(i){return{a:{m:function(e,n){return[n[0],i.a.m(null!=e[0]&&e[0][0]===n[0][0]?e[1]:i.a.z,n[1])]},z:[[],i.a.z]},p:function(r,t){return[[e(r)],m(t,n)===e(r)?i.p(r,t):i.a.z]},r:function(n,r){return i.r(n,0!==r[0].length&&r[0][0]===e(n)?r[1]:i.a.z)},d:i.d.sq||{l:function(o,a){var s=m(o,n),c=e(a);if(s!==c)return null;var u=i.d.l(o,a);if(!(Array.isArray(u)&&u.length>1))return null;var l=r(u),g=l[0],f=l.slice(1),d=+(A(o)||a.getCurrentTime()),p=Math.floor(d/t),y={};return y[p]={},y[p][c]=1===f.length?f[0]:f,[g,"u",null,y]},i:function(n,r){if(!Array.isArray(n)||"object"!=typeof n[3])return[[],i.a.z];var t=e(r),o=n[3];return[[t],Object.keys(o).map((function(e){return o[e][t]})).filter((function(e){return e})).map((function(e){return i.d.i([n[0]].concat(e))})).reduce(i.a.m,i.a.z)]}}}}}var _=M((function(e){return e.getCurrentSession()}),["session_id"],18e5),T=M((function(e){return e.getCurrentView()}),["view_id"],3e5);function G(e,n,o,a){return void 0===a&&(a=1),{a:{m:function(e,n){return e.concat(n).slice(-o)},z:[]},p:function(r,t){return m(t,["name"])===i(n)?[e.p(r,t)]:[]},r:function(n,r){return e.r(n,r.reduce((function(n,r){return e.a.m(n,r)}),e.a.z))},d:e.d.ftn||{l:function(n,r){var t,i=e.d.l(n,r),s=m(n,["time"],L)*a;return i&&[i[0],"x"+o,null,(t={},t[s]=2==i.length?i[1]:i.slice(1),t)]},i:function(n,i){return n?Object.keys(n[3]||{}).sort().reverse().map((function(e){return Array.isArray(e)?t([n[0]],r(n[3][e]),!1):[n[0],n[3][e]]})).map((function(n){return e.d.i(n,i)})):[]}}}}var B=function(e,n){return null===e?null==n?null:{b:n}:null==n?{a:e}:{a:e,b:n}},F=function(e,n){return e&&n?e(n):null},D=function(e,n,r){if(r&&r.result&&Array.isArray(r.result)){var t=F(e.d&&e.d.m,{result:r.result[0]}),i=F(n.d&&n.d.m,{result:r.result[1]});return B(t,i)}return null};function R(e,n){var r=u[e];if(!n||!r)return!1;if(!r.length)return!0;for(var t=0,i=!1,o=function(e){for(var n=[],r=0;r<e.length;++r){var t=e.charCodeAt(r);if(t>=55296&&t<=56319){var i=e.charCodeAt(r+1);if(i>=56320&&i<=57343){n.push(e.slice(r,r+2)),++r;continue}}n.push(e.charAt(r))}return n}(n.toLowerCase()),a=0;a<o.length;a++){for(var s=o[a];t>0&&!r[t][s];)t=r[t].su?r[t].su:0;if(r[t][s]&&(i=!!r[t=r[t][s]].te))break}return i}return{q:function(e){return{lift:function(n,r){return e.d.l(n,r)},interpret:function(n,r){return function(n,r){return{result:e.r(n,r)}}(r,e.d.i(n,r))},migrate:function(n){return n&&e.d.m?e.d.m(n):null},m:e.a.m,z:e.a.z,p:e.p,r:e.r,i:e.d.i}},a:function(e){return h(e,!1)},acq:function(e,n){return{p:function(r,t){return[e.p(r,t),n.p(r,t)]},r:function(r,t){return e.r(r,t[0])&&n.r(r,t[1])},a:{z:[e.a.z,n.a.z],m:function(r,t){return[e.a.m(r[0],t[0]),n.a.m(r[1],t[1])]}},d:{l:function(r,t){return B(e.d.l(r,t),n.d.l(r,t))},i:function(r,t){return r?[e.d.i(r.a||null,t),n.d.i(r.b||null,t)]:[e.a.z,n.a.z]},m:function(r){return D(e,n,r)}}}},acs:R,acs_:function(e,n){return function(r){return R(n,m(r,e))}},af_i:function(e,n,r){return void 0===r&&(r=w),function(t){return m(t,e,(function(e){return S(e,n,r,!1)}))&&!0}},af_l:function(e,n,r){return void 0===r&&(r=w),function(t){var i=m(t,e,(function(e){return e.filter(r).length}));return n(null===i?0:i)}},af_m:function(e,n,r,t){return void 0===t&&(t=w),function(i){var o=m(i,e,(function(e){return e.filter(t)}));return null===o||0===o.length?r(0):r(o.map((function(e){return m(e,n)})).reduce((function(e,n){return e+n}),0)/o.length)}},af_n:function(e,n,r,t){return void 0===t&&(t=w),k(e,n,r,t,(function(e,n){return Math.min(e,n)}),Number.POSITIVE_INFINITY)},af_p:function(e,n,r,t){return void 0===t&&(t=w),k(e,n,r,t,(function(e,n){return e*n}),1)},af_s:function(e,n,r,t){return void 0===t&&(t=w),k(e,n,r,t,(function(e,n){return e+n}),0)},af_u:function(e,n,r){return void 0===r&&(r=w),function(t){return m(t,e,(function(e){return S(e,n,r,!0)}))||!1}},af_x:function(e,n,r,t){return void 0===t&&(t=w),k(e,n,r,t,(function(e,n){return Math.max(e,n)}),Number.NEGATIVE_INFINITY)},as:function(e,n,r){var t=p("properties",n);return function(n){for(var i=m(n,t),o=r.length,a=!0,s=0;s<o;s++){var c=r[s];if(!(a=e(c)(i)))break}return a}},c:q,c_:function(e,n){return function(r){return q(n)(m(r,e))}},cl_:function(e,n){return function(r){return q(o(n))(m(r,e))}},cx:function(e){return function(n){return q(o(e))(n)}},ctu:function(e,n,r,t){return{a:t?{m:function(e,n){return e.filter((function(e){return-1===n.indexOf(e)})).concat(n).slice(-t)},z:[]}:{m:function(e,n){return e.filter((function(e){return-1===n.indexOf(e)})).concat(n)},z:[]},p:function(t,o){return m(o,["name"])===i(e)&&n(o)?m(o,r):[]},r:function(e,n){return n},d:{l:function(){return null},i:function(){return[]}}}},ctv:function(n,r,t,o){function a(e,n){var r,t=function(e){return{k:e.k,c:1+e.c}},i={arr:[],add:{k:n,c:1}};return n?(r=e.reduce((function(e,n){return e.add.k===n.k?{arr:e.arr,add:t(n)}:{arr:e.arr.concat(n),add:e.add}}),i)).arr.concat(r.add):e}return{a:o?{m:function(e,n){return a(e,n).slice(-o)},z:[]}:{m:function(e,n){return a(e,n)},z:[]},p:function(e,o){return m(o,["name"])===i(n)&&r(o)?m(o,t):null},r:function(n,r){return r.reduce((function(n,r){var t;return e(e({},n),((t={})[r.k]=r.c,t))}),{})},d:{l:function(e){return null},i:function(e){return[]}}}},ctw:function(e,n,r,t){return{a:t?{m:function(e,n){return e.concat(n).slice(-t)},z:[]}:{m:function(e,n){return e.concat(n)},z:[]},p:function(t,o){return m(o,["name"])===i(e)&&n(o)?m(o,r):[]},r:function(e,n){return n},d:{l:function(){return null},i:function(){return[]}}}},cw:function(e,n,r){return void 0===r&&(r=b),{a:{m:function(e,n){return e+n},z:0},p:function(r,t){return m(t,["name"])===i(e)&&n(t)?1:0},r:function(e,n){return r(n)},d:{l:function(r){return m(r,["name"])===i(e)&&n(r)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},cb:function(e,n,r,t){return{a:{m:function(e,n){return Math.min(e+n,t)},z:0},p:function(r,t){return m(t,["name"])===i(e)&&n(t)?1:0},r:function(e,n){return r(n)},d:{l:function(r){return m(r,["name"])===i(e)&&n(r)?["b".concat(t,"p"),1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["b".concat(t,"p"),Math.min(t,e.result)]:null}}}},e:function(e){return function(n){return n===e}},e_:function(e,n){return function(r){return m(r,e)===n}},fm:function(e,n){return{p:n.p,r:function(r,t){return e(n.r(r,t))},a:n.a,d:n.d}},ftn:function(e,n,r){return{a:{m:function(e,n){return e.concat(n.slice(0,r-e.length))},z:[]},p:function(r,t){return m(t,["name"])===i(n)?[e.p(r,t)]:[]},r:function(n,r){return e.r(n,r.reduce((function(n,r){return e.a.m(n,r)}),e.a.z))},d:G(e,n,r,-1).d}},fw:function(e,n,r,t){return void 0===t&&(t=b),{a:{m:function(e,n){return null===e?n:e},z:null},p:function(t,o){return m(o,["name"])===i(e)&&n(o)?m(o,r):null},r:function(e,n){return n},d:{l:function(r){return m(r,["name"])===i(e)&&n(r)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},g:function(e){return function(n){return n>e}},g_:function(e,n){return function(r){return m(r,e)>n}},gb:function(e,n,r){return{a:{m:function(r,t){var i=Object.keys(r).concat(Object.keys(t)).filter((function(e,n,r){return r.indexOf(e)===n})).sort((function(e,n){return Math.max(m(r,[n,1]),m(t,[n,1]))-Math.max(m(r,[e,1]),m(t,[e,1]))})).slice(0,n).reduce((function(n,i){var o=e.a.m(m(r,[i,0])||e.a.z,m(t,[i,0])||e.a.z);return n[i]=[o,Math.max(m(r,[i,1]),m(t,[i,1]))],n}),{});return i},z:{}},p:function(n,t){var i,o,a=m(t,p("properties",r)),s=e.p(n,t);return null==a||(null==(o=s)||"object"==typeof o&&0===Object.keys(o).length||o===e.a.z)?{}:((i={})[a]=[s,m(t,["time"],L)],i)},r:function(n,r){var t={};return Object.keys(r).forEach((function(i){return t[i]=e.r(n,r[i][0])})),t},d:{l:function(){return null},i:function(){return{}}}}},ge:function(e){return function(n){return n>=e}},ge_:function(e,n){return function(r){return m(r,e)>=n}},i_:b,ifp:function(e){return{a:{m:function(e,n){return n},z:null},p:function(e){return null},r:function(n,r){return function(n){return I(n,"1p",e)}(n)},d:{l:function(e,n){return null},i:function(e){return null}}}},isp:function(e,n,r,t){return{a:{m:function(e,n){return n},z:!1},p:function(r,t){return I(r,e,n)},r:function(i,o){return x(i,e,n,r,t)},d:{l:function(e,n){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},itp:function(e,n,r,t){return{a:{m:function(e,n){return n},z:!1},p:function(r,t){return I(r,e,n)},r:function(i,o){return x(i,e,n,r,t)},d:{l:function(e,n){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},k:m,l:function(e){return function(n){return n<e}},l_:function(e,n){return function(r){var t=m(r,e);return null!==t&&t<n}},le:function(e){return function(n){return n<=e}},le_:function(e,n){return function(r){var t=m(r,e);return null!==t&&t<=n}},lm:function(e,n){var r=function(n){return function(e,n,r){if(void 0===n[r])return NaN;var t=e||{};if(0==(t["1p"]||[]).length)return NaN;var i,o=n[r]||{},a=(o["1p"]||{}).const||0;return Object.keys(t).forEach((function(e){t[e].forEach((function(n){var r=(o[e]||{})[n]||0;a+=r}))})),i=a,1/(1+Math.pow(Math.E,-i))}(n.getSegmentsArray(),n.getLookalikeModels(),e)};return{a:{m:function(e,n){return n},z:null},p:function(e){return null},r:function(e,t){return n(r(e))},d:{l:function(e,n){return null},i:function(e){return null}}}},ltn:G,mnw:function(e,n,r,t){void 0===t&&(t=b);var o=Number.POSITIVE_INFINITY;return{a:{m:function(e,n){return e<n?e:n},z:o},p:function(t,a){return m(a,["name"])===i(e)&&n(a)?m(a,r):o},r:function(e,n){return t(n)},d:{l:function(t){return m(t,["name"])===i(e)&&n(t)?["n",m(t,r)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:o}}}},mxw:function(e,n,r,t){void 0===t&&(t=b);var o=Number.NEGATIVE_INFINITY;return{a:{m:function(e,n){return e>n?e:n},z:o},p:function(t,a){return m(a,["name"])===i(e)&&n(a)?m(a,r):o},r:function(e,n){return t(n)},d:{l:function(t){return m(t,["name"])===i(e)&&n(t)?["v",m(t,r)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:o}}}},n0:E(b),n:function(e){return function(n){return n!==e}},nt:E,n_:function(e,n){return function(r){return m(r,e)!==n}},o:function(e){return h(e,!0)},ocq:function(e,n){return{p:function(r,t){return[e.p(r,t),n.p(r,t)]},r:function(r,t){return e.r(r,t[0])||n.r(r,t[1])},a:{z:[e.a.z,n.a.z],m:function(r,t){return[e.a.m(r[0],t[0]),n.a.m(r[1],t[1])]}},d:{l:function(r,t){return B(e.d.l(r,t),n.d.l(r,t))},i:function(r,t){return r?[e.d.i(r.a||null,t),n.d.i(r.b||null,t)]:[e.a.z,n.a.z]},m:function(r){return D(e,n,r)}}}},oe:function(e){for(var n=Object.keys(e),r=n.length,t=new Array(r);r--;)t[r]=[n[r],e[n[r]]];return t},os:function(e,n,r){var t=p("properties",n);return function(n){for(var i=m(n,t),o=r.length,a=!1,s=0;s<o;s++){var c=r[s];if(a=e(c)(i))break}return a}},pacs:function(e,n){return function(r){return R(n,y(r,e))}},pb:function(e,n,r){return function(t){return v(n,r)(y(t,e))}},pc:function(e,n){return function(r){var t=y(r,e);return null!=t&&Array.isArray(t)&&t.indexOf(n)>=0}},pc_:function(e,n){return function(r){var t=y(r,e),i=o(n);return null!=t&&Array.isArray(t)&&t.indexOf(i)>=0}},pe:function(e,n){return function(r){return y(r,e)===n}},pg:function(e,n){return function(r){return y(r,e)>n}},pge:function(e,n){return function(r){return y(r,e)>=n}},pl:function(e,n){return function(r){var t=y(r,e);return null!==t&&t<n}},ple:function(e,n){return function(r){var t=y(r,e);return null!==t&&t<=n}},pn:function(e,n){return function(r){return y(r,e)!==n}},ps:function(e,n){return function(r){return P(n)(y(r,e))}},pw:function(e,n,r,t){return void 0===t&&(t=b),{a:{m:function(e,n){return e*n},z:1},p:function(t,o){return m(o,["name"])===i(e)&&n(o)?m(o,r):1},r:function(e,n){return t(n)},d:{l:function(t){return m(t,["name"])===i(e)&&n(t)?(o=m(t,r))>=1?["m2p",o]:o>0?["m2p",null,1/o]:0==o?["m2p",0]:o>-1?["m2p",null,1/o,1]:["m2p",o,null,1]:null;var o},i:function(e){return e?Array.isArray(e)?0===(n=e.slice(1))[0]?0:Math.pow(-1,n[2]||0)*(n[0]||1)/(n[1]||1):e:1;var n}}}},r:function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return g[e].apply(g,t([],r(n),!1))},ref:function(e){return function(n){return l[e](n)}},s:P,s_:function(e,n){return function(r){return P(n)(m(r,e))}},scq:function(e,n,r){return void 0===r&&(r=b),{p:function(r,t){return[e.p(r,t),n.p(r,t)]},r:function(t,i){return r(e.r(t,i[0])+n.r(t,i[1]))},a:{z:[e.a.z,n.a.z],m:function(r,t){return[e.a.m(r[0],t[0]),n.a.m(r[1],t[1])]}},d:{l:function(r,t){return B(e.d.l(r,t),n.d.l(r,t))},i:function(r,t){return r?[e.d.i(r.a||null,t),n.d.i(r.b||null,t)]:[e.a.z,n.a.z]},m:function(r){return D(e,n,r)}}}},sq:_,dscq:function(n,r,t,o){var a="x".concat(o),s=function(e){return e?2===e.length?["p",a,"",e[1]]:e:null},c=function(e){var t,o=function(e){return m(e,["session_id"])}(e);return o&&m(e,["name"])===i(n)&&r(e)?["p",a,"",(t={},t[o]=1,t)]:null};return{a:{m:function(n,r){var t=s(n),i=s(r);return t?i?["p",a,"",e(e({},t[3]),i[3])]:t:i},z:null},p:function(e,n){return c(n)},r:function(e,n){var r=n&&n[3]&&"object"==typeof n[3]?Object.keys(n[3]).length:0;return t(r)},d:{l:function(e,n){return c(e)},i:function(e,n){return s(e)}}}},sw:function(e,n,r,t){return void 0===t&&(t=b),{a:{m:function(e,n){return e+n},z:0},p:function(t,o){return m(o,["name"])===i(e)&&n(o)?m(o,r):0},r:function(e,n){return t(n)},d:{l:function(t){return function(r){return m(r,["name"])===i(e)&&n(r)}(t)?(o=m(t,r))<0?["p2",null,-o]:["p2",o]:null;var o},i:function(e){return e?Array.isArray(e)?((n="p2"===e[0]?e.slice(1):e)[0]||0)-(n[1]||0):e:0;var n}}}},t:w,tb:function(e,n){return function(r){return v(e,n)(A(r))}},te:function(e){return function(n){return A(n)===e}},te_:function(e,n){return function(r){return C(e,r)===n}},tg:function(e){return function(n){return A(n)>e}},tg_:function(e,n){return function(r){return C(e,r)>n}},tge:function(e){return function(n){return A(n)>=e}},tge_:function(e,n){return function(r){return C(e,r)>=n}},ti:L,tl:function(e){return function(n){return A(n)<e}},tl_:function(e,n){return function(r){return C(e,r)<n}},tle:function(e){return function(n){return A(n)<e}},tle_:function(e,n){return function(r){return C(e,r)<n}},tn:function(e){return function(n){return A(n)!==e}},tn_:function(e,n){return function(r){return C(e,r)!==n}},tw:function(e,n,i){var o=i||100,a=Math.ceil(n/o),s=function(e){return Math.floor(e/a)},c=function(e,r,t){var i;return[s(e.getTime()-n),(i={},i[s(r)]=t,i)]},u=function(n,r){var t=Math.max(n[0],r[0]),i=Object.keys(n[1]).filter((function(e){return e>=t})).concat(Object.keys(r[1]).filter((function(e){return e>=t}))).filter((function(e,n,r){return r.indexOf(e)===n})).reduce((function(t,i){var o=e.a.m(n[1][i]||e.a.z,r[1][i]||e.a.z);return o!==e.a.z&&(t[i]=o),t}),{});return[t,i]},l=[Number.NEGATIVE_INFINITY,{}],g=function(e){var n=function(n){return n.map((function(n){var t=r(n,3),i=t[0],o=(t[1],t[2]);return c(e.t,o,i)})).reduce(u,l)};return u(n(e.in),n(e.out))},f=function(n){if(void 0!==n.result)return f(n.result);if(void 0!==n.w)return f(g(n));var t=r(n,2),i=(t[0],t[1]),o=null,a={};for(var s in i){var c=e.d.m({result:i[s]});c&&Array.isArray(c)&&(o=c[0],a[s]=d(c.slice(1)))}return o&&[o,"w",n[0],a]};return{a:{m:function(e,n){var r=e.w?g(e):e;return u(r,n)},z:l},p:function(n,r){return c(n.getCurrentTime(),m(r,["time"],L),e.p(n,r))},r:function(n,r){var t=(r.w?g(r):r)[1];return e.r(n,Object.keys(t).reduce((function(n,r){return e.a.m(n,t[r])}),e.a.z))},d:e.d.tw||{l:function(n,i){var o=e.d.l(n,i),a=e.d.i(o,i);return o&&t([o[0],"w"],r(c(i.getCurrentTime(),m(n,["time"],L),a)),!1)},i:function(e,r){var t=Array.isArray(e)?e:[],i=r.getCurrentTime(),o=s(i.getTime()-n);return[t[2]||null,Object.keys(t[3]||{}).map((function(e){var n;return(n={})[e]=t[3][e],n})).reduce((function(e,n){return Object.keys(n).filter((function(e){return parseInt(e)>=o})).forEach((function(r){return e[r]=n[r]})),e}),{})]},m:e.d.m&&f}}},vgw:function(e,n,r,t){void 0===t&&(t=b);var o={v:0,k:0};return{a:{m:function(e,n){var r=e.k+n.k;return{v:r?e.v+n.k*(n.v-e.v)/r:0,k:r}},z:o},p:function(t,a){return m(a,["name"])===i(e)&&n(a)?{v:m(a,r),k:1}:o},r:function(e,n){return t(n.v)},d:{l:function(t){return m(t,["name"])===i(e)&&n(t)?0==(o=m(t,r))?["p3",1]:o<0?["p3",1,null,-o]:["p3",1,o]:null;var o},i:function(e){return e?Array.isArray(e)?{v:(((n=e.slice(1))[1]||0)-(n[2]||0))/(n[0]||1),k:n[0]||0}:void 0:o;var n}}}},vq:T,w:function(e){return function(n){return n===o(e)}},x:function(e){return function(n){return n!==o(e)}},y:function(e,n){return function(r){return y(r,e)===s[n]}},y_:function(e,n){return function(r){return m(r,e)===s[n]}},z:function(e,n){return function(r){return y(r,e)!==s[n]}},z_:function(e,n){return function(r){return m(r,e)!==s[n]}}}}(),o={"!UpdateSecondPartyData":["101171","102103","102153","102213","106717","117084","139619","148849","151211","153825","162776","163161","163164","163168","163169","163170","163171","163172","163173","165850","166461","17075","17117","17135","17138","17185","18314","18731","18732","18733","18734","18797","18803","18805","18806","18807","20531","20534","20714","20715","21070","21538","22514","22515","24101","24102","24103","24104","24105","24106","24245","24339","26440","26442","26443","27111","29255","29259","30222","32094","32095","51098","51099","51100","51101","58181","58310","75854","75874","85622","95434"],FormSubmission:["17176"],LinkClick:["56274","74349"],Pageview:["101060","101061","101171","102103","102153","102212","102213","102214","103258","104406","106717","113877","113878","113879","113880","116599","117171","117680","120985","122044","122045","122046","122047","122049","122051","122054","122721","125008","128830","129643","135703","135704","135705","135706","136865","139562","139666","143049","147839","150943","150951","151211","153433","153624","156645","156961","158432","158434","158465","158466","158581","158583","158585","158589","158591","164501","164538","16780","16781","16782","16842","16843","16982","16987","17068","17075","17124","17125","17127","17128","17138","17173","17174","17176","17180","17182","17183","17186","17187","17427","18212","18238","18239","18240","18245","18246","18247","18248","18250","18253","18254","18260","18262","18263","18264","18268","18269","18270","18271","18294","18295","18297","18298","18300","18310","18312","18314","18315","18316","18317","18318","18320","18321","18323","18356","18437","18439","18440","18443","18445","18735","18790","18791","19597","19669","19902","20008","20277","20278","20279","20281","20283","20431","20469","20494","20645","20646","21070","21267","21535","21538","21540","21541","21548","21615","21670","22407","22408","22409","22410","22411","22412","22529","22567","22581","22598","22600","22710","22892","23027","23832","23833","23835","23852","23853","23937","24244","24245","24324","24978","27314","27315","27316","27317","27318","27320","27321","27323","27324","27326","27327","27330","27331","27332","27333","27334","27335","27336","27338","27339","27340","27342","27343","27344","27345","27346","27347","27348","27349","27350","27351","27352","27353","27354","27355","27356","27357","27358","27359","27360","27361","27362","27363","27364","27365","27366","27367","27368","27369","27370","27371","27372","27373","27374","27375","27376","27377","27378","27379","27380","27382","27384","27385","27386","27387","27388","27389","27390","27391","27392","27393","27394","27395","27396","27397","27398","27399","27400","27706","27708","27710","27711","27714","28394","28714","30363","30365","30366","30367","30368","30369","31187","32729","33786","34989","37314","38340","38341","38342","38343","38344","38346","38352","38353","38354","38355","38356","38357","38358","38359","38360","38361","38362","38470","38472","38473","38474","38475","38476","38477","38478","38479","38497","38498","38819","38827","41489","42437","42438","42439","46761","46762","46763","52127","52133","55914","55934","56089","56090","56274","62486","66495","66564","71282","71287","73285","73287","73288","73289","73290","73291","73292","73402","73748","74145","74349","74452","74657","74659","74660","74661","74662","74664","74665","75854","75874","75963","76378","76402","76414","76507","76510","76799","76800","77423","77520","77841","77848","77849","78740","78924","79157","79176","79183","79184","79187","79188","79190","79436","80663","81707","81780","81781","81782","81783","81784","81785","81786","81787","81788","81789","81790","81791","81792","81793","81794","81795","85612","85622","85906","85907","85908","86173","86956","87678","87696","87738","87739","87740","87741","87742","87744","88113","88865","91003","92621","92622","94606","98074","99503","99689"],PageviewComplete:["153624","17183","20008","20833","21070","26090","26091","26376","26380","26381","26383","55914","55934","75640"],PageviewEngagement:["26090","26091","26376","26380","26381","26383","75640"],SegmentEntry:["153624","17183","20008","20833","21070","55914","55934"],SlotClicked:["151211","18782","55914","56274","75636","75640","77426","78743","99536"],SlotViewable:["100186","101387","101388","101389","104170","104405","104640","105294","105978","105979","109466","114692","123787","124792","125770","126197","131423","136045","136624","136628","136630","139562","141502","142287","147446","147779","148102","148898","149016","149036","149349","149351","151073","153433","158533","163808","167131","18212","18310","22529","26090","26091","34414","34415","38068","57152","72255","72256","72257","73221","74123","74349","75311","75640","76328","77425","79074","81250","84257","87626","91345","94607","94608","98331","99504"],VideoEngagement:["42441","47581","47583","47584","47585","47586","52142"]},a=["Pageview","SlotViewable","PageviewComplete","SlotClicked","SegmentEntry","PageviewEngagement","VideoEngagement","LinkClick"],s=["www.ft.com","app.ft.com","cp","dh","md","oe","op","rankings.ft.com","lv1","reg","Luxury goods","www.ftadviser.com","CEO/president/Chairman","Exec Mgmt (EVP/SVP/MD)","Other C Level (CFO/COO/CIO/CMO)","Owner/Partner/Proprietor","VP/Director","cor","etf.ft.com","int","tri","Jewellery","Watches","Wine","Arts","Fashion","Fashion shows","Spa holidays","Fashion designer profiles","Travel","Fashion accessories","Food & Drink","How To Spend It","Technology","anon","Beach holidays","Life & Arts","Luxury holidays","www.investorschronicle.co.uk","Arts books","Cruises and sailing","House & Home","Style","The Art Market","Theatre","Yachts & Marinas","mon","pm","sm","tel","Champagne","Cocktails & Drinks","Design","Interiors","Lifestyle","Menswear","Restaurants","ins","Cannes Film Festival","Diamonds and gemstones","Film","Gold","cs","dt","ifa","po","res","Architecture","Beauty","City breaks","Cycling holidays","FT Magazine","Food & Beverage","Gaming","Gardens","Investments","Paris Motor Show","Photography","Technology sector","The Aesthete","Wellbeing and fitness","Womenswear","it","itc","itt","pri","Cars","Music","Property","Sustainability","Technology regulation","Travel & leisure industry","Venice Film Festival","bikes","fse","planes and boats","tec","ts","Audio books","Beer and spirits","Big tech","Book awards","Chelsea Flower Show","Fiction","Food diet","Geneva Motor Show","History books","IT/computing","Organic food","Poetry","Science fiction books","Television","Travel & Leisure","United Kingdom","acc","bkg","fam","fin","howtospendit.ft.com","ma","r01b","r02b","rsk","Biotech","Commodities","Drugs research","FT Globetrotter","FT Series","Fund management","Health Care","Innovation","Investment Banking","Jancis Robinson","Pensions","Prime property","Research and development","Scientific research","Special Report","Travel books","Wealth management","Work & Careers","br","etf","foodrevolution.ft.com","gpv","pension","r01d","ret","www.agendaweek.com","www.boardiq.com","www.financialadvisoriq.com","www.fundfire.com","www.ignites.com","www.ignitesasia.com","www.lifeannuityspecialist.com","www.pandcspecialist.com","Corporate bonds","Cyber Security","Digital health","ESG investing","Electric vehicles","Entrepreneurship","Exchange traded funds","Family holidays","Genomics","Green bonds","Health","Health sector","High yield bonds","Lunch with the FT","New-build property","Pension Freedom","Pharmaceuticals sector","Private wealth","Property sector","Sovereign bonds","US Treasury bonds","Watches & Jewellery","Wellbeing","an","as","channel video","con","food and drink","ft.com/food-drink","ft.com/travel","gi","howtospendit.com","kno","man","multi-asset","oil","ot","phc","pr","r06f","r06l","r07a","se","transact.ft.com","African prime property","Artificial intelligence","Asian prime property","Bonds","Books","Camilla Hodgson","Christina Ohly Evans","Climate Capital","Consumer trends","Cyber warfare","Eating and drinking in Frankfurt","Eating and drinking in Hong Kong","Eating and drinking in London","Eating and drinking in New York City","Eating and drinking in Paris","Eating and drinking in Rome","Eating and drinking in San Francisco","Eating and drinking in Singapore","Eating and drinking in Tokyo","Energy sector","Equality in workplace","European prime property","Executive MBA","Fintech","Flora Macdonald Johnston","Future of work","Games industry","Hedge funds","Hydrogen vehicles","IT/Tech/Telecoms","Information technology","Insurance","Internet privacy","Investing in funds","Isabelle Kountoure","Jo Ellison","Leadership","MBA","Managing yourself","Masters in Finance","Masters in Management","Mental health","North American prime property","Online MBA","Pensions Regulator","Personal Pension","Recipe","Renewable energy","Residential property","Retirement Income","Safari/","Sport","State Pension","Sustainable capitalism","Tech start-ups","Technical/Business Specialist","Telecommunications","Trading technology","Travel insurance","Venture capital investment","Wearable technology","Winter sports","Women in business","app.ft.com/index_page/htsi","bonds","books and literature","buy","channels.ft.com/en/howtospendit/","chrome/","chromium/","cocktails/beer","commodities","enu","equinor.ft.com","ft.com/life-arts","ft.com/markets","gold","https://www.ft.com/moral-money","iberdrola.ft.com","investment","mutual funds","ogm","ops","property","r02h","r03g","r07e","real estate","school","sipp","tie","travel","www.ft.com/htsi","/5887/ft.com/life.and.arts","5G networks","ADD FTA job titles","ADD InvestorChronicles \'jobTitle\'","ADD MoneyMedia \'Department\'","ADD MoneyMedia \'industry subsector\'","ADD MoneyMedia JobTitles","Africa holidays","Agricultural commodities","Air France SA","Airlines","Ajesh Patalay","Alexander Gimour","Alice Lascelles","Andrew Jack","Ariella Budick","Asia","Asia-Pacific equities","Australasian prime property","Automobiles","Automobili Lamborghini Holding SpA","Aylin Bayhan","Beatrice Hodgkin","Blockchain","Bond","British Airways Executive Club","British Airways PLC","Burberry Group PLC","Business school","Business travel","COP26","COP27","COP28","Carola Long","Caroline Roux","Cars, bikes, planes and boats","Champagne Louis Roederer SA","China","Clara Baldock","Clive Cookson","Cloud computing","Cryptocurrencies","Dalia Dawood","Davos","Driverless vehicles","Due Diligence","EU energy","EU financial regulation","Ellie Pithers","Emerging market investing","Environment","Equities","Equity","Equity earnings","Ethical and responsible investment","Etihad Airways","Europe","Europe holidays","European equities","Exchange Traded Funds","FT Wealth","Financial & markets regulation","Financials","Fitness in Frankfurt","Fitness in Hong Kong","Fitness in London","Fitness in New York City","Fitness in Paris","Fitness in Rome","Fitness in Singapore","Fitness in Tokyo","Flexible working","Foreign exchange","Francesca Gavin","Frankfurt travel","Fund Management","Fund regulation","Funding your business","Gareth Harris","Genevieve Curtis","Gillian Tett","Grace Cook","Griselda Murray Brown","HTSI","Hannah Kuchler","Hester Lacey","Hong Kong","Hong Kong travel","Horatia Harrod","ISAs","Inc.","India","Industrials","Information Technology","Inheritance Tax","Investing","Investment Trusts","Itmar Srulovich","Jackie-Wullschlager","Jan Dalley","Japanese government bonds","Jessica Beresford","Joji Sakurai","Josh Spero","Justerini & Brooks Ltd","Justerini & Brooks Ltd.","Kate Youde","LVMH Moet Hennessy Louis Vuitton SA","LVMH Moet-Hennessy Louis Vuitton BV","Lauren Indvik","Laurent Perrier SA","Leslie Hook","Lindsey Tramuta","London travel","Louise Levene","Ltd.","M","Maria Shollenbarger","Mark Ellwood","Melanie Gerlis","Mercedes-Benz AG","Middle Eastern prime property","Ming Liu","Moet Hennessy Diageo","Moet Hennessy SNC","Moral Money","Mortgages","Net-A-Porter Group Ltd","New York City travel","Nicholas Lander","Nick Foulkes","Niki Blasina","North America holidays","Office life","Oil","Oil & Gas industry","Oliver Barnes","Olympic Games","Paris travel","Patek Philippe SA","Pensions Ombudsman","Peugeot Automobiles","Private equity","Property & Mortgages","Property downsizing","Property funds","Qatar Airways","Ravinder Bhogal","Rebecca Rose","Rebecca Watson","Renting property","Retail & Consumer industry","Retail sector","Retirement","Review","Risk management/compliance","Rolex SA","Rome travel","Rowley Leigh","SIPP","San Francisco travel","Sarah Hemming","Sarah Neville","Sarit Packer","Scarlett Conlon","Seamonkey/","Singapore travel","Skoda AS","Skoda Auto AS","Skye Gyngell","South American prime property","Sovereign wealth funds","Spread betting","Swiss International Air Lines Ltd","Sylvia Pfeifer","Tax","Technology lobbying","Telecoms / Utilities","Tess Thackara","Tim Auld","Tim Hayward","Tokyo travel","Tom Robbins","Tracker mortgages","UK airports","UK arts","UK equities","UK financial regulation","UK holidays","UK property","US equities","US financial regulation","Virgin Atlantic Airways Ltd","Visual Arts","Vivienne Becker","Volkswagen UK","Volvo Car AB","W","Wealth Management","Work-life balance","Working from home","Workplace diversity & equality","Yves Saint Laurent SAS","adventure holidays","africa holidays","air travel","alpha-investment-portfolios","asia & australia holidays","asset management","bse","bu","business travel","car","ceo/president/chairman","cfd\'s","cfds","college","cpl","electric vehicle","equities","europe holidays","facebook.com","fine art","fixed income","foo","food industry","ft-intelligent-business","ft.com/books","ft.com/ft-trading-room","ft.com/lex","ft.com/magazine","ft.com/personal-finance","ft.com/reports/wealth","ft.com/style","ftalphaville.ft.com","hea","hedge fund","ig-hub.ft.com","individual-savings-accounts","investing","investments","isa","law","linkedin.com","luxury goods","luxury holidays","luxury homes","mb","metal","mixed-asset","mkt","multi asset","multi-manager","north america holidays","oth","other c level (cfo/coo/cio/cmo)","pat","pollution","pro","protection","r05e","r06","r07h","r07w","rad","retire","retirement","retirement income","sal","solar energy","spa holidays","stu","tax","trl","uk holidays","video and computer games","vp/director","water","wealth management","wine","www.fdiintelligence.com","www.ft.com/reports/sustainable-food-agriculture","www.pwmnet.com","www.thebanker.com"],c=[["client","domain"],["client","url"],["article","topics"],["user","responsibility"],["user","position"],["user","industry"],["campaign_id"],["user","subscriptionLevel"],["article","admants"],["article","brand"],["line_item_id"],["article","authors"],["article","categories"],["article","title"],["client","referrer"],["geo_info","country"],["geo_info","continent"],["article","organisations"],["client","user_agent"],["user","gender"],["articleST","title"],["articleST","contentCategory"],["segment_number"],["type"],["aggregations","PageviewEngagement","engaged_time"],["progress"],["advertiser_id"],["article","id"],["article","type"],["articleST","secondaryTags"],["slot","ad_unit_path"],["article","people"],["dest_url"],["form","method"],["user","fta_jobTitle"],["user","indb2b"],["userMM","member"],["userMM","role"],["userST","title"],["userST","type"]],u=[],l=[i.os(i.w,0,[7,18,1,0]),i.nt(i.ref(8)),i.os(i.w,3,[49,256,96,83,107,230]),i.os(i.cx,2,[26,30,55,25,81,28,42]),i.os(i.s,4,[506,2,3,4,5,6,548,569]),i.os(i.cx,2,[164,172,125,166,167,129]),i.os(i.cx,8,[146,120,89]),i.os(i.w,4,[6,5,4,3,2,16,15,14,13,12]),i.os(i.s,18,[268,269]),i.os(i.e,26,[4858985271,4824899484,4916164028,4906443106,4872154766,4834564230,17071129,16506769,4761211409,4898257415,17291809,4815530075,17226649,4743050551,4853829738,139158049,4923337424,4855421277,4509060898,4813437271,4903037490,4944239958,4817001997,4951224467,47499049,4815623192,4932063272,4821286752,16856809,4833099352,4919686922,4908664202,4990614892,16606609,4729402017,4803865617,4803380530,190695889,4402353290,208114849,4903630543,99573049,4790213476,4865351256,16201129,4834652375,16429729,4601481767,4787259116,4907562621,16944049,4742800448,75516409,4768716171,17374129,5008320878,4780354078,4785014140,4906024717,4820968557,5004026819,4944210671,4797037407,4623321291,5002841659,4797023706,4797299218,4916804777,4854441313,5001344291,4847952126,4932711580,4731334718,60482929,34001929,104920129,17428489,4744239359,4851878110,5010099352,4836769175,4768040047,108761929,4981327397,4940469115,4982884449,4837749047,135231769,4763251086,16048729,4840716212,4976591234,4809538686,4764082999,16572049,4826067961,4837151972,114655369,4795192211,4918913461,16392169,4906859471,4827105242,4633795193,4797776870,4813435324,4896952214,16226089,4791337153,4990804981,32810689,4882861129,17136289,4948433720,4949125323,4882854844,4836285792,4923090942,4952844402,4943669893,201786649,4743041008,208772329,4895750046,5001245965,21148129,4769068934,4950385678,4950719254,4943674249,4921795801,4743267505,4834366073,5001465531,4772240387,4910371343,4889913312,4961187027,4930771836,5019396366,4921151670,4875670240,4771320122,16185409,4906867579,4844389104,17003809,4823770701]),i.os(i.cx,9,[127,137,32,71]),i.os(i.cx,2,[328,60,92,216,213,211,217,210,218,212,214,215,51,99,50,72,104,108,22,21,45,58,43,44,40,23,56,31,54,10]),i.os(i.s,1,[263,292]),i.os(i.w,0,[296,297,298]),i.os(i.cx,8,[195,196]),i.os(i.cx,2,[109,61,26,106,77,102,111,87,53,50,54,30,59,101,110,55,76,44,24,74,23,41,25,95,93,86,22,98,51,103,35,69,39,105,92,81,60,73,67,56,36,68,10,45,70,58,27,37,43,52,28,40,80,31,112,29,21,42]),i.os(i.cx,2,[261,477,453,421,367,380,459,406,474,431,91,138,450,258,70,35,69,27,40,29]),i.os(i.cx,2,[41,72,31,91,29,163,425,300,350,35,27,481,99,23,37,10,28,30,26,25,39,24,21,22,36]),i.os(i.w,0,[155,154,153,152,151,150,149,148]),i.os(i.cx,2,[238,241,104,359,362,356,357,358,363,360,361,178,27,80,68]),i.o([i.os(i.w,5,[84,82,229,107]),i.os(i.w,4,[97,255])]),i.os(i.w,7,[8,9]),i.os(i.cx,2,[27,37,10,28,30,26,25,23,81,55,24,21,22,36]),i.as(i.x,4,[48,47,3,65,6,4,5,63,62,2]),i.os(i.w,7,[20,19,9,17,8]),i.os(i.w,7,[34,20,19,9,17,8]),i.os(i.w,0,[0,1]),i.os(i.w,0,[295,299]),i.os(i.cx,2,[109,61,26,106,77,102,111,87,53,50,54,30,93,178,59,101,110,55,76,44,24,74,23,25,86,22,98,51,103,35,69,39,60,73,67,56,36,68,32,10,45,70,41,58,27,43,52,40,80,31,29,95,21,42]),i.os(i.w,3,[46,64]),i.os(i.cx,8,[555,89]),i.nt(i.ps(18,458)),i.os(i.e,10,[6282491029,6282491017,6282490996,6282490492,6282490450,6282490297,6282489484]),i.os(i.cx,2,[123,158]),i.o([i.ref(20),i.ref(2)]),i.os(i.cx,2,[136,135,130,100,90,78,33]),i.os(i.cx,2,[61,59,22,10,21]),i.os(i.s,1,[187,118]),i.os(i.w,4,[48,47,3,65,6,4,5,63,62,2])],g=[(e,n,r,t)=>i.q(i.acq(i.cb(0,n,r,t),e)),(e,n)=>i.q(i.acq(i.cb(0,i.ref(7),i.ge(1),1),i.tw(i.cb(0,i.t,i.ge(n),e),72576e5))),(e,n,r)=>i.q(i.acq(i.ocq(i.cb(0,i.ref(n),i.ge(1),1),i.cb(0,i.ref(r),i.ge(1),1)),i.cb(0,e,i.ge(1),1))),(e,n,r,t,o)=>i.q(i.acq(i.ocq(i.ocq(i.ocq(t,o),r),n),e)),(e,n,r,t,o,a,s,c,u,l,g,f,d,m)=>i.q(i.acq(i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,o,i.ge(c),a),e),i.tw(i.cb(0,i.os(f,d,m),i.ge(1),1),7776e6)),i.tw(i.cb(0,i.os(u,l,g),i.ge(1),1),t)),i.tw(i.cb(0,s,i.ge(1),1),7776e6)),i.ocq(n,r))),(e,n)=>i.q(i.acq(i.scq(i.cw(2,i.pge(24,e)),i.vq(i.sw(5,i.t,["properties","engaged_time"],i.ge(n))),i.ge(10)),i.cb(1,i.y(30,293),i.ge(1),1))),(e,n,r)=>i.q(i.acq(i.tw(n,r),e)),(e,n,r,t)=>i.q(i.acq(i.tw(i.cb(0,i.a([i.ref(0),i.ref(r)]),i.ge(n),e),6048e5),i.tw(i.cb(0,i.a([i.ref(0),i.ref(t)]),i.le(264),265),6048e5))),(e,n,r,t)=>i.q(i.acq(i.tw(i.cb(0,i.a([i.ref(0),i.ref(r)]),i.ge(n),e),2592e6),i.tw(i.cb(0,i.a([i.ref(0),i.ref(t)]),i.le(1049),1050),2592e6))),(e,n,r,t)=>i.q(i.cb(e,i.a([n,r,t]),i.ge(1),1)),(e,n,r,t)=>i.q(i.cb(e,i.a([i.pe(n,r),i.tg(t)]),i.ge(1),1)),(e,n,r,t)=>i.q(i.cb(e,i.a([i.pe(r,t),n]),i.ge(1),1)),(e,n,r)=>i.q(i.cb(e,i.os(i.w,n,r),i.ge(1),1)),(e,n)=>i.q(i.cb(e,i.ref(n),i.ge(1),1)),(e,n,r,t,o)=>i.q(i.cb(e,i.pe(t,o),i.ge(r),n)),(e,n,r)=>i.q(i.cb(e,i.pe(6,2760141805),i.ge(r),n)),e=>i.q(i.cb(e,i.t,i.ge(1),1)),(e,n)=>i.q(i.cb(0,i.a([i.ref(7),i.os(i.w,e,n)]),i.ge(1),1)),e=>i.q(i.cb(0,i.a([i.ref(26),i.ref(e)]),i.ge(1),1)),(e,n,r,t,o)=>i.q(i.cb(0,i.a([i.y(r,t),i.ref(o)]),i.ge(n),e)),e=>i.q(i.cb(0,i.a([i.y(0,e),i.y(15,113)]),i.ge(1),1)),e=>i.q(i.cb(0,i.a([i.y(15,113),i.ref(26),i.ref(e)]),i.ge(1),1)),e=>i.q(i.cb(0,i.a([i.y(19,e),i.tg(16734816e5)]),i.ge(1),1)),(e,n)=>i.q(i.cb(0,i.a([i.y(23,181),i.ps(1,143)]),i.ge(n),e)),e=>i.q(i.cb(0,i.a([i.pe(19,e),i.tg(16734816e5)]),i.ge(1),1)),(e,n)=>i.q(i.cb(0,i.a([i.ps(18,e),i.ref(n)]),i.ge(1),1)),(e,n,r)=>i.q(i.cb(0,i.a([i.tg(e),i.ps(n,r)]),i.ge(1),1)),e=>i.q(i.cb(0,i.os(i.s,1,e),i.ge(1),1)),(e,n,r)=>i.q(i.cb(0,i.o(r),i.ge(n),e)),(e,n)=>i.q(i.cb(0,i.y(e,n),i.ge(1),1)),e=>i.q(i.cb(0,i.ps(e,0),i.ge(1),1)),(e,n,r,t)=>i.q(i.cb(0,i.ps(r,t),i.ge(n),e)),(e,n)=>i.q(i.cb(0,i.ps(1,143),i.ge(n),e)),(e,n,r,t)=>i.q(i.cb(1,i.os(i.e,r,t),i.ge(n),e)),(e,n)=>i.q(i.cb(1,i.pe(6,2639728228),i.ge(n),e)),(e,n)=>i.q(i.cb(1,i.pe(6,2837857131),i.ge(n),e)),(e,n)=>i.q(i.ocq(e,n)),(e,n,r,t,o,a)=>i.q(i.ocq(i.cb(e,n,i.ge(1),1),i.cb(r,i.os(t,o,a),i.ge(1),1))),(e,n,r,t,o)=>i.q(i.ocq(i.cb(e,n,i.ge(1),1),i.cb(r,i.pe(t,o),i.ge(1),1))),(e,n,r)=>i.q(i.ocq(i.cb(0,e,i.ge(1),1),i.cb(0,i.a([n,r]),i.ge(1),1))),(e,n)=>i.q(i.ocq(i.cb(0,i.ref(n),i.ge(1),1),i.cb(0,i.ref(e),i.ge(1),1))),(e,n)=>i.q(i.ocq(i.cb(1,i.os(i.e,10,n),i.ge(1),1),i.cb(1,i.os(i.e,10,e),i.ge(1),1))),(e,n,r)=>i.q(i.ocq(i.cb(1,i.pe(6,r),i.ge(1),1),i.cb(1,i.pe(e,n),i.ge(1),1))),(e,n,r,t,o,a,s)=>i.q(i.ocq(i.ocq(e,i.cb(n,r,i.ge(o),t)),i.scq(i.cw(2,s),a,i.ge(1)))),(e,n,r,t,o,a,s,c,u,l,g)=>i.q(i.ocq(i.ocq(e,i.cb(n,i.os(o,a,s),i.ge(t),r)),i.tw(i.cb(0,i.os(i.w,u,l),i.ge(g),c),7776e6))),(e,n,r,t)=>i.q(i.ocq(i.ocq(e,i.isp("financial_times_redshift",n,!1,r)),i.cb(0,i.af_u(["properties","user","followedConcepts"],t),i.ge(1),1))),(e,n,r,t,o)=>i.q(i.ocq(i.ocq(e,i.isp("financial_times_redshift",n,!1,r)),i.tw(i.cb(0,o,i.ge(1),1),t))),(e,n,r,t,o,a,s,c,u,l,g,f,d,m)=>i.q(i.ocq(i.ocq(i.cb(c,u,l,g),i.cb(e,i.os(f,d,m),i.ge(r),n)),i.cb(t,o,i.ge(s),a))),(e,n,r,t,o,a,s,c,u,l,g,f)=>i.q(i.ocq(i.ocq(i.cb(u,l,g,f),i.cb(e,n,i.ge(t),r)),i.cb(o,a,i.ge(c),s))),(e,n,r,t,o,a,s,c,u,l,g,f,d)=>i.q(i.ocq(i.ocq(i.cb(0,i.os(i.s,g,f),i.ge(d),o),i.cb(0,i.os(a,s,c),i.ge(n),e)),i.cb(0,i.os(i.s,u,l),i.ge(t),r))),(e,n,r,t,o,a,s,c,u,l)=>i.q(i.ocq(i.ocq(i.ocq(n,i.tw(i.cb(0,t,o,a),7776e6)),i.tw(i.cb(0,e,i.ge(3),3),7776e6)),i.tw(i.cb(0,i.os(s,c,u),i.ge(l),r),7776e6))),(e,n,r,t,o,a,s,c,u,l,g,f,d)=>i.q(i.ocq(i.ocq(i.ocq(o,i.cb(0,g,i.ge(d),f)),i.cb(0,i.os(a,s,c),i.ge(n),e)),i.cb(0,i.os(i.s,u,l),i.ge(t),r))),(e,n,r,t,o,a,s)=>i.q(i.ocq(i.ocq(i.ocq(a,s),i.tw(i.cb(n,r,i.ge(o),t),7776e6)),e)),(e,n,r,t,o,a,s,c)=>i.q(i.ocq(i.ocq(i.ocq(s,c),i.tw(i.cb(r,t,i.ge(a),o),n)),e)),(e,n,r,t,o,a,s,c,u,l)=>i.q(i.ocq(i.ocq(i.ocq(u,l),i.cb(e,n,i.ge(t),r)),i.cb(o,a,i.ge(c),s))),(e,n,r,t,o,a,s,c,u,l)=>i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.isp("financial_times_redshift_7_days",s,!1,c),i.isp("financial_times_redshift_7_days",u,!1,l)),i.isp("financial_times_redshift_7_days",o,!1,a)),i.isp("financial_times_redshift_7_days",e,!1,n)),i.isp("financial_times_redshift_7_days",r,!1,t))),(e,n,r,t)=>i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,i.a([i.y(0,38),i.os(i.cx,21,t)]),i.ge(3),3),7776e6),i.tw(i.cb(0,i.a([i.y(0,38),i.os(i.s,20,n)]),i.ge(3),3),7776e6)),i.tw(i.cb(0,i.a([i.y(0,38),i.os(i.s,1,r)]),i.ge(3),3),7776e6)),i.tw(i.cb(0,i.os(i.cx,29,e),i.ge(3),3),7776e6))),(e,n,r,t,o,a,s,c,u,l)=>i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,i.ref(t),i.ge(o),r),2592e6),i.tw(i.cb(0,i.os(a,s,c),i.ge(1),1),n)),i.tw(i.cb(0,e,i.ge(1),1),2592e6)),i.tw(i.cb(0,i.a([u,l]),i.ge(1),1),2592e6))),(e,n,r,t,o,a)=>i.q(i.ocq(i.ocq(i.isp("financial_times_redshift",o,!1,a),i.isp("financial_times_redshift",e,!1,n)),i.isp("financial_times_redshift",r,!1,t))),(e,n,r,t,o,a,s,c,u)=>i.q(i.ocq(i.ocq(i.tw(i.cb(0,t,i.ge(c),o),24192e5),i.tw(i.cb(0,e,i.ge(r),n),24192e5)),i.tw(i.cb(0,a,i.ge(u),s),24192e5))),(e,n,r)=>i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.a([i.y(0,11),i.os(i.cx,21,n)]),i.ge(3),3),7776e6),i.tw(i.cb(0,i.a([i.y(0,11),i.os(i.s,20,e)]),i.ge(3),3),7776e6)),i.tw(i.cb(0,i.a([i.y(0,11),i.os(i.s,1,r)]),i.ge(3),3),7776e6))),(e,n,r)=>i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.a([i.y(0,11),i.os(i.cx,21,n)]),i.ge(3),3),7776e6),i.tw(i.cb(0,i.a([i.y(0,11),i.os(i.s,20,e)]),i.ge(3),3),7776e6)),i.tw(i.cb(0,i.a([i.y(0,11),i.ps(1,r)]),i.ge(3),3),7776e6))),(e,n,r,t,o,a,s,c)=>i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.os(i.cx,2,c),i.ge(o),r),2592e6),i.tw(i.cb(0,i.os(i.cx,a,s),i.ge(n),e),2592e6)),i.tw(i.cb(0,t,i.ge(1),1),2592e6))),(e,n,r,t,o,a,s,c,u,l)=>i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.os(i.cx,2,c),i.ge(o),r),7776e6),i.tw(i.cb(0,i.os(i.s,1,s),i.ge(n),e),7776e6)),i.tw(i.cb(0,i.os(i.s,u,l),i.ge(a),t),7776e6))),(e,n,r,t,o,a)=>i.q(i.ocq(i.tw(i.cb(0,e,i.ge(r),n),24192e5),i.tw(i.cb(0,t,i.ge(a),o),24192e5))),(e,n,r,t,o)=>i.q(i.ocq(i.tw(i.cb(0,e,i.ge(r),n),24192e5),i.tw(i.cb(0,i.a([i.pc_(2,t),i.os(i.cx,2,o)]),i.ge(3),3),24192e5))),(e,n,r,t,o,a)=>i.q(i.ocq(i.tw(i.cb(0,e,i.ge(r),n),7776e6),i.tw(i.cb(0,t,i.ge(a),o),7776e6))),(e,n)=>i.q(i.ocq(i.tw(i.cb(0,i.a([i.y(0,7),i.os(i.s,1,e)]),i.ge(1),1),7776e6),i.tw(i.cb(0,i.a([i.y(0,7),i.os(i.s,1,n)]),i.ge(1),1),7776e6))),(e,n)=>i.q(i.ocq(i.tw(i.cb(0,i.a([i.y(0,7),i.os(i.s,1,e)]),i.ge(1),1),7776e6),i.tw(i.cb(0,i.a([i.y(0,7),i.ps(1,n)]),i.ge(1),1),7776e6))),(e,n,r,t,o,a,s)=>i.q(i.ocq(i.tw(i.cb(0,i.os(i.cx,r,t),i.ge(3),3),5184e6),i.tw(i.cb(0,i.os(o,a,s),i.ge(n),e),7776e6))),(e,n,r,t,o,a,s)=>i.q(i.ocq(i.tw(i.cb(0,i.os(i.cx,a,s),i.ge(n),e),7776e6),i.tw(i.cb(0,r,i.ge(o),t),7776e6))),(e,n,r,t)=>i.q(i.ocq(i.tw(i.cb(0,i.os(i.cx,9,t),i.ge(1),1),2592e6),i.tw(i.cb(0,e,i.ge(r),n),2592e6))),(e,n,r,t,o,a)=>i.q(i.ocq(i.tw(i.cb(0,i.o(a),i.ge(n),e),7776e6),i.tw(i.cb(0,r,i.ge(o),t),7776e6))),(e,n,r,t,o,a,s)=>i.q(i.ocq(i.tw(i.cb(0,i.o([a,s]),i.ge(n),e),7776e6),i.tw(i.cb(0,i.ps(1,o),i.ge(t),r),7776e6))),(e,n)=>i.q(i.ocq(i.tw(i.cb(0,i.pc_(9,e),i.ge(1),1),2592e6),i.cb(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],n)),i.ge(1),1))),(e,n)=>i.q(i.isp("financial_times_redshift",e,!1,n)),(e,n,r)=>i.q(i.scq(i.cw(2,i.a([i.pge(24,30),i.pc_(8,r)])),i.vq(i.sw(5,i.pc_(8,n),["properties","engaged_time"],i.ge(30))),i.ge(e))),(e,n,r,t)=>i.q(i.tw(i.cb(e,n,i.ge(t),r),6048e5)),(e,n,r,t)=>i.q(i.tw(i.cb(e,n,i.ge(t),r),2592e6)),(e,n,r,t)=>i.q(i.tw(i.cb(e,n,i.ge(t),r),7776e6)),(e,n)=>i.q(i.tw(i.cb(e,n,i.ge(1),1),12096e5)),(e,n,r,t,o,a)=>i.q(i.tw(i.cb(e,i.os(t,o,a),i.ge(r),n),2592e6)),(e,n,r,t,o)=>i.q(i.tw(i.cb(n,r,i.ge(o),t),e)),(e,n,r)=>i.q(i.tw(i.cb(0,e,i.ge(r),n),24192e5)),(e,n,r)=>i.q(i.tw(i.cb(0,e,i.ge(r),n),72576e5)),(e,n)=>i.q(i.tw(i.cb(0,i.a([e,n]),i.ge(1),1),72576e5)),e=>i.q(i.tw(i.cb(0,i.a([i.ref(7),i.os(i.w,5,e)]),i.ge(1),1),72576e5)),(e,n)=>i.q(i.tw(i.cb(0,i.os(i.cx,e,n),i.ge(3),3),7776e6)),(e,n,r)=>i.q(i.tw(i.cb(0,i.os(i.cx,2,r),i.ge(n),e),24192e5)),e=>i.q(i.tw(i.cb(0,i.af_u(["properties","user","followedConcepts"],i.o(e)),i.ge(1),1),7776e6)),(e,n,r)=>i.q(i.tw(i.cb(0,i.af_u(["properties","user","followedConcepts"],i.o([i.e_(["name"],e),i.e_(["name"],n),i.e_(["name"],r)])),i.ge(1),1),7776e6)),(e,n)=>i.q(i.tw(i.cb(0,i.af_u(["properties","user","followedConcepts"],i.o([i.y_(["name"],e),i.y_(["name"],n)])),i.ge(1),1),7776e6)),e=>i.q(i.tw(i.cb(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],e)),i.ge(1),1),7776e6)),(e,n,r)=>i.q(i.tw(i.cb(0,i.o(r),i.ge(n),e),7776e6)),(e,n,r)=>i.q(i.tw(i.cb(0,i.o([e,i.os(i.w,n,r)]),i.ge(1),1),290304e5)),(e,n,r,t,o)=>i.q(i.tw(i.cb(0,i.o([r,i.os(i.cx,17,t),i.os(i.cx,2,o)]),i.ge(n),e),24192e5)),(e,n,r,t,o)=>i.q(i.tw(i.cb(0,i.o([i.os(i.cx,r,t),i.os(i.cx,2,o)]),i.ge(n),e),24192e5)),(e,n,r)=>i.q(i.tw(i.cb(0,i.o([i.os(i.w,5,e),i.y(4,n),i.os(i.w,3,r)]),i.ge(1),1),290304e5)),(e,n,r,t,o)=>i.q(i.tw(i.cb(0,i.o([i.pc_(r,t),e,i.os(i.cx,17,o),i.os(i.cx,2,n)]),i.ge(6),6),24192e5)),(e,n,r,t,o,a,s,c)=>i.q(i.tw(i.cb(0,i.o([i.pe(1,t),i.pc_(o,a),i.pc_(s,c),i.os(i.cx,2,r)]),i.ge(n),e),24192e5)),(e,n,r,t)=>i.q(i.tw(i.cb(0,i.pc_(r,t),i.ge(n),e),2592e6)),(e,n)=>i.q(i.tw(i.cb(0,i.y(e,n),i.ge(1),1),7776e6)),e=>i.q(i.tw(i.cb(0,i.y(3,e),i.ge(1),1),290304e5)),(e,n)=>i.q(i.tw(i.cb(0,i.pe(e,n),i.ge(1),1),7776e6)),(e,n)=>i.q(i.tw(i.cb(0,i.ps(e,n),i.ge(1),1),7776e6)),(e,n,r)=>i.q(i.tw(i.cb(1,i.pe(6,r),i.ge(n),e),6048e5)),(e,n)=>i.q(i.tw(i.cb(1,i.pe(6,3047912570),i.ge(n),e),6048e5)),e=>i.q(i.tw(i.cb(6,i.a([i.y(0,0),i.pe(25,e)]),i.ge(1),1),7776e6))];return{rawQueries:{100186:i.r(106,1,1),101060:i.r(49,1,1,1,1,1,i.s,13,["digital lawyers","innovative lawyers"],13,["airlines navigate meeting climate change pledges","amazon’s legal team: ‘we wanted to help’","australian law firms address lack of aboriginal recruits","blockchain-powered breakthrough on mutual fund","calls to action on esg boost demand for legal expertise","collective legal actions spread in europe","covid response fosters top legal teams’ creativity","creative practitioners crack tough legal challenges","cross-border deals need broad skills in time of trade war and pandemic","digital delivery from the daily grind for younger lawyers","digital scheme pays venezuela health workers from frozen funds","digital thinking spreads across asia’s law firms","diversity efforts for lawyers switch from hiring to keeping","eight smaller law firms that outpace larger rivals in europe","fintech pioneers navigate the law’s grey areas","five views of law firm leadership","fix law firm culture to keep people of colour","forward-looking legal practitioners","gun rights and climate change","high pay in law jobs fails to compensate for toxic culture","how airlines survived to fly another day","in-house legal teams develop new attitude to risk","japan inc braced for fresh hostile bids","law firm leaders ready for radical change","law firm professionals driving radical change","law firms chase a piece of the crypto action","law firms embrace ‘change makers’","law firms focus on digital skills to ease legal pressures","law firms start to take the long view","lawyers help tesla unlock rooftop solar power","lawyers write the future for $200tn of post-libor deals","legal eye for detail will help battle sustainable finance ‘greenwash’","people-focused law firm leaders","seven individual takes on rethinking legal practice","the lawyers battling to redress systemic racial inequalities","the pay rates for lawyers are unsustainable","wanted: role models for solving legal problems together","why digital demands deep thinkers","young lawyers feel most at risk from burnout"],1,["digital-lawyers","innovative-lawyers"],1),101061:i.r(51,1,1,1,1,i.cb(0,i.os(i.s,1,[519]),i.ge(1),1),i.s,14,[519],13,["banks turn to ai as regulators press for libor exit","big four primed for new audit rules to speed legal push","covid tracing fans public health vs privacy debate","how using data and tech speeded response to covid-19","medical technology gives healthcare a shot in the arm","meet the advocates of using contracts to gauge economic","new battleground takes shape over 5g patents","on guard for breakdowns and rule breakers","six ways to craft a digital future","wanted: diy-style tools to boost legal tech adoption"],i.ps(13,"Intelligent Business"),1,1),101171:i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.pc_(9,"Energy Source"),i.ge(1),1),2592e6),i.cb(0,i.pe(1,"channels.ft.com/en/ft-energy-source"),i.ge(1),1)),i.isp("financial_times_redshift","UPL080",!1,"101171"))),101387:i.r(105,7,7,2913665273),101388:i.q(i.acq(i.tw(i.cb(1,i.pe(6,2913665273),i.ge(1),1),6048e5),i.tw(i.cb(1,i.pe(6,2913665273),i.le(9),10),6048e5))),101389:i.r(14,1,1,1,6,2913665273),102103:i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.pc_(9,338),i.ge(1),1),2592e6),i.isp("financial_times_redshift","UPL006",!1,"102103")),i.isp("financial_times_redshift","UPL008",!1,"102103"))),102153:i.r(46,i.cb(0,i.af_u(["properties","user","followedConcepts"],i.e_(["name"],"Moral Money")),i.ge(1),1),"UPL009","102153",2592e6,i.pc_(9,418)),102212:i.r(74,207,"Climate Capital"),102213:i.r(45,i.tw(i.cb(0,i.pc_(9,"Scoreboard"),i.ge(1),1),2592e6),"UPL069","102213",i.e_(["name"],"Scoreboard")),102214:i.r(74,"Unhedged","Unhedged"),103258:i.r(47,0,1,1,0,i.af_u(["properties","user","followedConcepts"],i.o([i.y_(["name"],325),i.y_(["name"],324),i.y_(["name"],323)])),1,1,0,i.ps(1,"cop26"),i.ge(1),1,i.cx,2,[325,324,323]),104170:i.r(78,1,i.pe(6,2980091191),1,1),104405:i.r(105,7,7,2980091191),104406:i.r(74,79,"The Aesthete"),104640:i.r(105,7,7,2942895018),105294:i.r(48,1,i.pe(10,5985306905),1,1,1,i.os(i.e,10,[6362668779,6362668767,6256596710,6255901648,6255901630,6256598123,6256598108,6256598096,5985307328]),1,1,1,i.pe(10,5983421982),i.ge(1),1),105978:i.r(14,1,1,1,6,2945396807),105979:i.r(105,1,1,2945396807),106717:i.r(45,i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,i.pc_(9,"FT Podcast"),i.ge(1),1),2592e6),i.tw(i.cb(0,i.pc_(2,140),i.ge(3),3),2592e6)),i.tw(i.cb(0,i.os(i.cx,2,[161,"Recruitment","Corporate culture","Start-up hiring",225]),i.ge(2),2),2592e6)),i.tw(i.cb(0,i.y(0,7),i.ge(2),2),2592e6)),i.isp("financial_times_redshift","UPL034",!1,"106717")),"UPL036","106717",i.o([i.y_(["name"],321),i.y_(["name"],225),i.y_(["name"],161)])),109466:i.r(10,1,10,5961057341,16485984e5),113877:i.r(61,["defined benefit","defined contribution","drawdown",145,560,289],["Defined Benefit","Drawdown","Defined Contribution","Department for Work & Pensions",171,249,"Sipp","Auto-enrolment",252,245,244,133],145),113878:i.r(61,["assurance","insurance","insurer",552],["Protection Products","Critical Illness","Income Protection","Life Insurance","Protection"],552),113879:i.r(60,["iht","national insurance","non-dom",565],["Enterprise Investment Schemes","Venture Capital Trusts","National Insurance","Tax Efficient Investments","Avoidance","Capital Gains Tax",387,468],[565]),113880:i.r(60,[271,"crude",276,541,191,283,"real assets",287,570],["Real Estate",124,88],[271,"food",276,541,191,283,"real-assets","real-estate","residential",570]),114692:i.r(106,7,7),116599:i.r(10,0,0,"qualcomm.ft.com",1659312e6),117084:i.r(75,"UPL102","117084"),117171:i.r(12,0,4,[97,48,198,47,194,65,192,119,540,186,63,62,503,141,180,179]),117680:i.q(i.acq(i.ocq(i.tw(i.cb(0,i.os(i.w,4,[119,48,47,3,6,5,2,4]),i.ge(1),1),72576e5),i.tw(i.cb(0,i.os(i.w,3,[117,282,66,85,266,46,122,64,57]),i.ge(1),1),72576e5)),i.tw(i.cb(0,i.os(i.w,5,[116,94,115,114,57]),i.ge(1),1),72576e5))),120985:i.r(14,0,1,1,0,"equinoreu.ft.com"),122044:i.r(97,[114,57,116,94,115],141,[122,46,57,117,66]),122045:i.r(97,[82,84],97,[49,83]),122046:i.r(102,64),122047:i.r(102,85),122049:i.r(94,i.y(5,144),4,[65,186,63]),122051:i.r(94,i.os(i.w,4,[192,198,47,180,179,119,62,194,48]),3,[182,188]),122054:i.q(i.tw(i.cb(0,i.os(i.w,4,[3,5,4,2,6]),i.ge(1),1),290304e5)),122721:i.q(i.cb(0,i.a([i.os(i.w,4,[5,6,3,4]),i.os(i.w,3,[96,49,83])]),i.ge(1),1)),123787:i.r(80,1,i.pe(6,3047912570)),124792:i.r(33,1,1,10,[5910755640,6010244157,6010245102,6010244148]),125008:i.r(100,3,3,9,126),125770:i.r(42,6,3117126614,3100121172),126197:i.r(106,1,1),128830:i.r(6,i.ocq(i.tw(i.cb(0,i.os(i.s,1,["www.ft.com/prime-property","www.ft.com/property"]),i.ge(2),2),6048e5),i.tw(i.cb(0,i.os(i.cx,2,[88,52,67,74,53,41]),i.ge(2),2),2592e6)),i.cb(0,i.os(i.cx,2,[463,414,242,"UK prime property",311,221,200,202,438,"Property law",170,443,134,248]),i.ge(2),2),12096e5),129643:i.r(0,i.cb(0,i.os(i.w,5,[144,290,535,502,528,66,189,193,272,281,49,82,84]),i.ge(1),1),i.os(i.w,4,[5,3,6,2,4]),i.ge(1),1),131423:i.r(54,1,i.pe(6,3111717114),1,1,1,i.pe(6,3100724632),1,1,i.ocq(i.ocq(i.cb(1,i.pe(10,6158900332),i.ge(1),1),i.cb(1,i.pe(10,6158900314),i.ge(1),1)),i.cb(1,i.pe(10,6158898955),i.ge(1),1)),i.cb(1,i.pe(10,6158900362),i.ge(1),1)),135703:i.r(24,"F"),135704:i.r(22,490),135705:i.r(22,409),135706:i.r(24,"U"),136045:i.q(i.cb(1,i.a([i.tg(16743888e5),i.os(i.e,10,[6186705035,6186087988,6186704870,6186087838,6186704852,6186088219])]),i.ge(3),3)),136624:i.r(77,1,i.os(i.e,6,[3140448653,3140327410]),7,7),136628:i.r(105,1,1,3140448653),136630:i.r(105,1,1,3140327410),136865:i.r(27,["edp.ft.com"]),139562:i.r(47,0,1,1,1,i.pe(6,3023265505),1,1,0,i.pe(1,"https://www.ft.com/reports/sustainable-mobility"),i.ge(1),1,i.w,27,["c584eb8b-a2f4-4243-b4c5-7922d2041da0","fe9086de-61e7-4d37-9b8c-56f6eaa0c950","f74cab6f-4d06-4f64-bb07-6fd061f9fd06","4478d7d1-1d54-49c1-b391-01e13a1412fb","2bde3e7f-b91d-49d7-bbaf-898f39db6263","173176ac-112a-4491-8a0c-b16e096176b5"]),139619:i.r(75,"UPL105","139619"),139666:i.q(i.ocq(i.cb(0,i.os(i.s,1,["https://www.ft.com/ft1000-2022","https://www.ft.com/reports/europes-fastest-growing-companies"]),i.ge(1),1),i.cb(0,i.os(i.w,27,["01c89a2d-87e7-41bd-a4e3-67ca94dd2a24","018aab32-07f1-427a-aea5-7794414b019c","de31fe8e-6550-4f95-8c42-1c4b005fc0e3","13fdd416-c6d2-40d4-841e-1d407e4f2e17","3d7c33a7-1107-4406-816b-2c302e9ab854","52fff0ab-adb9-43ab-929a-656d0fc4b981"]),i.ge(1),1))),141502:i.r(14,1,1,1,6,3136394845),142287:i.r(33,1,1,6,[3042148204,2974343984]),143049:i.r(90,"UK defence industry","Aircraft manufacturing","Aerospace & Defence"),147446:i.r(42,6,3104588878,3104832626),147779:i.r(12,1,1,["https://www.ft.com/climate-leaders-europe-2023","https://www.ft.com/ft1000-2023"]),147839:i.r(14,0,1,1,0,"www.pictet.ft.com"),148102:i.r(14,1,1,1,6,3166420462),148849:i.r(75,"UPL106","148849"),148898:i.q(i.cb(1,i.a([i.tge(16822944e5),i.tle(16855776e5),i.ref(32)]),i.e(0),1)),149016:i.r(12,1,1,["https://www.ft.com/partnercontent/guernsey-finance/helping-to-advance-the-transition-to-net-zero-for-real-economy.html?utm_source=FT&utm_medium=TDcarousel&utm_content=ft_marketing","https://www.ft.com/partnercontent/guernsey-finance/eggs-and-bacon-launching-a-fund-in-guernsey.html?utm_source=FT&utm_medium=TDcarousel&utm_content=ft_marketing","https://www.ft.com/partnercontent/guernsey-finance/location-location-location-the-importance-of-fund-domicile.html?utm_source=FT&utm_medium=TDcarousel&utm_content=ft_marketing"]),149036:i.r(9,1,i.tge(16831584e5),i.tle(16855776e5),i.ref(32)),149349:i.r(14,1,1,1,6,3035064705),149351:i.r(14,1,1,1,6,3102621522),150943:i.r(2,i.os(i.w,15,["Vietnam","Vanuatu","Tonga","Timor-Leste","Thailand","Sri Lanka","Solomon Islands","Singapore","Samoa","Philippines","Papua New Guinea","Palau","Pakistan","New Zealand","Nepal","Nauru","Myanmar","Mongolia","Maldives","Malaysia","Laos","Kiribati","Japan","Indonesia",384,"Fiji","South Korea","Cook Islands","Macao",379,330,"Cambodia","Brunei","Bhutan","Bangladesh","Australia","Afghanistan"]),34,13),150951:i.r(2,i.y(16,349),4,27),151073:i.r(33,1,1,10,[6269479877,6268763215]),151211:i.r(53,i.isp("financial_times_redshift","UPL107",!1,"151211"),314496e5,3,i.os(i.e,26,[4853829738,5104571993,4821286752,4743267505,4824899484,5046930611,17291809,4834652375,21148129,208772329,16383649,4772240387,4731334718,4787756624]),1,1,i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,i.a([i.ref(38),i.ref(17)]),i.ge(6),6),145152e5),i.tw(i.cb(0,i.a([i.ref(38),i.os(i.cx,9,[177,376])]),i.ge(6),6),145152e5)),i.tw(i.cb(0,i.a([i.ref(38),i.os(i.cx,2,[219,"Markets",33,"Companies","Politics","World","Global Economy"])]),i.ge(40),40),145152e5)),i.tw(i.cb(0,i.a([i.os(i.w,3,[147,46,85]),i.ref(22)]),i.ge(6),6),290304e5)),i.isp("financial_times_redshift","UPL065",!1,"151211")),i.isp("financial_times_redshift","UPL064",!1,"151211")),i.isp("financial_times_redshift","UPL063",!1,"151211")),153433:i.r(44,i.tw(i.cb(0,i.os(i.cx,2,[222,243,237,240,239]),i.ge(2),2),290304e5),1,1,1,i.e,6,[3107730153,2929245762],2,1,["https://rankings.ft.com/schools/136/ie-business-school/rankings/2868/online-mba-ranking-2022/programme-info","https://rankings.ft.com/schools/132/imperial-college-london/rankings/2942/online-mba-2023/programme-info","https://rankings.ft.com/schools/126/hec-paris/rankings/2875/masters-of-management-2022/programme-info","https://rankings.ft.com/home/masters-in-management","https://rankings.ft.com/home/masters-in-finance","https://rankings.ft.com/home/masters-in-business-administration"],2),153624:i.q(i.acq(i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,i.a([i.ref(23),i.ref(17)]),i.ge(2),2),290304e5),i.tw(i.cb(0,i.a([i.ref(23),i.os(i.cx,9,["FT Weekend podcast",177,376])]),i.ge(2),2),290304e5)),i.tw(i.cb(0,i.a([i.as(i.x,3,[147,46,85]),i.ref(22)]),i.ge(2),2),290304e5)),i.tw(i.cb(0,i.os(i.w,14,["https://linkedin.com","http://m.facebook.com"]),i.ge(1),1),290304e5)),i.scq(i.cw(2,i.pc(["aggregations","SegmentEntry"],151211)),i.cw(4,i.pe(22,151211)),i.e(0)))),153825:i.r(75,"UPL107","153825"),156645:i.r(31,1,1,1,"https://edp.ft.com"),156961:i.r(104,1,"www.ft.com/podcasts"),158432:i.r(56,["investment-trusts",389,"funds-and-investment-trusts","funds","alpha-investment-trusts",499],["investment fund","investment trust","investor fund","investor trust"],[499,"inv_trust","investment-trust","investment_fund","investment_trust","investor_fund","investor_trust"],["Alpha Investment Trusts","Alpha investment portfolios",131,"Funds & Inv Trusts","FUNDS","Trust",389,75]),158434:i.r(56,[245,"tax-pensions-clinic",244,433,"sipps",452,171,"taking-your-pension","state-pensions",252,"pensions-and-tax","pensions",133,"investing-your-pension","company-pensions"],[145,558,289],[145,558,289],["Taking Your Pension","Investing your Pension",245,"Company Pensions","Tax & Pensions Clinic",244,433,"Pensions and Tax",171,249,"Sipps",452,"State Pensions",252,133]),158465:i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.a([i.y(0,38),i.os(i.s,20,["et fund",142,"exchange-traded","traded fund"])]),i.ge(3),3),7776e6),i.tw(i.cb(0,i.os(i.s,1,[142,"exchangetradedfund"]),i.ge(3),3),7776e6)),i.tw(i.cb(0,i.os(i.cx,29,["etfs","Exchange-traded Funds","ETFs"]),i.ge(3),3),7776e6))),158466:i.r(56,[531,"isas",382],["individual savings account",534],[531,"individual_savings_account",534],["Individual Savings Accounts","Isas",382]),158533:i.q(i.ocq(i.cb(1,i.ps(1,"channels.ft.com/en/tech"),i.ge(1),1),i.cb(1,i.ps(1,"https://www.ft.com/tech-tonic"),i.ge(1),1))),158581:i.r(87,11,[429,"Donato Paolo Mancini","Jamie Smyth","Darren Dodd",307,332,377,455]),158583:i.r(87,11,[332,"Alistair Gray","Jonathan Eley","Judith Evans"]),158585:i.r(87,11,["Peggy Hollinger",467]),158589:i.r(87,11,["Gill Plimmer","Steven Bernard",205,"Oliver Telling",404,"Harry Dempsey",467,"Emiko Terazono",429]),158591:i.r(87,11,[307,"Alice Hancok",205]),162776:i.r(75,"UPL108","162776"),163161:i.r(55,"DS0039","163161","DS0040","163161","DS0038","163161","DS0036","163161","DS0037","163161"),163164:i.r(55,"DS0034","163164","DS0035","163164","DS0033","163164","DS0031","163164","DS0032","163164"),163168:i.r(55,"DS0029","163168","DS0030","163168","DS0028","163168","DS0026","163168","DS0027","163168"),163169:i.r(55,"DS0024","163169","DS0025","163169","DS0023","163169","DS0021","163169","DS0022","163169"),163170:i.r(55,"DS0019","163170","DS0020","163170","DS0018","163170","DS0016","163170","DS0017","163170"),163171:i.r(55,"DS0014","163171","DS0015","163171","DS0013","163171","DS0011","163171","DS0012","163171"),163172:i.r(55,"DS0009","163172","DS0010","163172","DS0008","163172","DS0006","163172","DS0007","163172"),163173:i.r(55,"DS0004","163173","DS0005","163173","DS0003","163173","DS0001","163173","DS0002","163173"),163808:i.r(14,1,1,1,6,3239647806),164501:i.r(60,[533,"mixed asset",542,544,190,545,"pension freedom",560],[249,75,171,"Multi-Asset Focus","Multi-asset"],[279,542,190,545,"pension-freedom","retirement-income"]),164538:i.r(31,1,1,1,"https://equinor.ft.com"),165850:i.r(75,"UPL109","165850"),166461:i.r(75,"UPL110","166461"),167131:i.r(14,1,1,1,6,3212713187),16780:i.r(16,0),16781:i.r(29,15,113),16782:i.r(14,0,1,1,15,"United States"),16842:i.r(104,1,"ft.com"),16843:i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.os(i.s,1,[573,11,575,576]),i.ge(3),3),7776e6),i.tw(i.cb(0,i.os(i.cx,2,[340,369,480,484,354,"Mergers & Acquisitions","Derivatives","Investment Strategy","European Equities",351,483,344,"Emerging markets","Emerging Markets","Capital markets","Capital Markets","Asia-Pacific Equities",310,"People in Fund Management","UK Equities",479,"Asset management",227,128,233,368,203,317,139,259,176,"Stock exchange consolidation",464,"Sovereign debt","Sovereign Bonds",175,435,"Investor activism","Insider trading",168,"High frequency trading","Greece debt crisis","Investing in Foreign Exchange",365,162,"Equity Valuation","Equity valuation","Equity Exchanges","Equity exchanges",346,342,"Derivative exchanges","Derivative Exchanges",156,"Bank bonuses",301,"Private Equity",131,75,491,"Venture Capital","US Treasury Bonds","Stock Exchange","Sovereign","Passive Investing","Investor Activism","Insider Trading","High Yield Bonds","High Frequency Trading","Hedge Funds","Greece Debt Crisis","Foreign Exchange",352,345,"Equity Earnings",388,"Derivative","Clearing & Settlement","Asset Management","Agricultural Commodities"]),i.ge(3),3),2592e6)),i.tw(i.cb(0,i.os(i.cx,12,[532,280,529,"earnings"]),i.ge(3),3),5184e6))),16982:i.r(101,1,277),16987:i.r(101,14,277),17068:i.r(69,3,3,8,["r03l","r03p","r03k","r03b"],i.w,13,["Beijing","Korea","Alibaba",379,"Chinese",309,330,384]),17075:i.r(46,i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,i.o([i.pc_(8,"r04d"),i.os(i.cx,12,["studying business",288,"graduate school","education",509,"careers","career advice"])]),i.ge(3),3),5184e6),i.tw(i.cb(0,i.os(i.cx,2,[222,"Business education","Online learning","Career change",240,239,"Business books","Americas business schools","Asian business schools","European business schools","Business School Rankings",161,"Executive education","Social entrepreneurship","Professional networking",243,"Executive search",321,"Applying to Business School","Education",140,237]),i.ge(2),2),5184e6)),i.tw(i.cb(0,i.pe(1,"www.ft.com/business-education"),i.ge(3),3),5184e6)),i.isp("financial_times_redshift","UPL036",!1,"17075")),"UPL007","17075",7776e6,i.os(i.w,1,["https://www.ft.com/content/3a594f1e-d3b1-47eb-a0e3-479e43f0a0dc","https://www.ft.com/content/105a3fb5-c496-4d00-9ebf-b740179b18a6","https://www.ft.com/content/3945156a-6e08-4231-bf26-f8a576f07584","https://www.ft.com/content/fdc454cf-1d76-425d-9050-02a9b110a080","https://www.ft.com/content/07fe57d1-e194-402c-a343-39df7b594cec","https://www.ft.com/content/2a37a6af-61d4-4faa-acca-363463fd14b8","https://www.ft.com/content/2bd77e1d-4fea-4834-9901-3fffbc0e7a3a","https://www.ft.com/content/45af45cb-fe45-49b5-94a0-cfafcf281723","https://www.ft.com/content/f0d2d243-9e4d-4308-b3cd-a69e0ab697c0","https://www.ft.com/content/679b4a15-9920-4dfd-b80b-db7241acc7be","https://www.ft.com/reports/asia-pacific-business-schools","https://www.ft.com/content/17abca3d-ff56-4d88-80db-2faaf95f60f5","https://www.ft.com/content/4c157c58-5dab-11e7-b553-e2df1b0c3220","https://www.ft.com/content/17878a48-5da7-11e7-b553-e2df1b0c3220","https://www.ft.com/content/1451d662-5da7-11e7-b553-e2df1b0c3220","https://www.ft.com/content/3323b72a-5da9-11e7-b553-e2df1b0c3220","https://www.ft.com/content/520eb246-5dab-11e7-b553-e2df1b0c3220","https://www.ft.com/content/2d49b520-5da9-11e7-b553-e2df1b0c3220","https://www.ft.com/content/4eb8fa2a-5dab-11e7-b553-e2df1b0c3220","https://www.ft.com/content/67c70780-5dad-11e7-b553-e2df1b0c3220","https://www.ft.com/content/2fed43c8-5da9-11e7-b553-e2df1b0c3220","https://www.ft.com/reports/educating-next-chinese-business-leaders","https://www.ft.com/content/004906f6-e444-11e9-b112-9624ec9edc59","https://www.ft.com/content/55c0472c-e45b-11e9-b112-9624ec9edc59","https://www.ft.com/content/b6bcfa02-ef37-11e9-ad1e-4367d8281195","https://www.ft.com/content/cee526b6-e444-11e9-b112-9624ec9edc59","https://www.ft.com/content/39d1367c-e445-11e9-b112-9624ec9edc59","https://www.ft.com/content/5ee78ac2-e456-11e9-b112-9624ec9edc59","https://www.ft.com/content/00c9006c-e445-11e9-b112-9624ec9edc59","https://www.ft.com/content/5787f180-3b96-11ea-b84f-a62c46f39bc2","https://www.ft.com/content/c4be5690-3b91-11ea-b84f-a62c46f39bc2","https://www.ft.com/content/362fdc36-3b97-11ea-b84f-a62c46f39bc2","https://www.ft.com/content/5a7211de-3b94-11ea-b84f-a62c46f39bc2","https://www.ft.com/content/0c282a0c-3c36-11ea-a01a-bae547046735","https://www.ft.com/content/5953739c-3b94-11ea-b84f-a62c46f39bc2","https://www.ft.com/content/64211d86-ef52-4cf5-ba38-0fe64e18b58f","https://www.ft.com/content/8efa25d0-32dd-49bc-be6c-6fca1640f228","https://www.ft.com/content/2a7c06a9-a5bc-479e-9426-8098a383555a","https://www.ft.com/content/beb77be1-f735-45e9-82cb-ec834eb39565","https://www.ft.com/content/bc80f1ec-6164-4d7d-a2b4-e6981eabbfcb","https://www.ft.com/content/5b01f823-1bd1-4527-a944-1d592e606397","https://www.ft.com/content/d956141d-a52f-4616-a9a3-c8666256e8fb","https://www.ft.com/reports/responsible-business-education","https://www.ft.com/content/235c2ea8-96f6-4dfd-9898-ef04f0d2dcfb","https://www.ft.com/content/24d5caad-9c67-4f78-9d85-7ef6dc71a93d","https://www.ft.com/content/3db0e304-00b6-4497-99d5-b23b9592c697","https://www.ft.com/content/f23fc8f7-32c3-4c06-9bf7-e4773dacd68a","https://www.ft.com/content/1a1ff6e4-2010-40c4-93aa-9790541eac26","https://www.ft.com/content/3462f359-8a1d-4a1e-9098-a14bded3f00d","https://www.ft.com/content/5d926567-c6d7-49c3-9495-4bf9b12b01d4","https://www.ft.com/content/133f0660-6da4-4711-b6b3-bc1b4c3a0da9","https://www.ft.com/content/8bd9ff6c-870c-4efd-8584-537d7eae87e7","https://www.ft.com/reports/women-start"])),17117:i.r(75,"UPL001","17117"),17124:i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.os(i.s,13,["commercial lettings","commercial property","commerical property","income property","investing in commercial real estate","private rental","property deals","property development","property fund management","property investment","property market","real estate investment trust","student accommodation"]),i.ge(2),2),2592e6),i.tw(i.cb(0,i.os(i.cx,2,[476,170,436,"Real Estate Portfolio","Real Estate Development","Global Property Insight","Real Estate Investment Trusts",438,"UK Property Taxation","UK property taxation",482,"UK Property",134,242,"North America property","North America Property","Global property","Global Property","Asian Property","Asian property",202,"African property",200,221,"Europe Property","Commercial property","Asia Property","Africa Property","House Prices",88]),i.ge(2),2),2592e6)),i.tw(i.cb(0,i.os(i.s,1,["www.ft.com/reports/arab-world-property","www.ft.com/reports/ft-property-europe","www.ft.com/reports/ft-property-global","www.ft.com/reports/ft-property-london"]),i.ge(2),2),5184e6))),17125:i.r(104,1,"https://www.ftadviser.com/"),17127:i.r(31,1,1,19,490),17128:i.r(31,1,1,19,409),17135:i.r(75,"UPL015","17135"),17138:i.r(52,i.isp("financial_times_redshift","UPL017",!1,"17138"),0,i.os(i.s,0,["arts",572]),3,3,i.ocq(i.ocq(i.tw(i.cb(0,i.ref(37),i.ge(3),3),7776e6),i.tw(i.cb(0,i.os(i.cx,2,[173,24,28,36,25,37,45,26,10,91,29,88,174,41,445,"Social affairs",204,42,"Luxury",54]),i.ge(3),3),7776e6)),i.tw(i.cb(0,i.os(i.cx,11,[373,"Simon Kuper"]),i.ge(3),3),7776e6)),i.tw(i.cb(0,i.os(i.cx,12,[572,"retail","parties","music","gastronomy",183,"cities","cinema","classical concert",539,537,"coffee/tea","celebrity fan/gossip",265]),i.ge(4),4),2592e6)),17173:i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.ref(37),i.ge(1),1),7776e6),i.tw(i.cb(0,i.ref(12),i.ge(1),1),7776e6)),i.tw(i.cb(0,i.pc_(9,32),i.ge(1),1),7776e6))),17174:i.r(12,0,3,[64,"IFA/Financial Advisor"]),17176:i.q(i.ocq(i.ocq(i.tw(i.cb("FormSubmission",i.pe(33,"Submit Comment"),i.ge(2),2),2592e6),i.tw(i.cb(0,i.os(i.w,14,["wordpress.com","whatsapp.com","typepad.com","tumblr.com","t.co","stumbleupon.com","reddit.com","meneame.net","livejournal.com",536,"getpocket.com",514,"blogspot.sg","blogspot.it","blogspot.in","blogspot.com.gr","blogspot.com.es","blogspot.com.br","blogspot.com","blogspot.co.uk","blogspot.ca"]),i.ge(2),2),7776e6)),i.tw(i.cb(0,i.os(i.cx,11,["wolfgang münchau","philip stephens","martin wolf","janan ganesh","gillian tett","gideon rachman","edward luce"]),i.ge(2),2),7776e6))),17180:i.r(103,0,"MoneyMedia - must update this"),17182:i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.os(i.cx,2,[162,"UK tax",476,173,435,134,"Pound Sterling","International tax","Income tax",365,"Fixed-rate loans","Financial transaction tax","Final salary schemes",346,"Current accounts","Capital gains tax",238,"Help to buy","First-time buyers",133,310,351,479,483,139,"Stocks to Watch",468,"Structured Products","Savings accounts","Savings",88,482,174,"Personal pensions","Mortgages & Mortgage Rates",419,"Bank of England","Lenders",75,131,"US interest rates","US Interest Rates","UK interest rates","UK Interest Rates","Negative interest rates","Negative Interest Rates","Interest Rates",231,369,"Fund Regulation",368,128,"First time buyers","ETFs report","Age of the ETF",344,"Debt Capital Markets","Debt","Commodities Trading",124,176,393,168,165,203,175,156,317,465,"Currency safe havens","Currency havens","Yen","UK Tax","Travel Insurance","Tax Returns","Tax Inversion","Tax Evasion","Structured Investment Products","Sterling",446,"Residential","Reminbi","Remortgaging","Pound","New-build","Money Laundering",387,"Help to Buy","First Time Buyers",352,"Euro",345,"Dollar","Current Bank Accounts","Autumn Statement","Annuities"]),i.ge(4),4),2592e6),i.tw(i.cb(0,i.os(i.cx,8,[197,286]),i.ge(3),3),7776e6)),i.tw(i.cb(0,i.os(i.s,1,["ft.com/alphaville",521,275,524]),i.ge(3),3),7776e6))),17183:i.r(43,i.ocq(i.ocq(i.tw(i.cb(0,i.ps(1,"propertylistings.ft.com"),i.ge(1),1),5184e6),i.cb(0,i.os(i.cx,2,[174,437,"Property and mortgages",436,88,41,"Property Prices","UK house prices",248,"Residential Property",463,242,414,221,311,202,200,134,170,74,"Expats","Home","Interior","House",53,"Garden","Expat"]),i.ge(3),3)),i.cb(0,i.pc_(8,553),i.ge(3),3)),0,i.os(i.cx,12,[283,"private school",539,"buying/selling homes"]),3,3,i.cw(4,i.pe(22,20283)),i.pc(["aggregations","SegmentEntry"],20283)),17185:i.r(75,"UPL020","17185"),17186:i.q(i.ocq(i.ocq(i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,i.os(i.cx,2,[260,254,"Robotics","Quantum technologies","Internet of things","Data mining",209,333,385,201,157,"Big data",33,"Tech Unicorns","Robo","Quantum","Internet",223,"Cyber","Bioelectronics","Big Data",78]),i.ge(6),6),7776e6),i.tw(i.cb(0,i.os(i.cx,11,["Tim Bradshaw","Richard Waters",377]),i.ge(6),6),7776e6)),i.tw(i.cb(0,i.os(i.cx,8,[33,121,284]),i.ge(4),4),5184e6)),i.tw(i.cb(0,i.os(i.cx,12,["technology and computing","internet technology"]),i.ge(3),3),5184e6)),i.tw(i.cb(0,i.o([i.pc_(["userExecApp","jobListing","responsibilities"],386),i.os(i.cx,["userExecApp","jobListing","sector"],[470,33])]),i.ge(6),6),7776e6)),i.tw(i.cb(0,i.o([i.pc_(["userExecApp","browseJobsFiltersSelected","responsibilities"],386),i.os(i.cx,["userExecApp","browseJobsFiltersSelected","sector"],[470,33])]),i.ge(3),3),7776e6))),17187:i.r(104,1,576),17427:i.r(26,1567296e6,14,"europa.eu"),18212:i.r(37,0,i.ps(1,199),1,i.e,6,[2538855037,2232204205]),18238:i.r(93,2,2,[i.y(0,18),i.pc_(8,"r07o"),i.pc_(9,"ETF Hub"),i.pc_(2,162),i.os(i.s,13,[142,"exchange traded fund"])]),18239:i.r(28,1,1,[i.os(i.w,5,[116,94,114,115,57,231,"Fund/asset management","Financial Services","Banking","Accountancy & tax advisor"]),i.os(i.w,4,[141,"Broker/Trader/Advisor"]),i.os(i.w,3,[66,57,117,46,122,231,448,"Money/portfolio mgmt","Broker/trader","Accounting/finance"])]),18240:i.r(82,5184e6,0,i.os(i.s,1,["www.ft.com/ftfm","www.ft.com/fund-management"]),3,3),18245:i.r(70,4,4,i.os(i.s,1,[184,274,523]),3,3,8,[554,195,196]),18246:i.r(87,2,["Asset allocation","Mini-bonds","Covered bonds","Contingent convertible bonds",393,"Municipal bonds",165,168,176,156,175]),18247:i.r(93,1,1,[i.pc_(2,"FT wealth"),i.os(i.s,1,["ft.com/ft-wealth",525])]),18248:i.r(73,2,2,2,2,185,i.ref(14),i.os(i.cx,2,[138,91,29,"luxury travel",504,567,563,546,538,513,500,497,496])),18250:i.r(50,i.os(i.cx,2,["UK Care Homes","Pension","Final Salary","Ageing Populations","Next Act",446,133]),i.ocq(i.tw(i.cb(0,i.os(i.s,13,["annuities",507,508,64,145,559]),i.ge(2),2),5184e6),i.cb(0,i.pe(3,"Retired"),i.ge(1),1)),4,i.os(i.s,1,["ft.com/indepth/pensions-crisis","ft.com/next-act","ft.com/pensions-industry","ft.com/reports/top-401-advisers"]),i.ge(3),3,i.cx,12,["retirement planning",559,"eldercare"],4),18253:i.q(i.ocq(i.ocq(i.cb(0,i.os(i.s,3,["ifa/financial advisor","ifas","money/portfolio mgmt"]),i.ge(1),1),i.tw(i.cb(0,i.os(i.s,1,["ft.com/fund-management",522,275,527]),i.ge(1),1),5184e6)),i.tw(i.cb(0,i.ps(0,527),i.ge(1),1),5184e6))),18254:i.r(81,0,3,3,i.s,1,["ft.com/architecture",520,"ft.com/dance","ft.com/design","ft.com/film",184,"ft.com/house-home",274,523,"ft.com/music",526,"ft.com/television","ft.com/theatre",185,"ft.com/visual-arts"]),18260:i.r(44,i.cb(0,i.os(i.cx,2,[124,"Risk Management"]),i.ge(3),3),0,3,3,i.s,13,[271,"risk management","risk mitigation"],1,3,[122,448],1),18262:i.r(51,5,5,3,3,i.tw(i.cb(0,i.ps(1,"ft.com/companies/energy"),i.ge(3),3),7776e6),i.cx,17,["Shell","BP","BP PLC"],1,["energy"],i.os(i.cx,2,["Utilities",343,219,427,"Gas","Energy"]),3,3),18263:i.r(66,i.ps(1,"ft.com/personal-finance/property"),1,1,i.os(i.cx,2,["uk mortgage rates","property & mortgages","property and mortgages","buy-to-let",419,"Mortgage",174,88]),3,3),18264:i.r(104,1,"ft.com/ftfm"),18268:i.r(72,2,2,i.os(i.s,1,["ft.com/cyber-security","ft.com/reports/cyber-security"]),2,2,[i.pc_(8,121),i.pc_(17,"National Cyber Security Centre"),i.os(i.cx,2,[232,209,157])]),18269:i.r(63,3,3,3,3,3,3,[275,524,"markets.ft.com/data"],["personal finance","markets"],["client","title"],["binary options",507,508,"contracts for difference","currency pairs","forex","futures","fx","spread betting","trading"]),18270:i.r(69,1,1,2,["trading advice","high frequency trading","trading room"],i.s,1,[521]),18271:i.r(104,1,"ft.com/reports/women-start"),18294:i.r(37,0,i.o([i.os(i.w,4,[47,"Associate","Analyst",192,"Other",62,48,198,194,119,179,180,"Senior Manager/Dept Head","Secretary/Treasurer","Programme/Project Manager","Professional","Manager/Supervisor","Consultant"]),i.os(i.w,3,[182,188,"Knowledge management","General Management"])]),0,i.w,0,["ADD MONEY MEDIA (job title)","ADD FTA (job title- outsource invest- discretionary power)"]),18295:i.r(73,1,1,1,1,"ft.com/davos-2019",i.os(i.cx,2,["World Economic Forum in Davos",336]),i.ps(13,336)),18297:i.q(i.tw(i.cb(0,i.os(i.w,0,["ADD MM job title","ADD MM industry subsector","ADD MM department","ADD MM FQiq site"]),i.ge(1),1),7776e6)),18298:i.q(i.ocq(i.tw(i.cb(0,i.o([i.pe(34,"govt-public-service"),i.y(35,144),i.os(i.w,5,[144,"Govt/public service/NGO"]),i.os(i.w,4,[65,186,63,"Politician/Government Minister","Gov\'t/Int\'l org official","Diplomat/Sen Govt Officer"])]),i.ge(1),1),7776e6),i.cb(0,i.pe(0,"ADD MoneyMedia Industry susbector as foreign public company"),i.ge(1),1))),18300:i.r(104,0,"investorschronicle.co.uk"),18310:i.r(52,i.cb(1,i.os(i.s,1,["ftalphaville",533]),i.ge(2),2),0,i.pe(1,\'ADD IN FTA "investment" section\'),1,1,i.ocq(i.tw(i.cb(0,i.o([i.os(i.cx,2,["Alphaville","Invest",75,"Investment",388]),i.os(i.s,1,["ft.com/content/1d5c7cb2-35d9-11e7-bce4-9023f8c0fd2e","ft.com/content/53fa458e-6fa7-11e8-852d-d8b934ff5ffa","ft.com/content/eced4c88-2975-11e7-bc4b-5528796fe35c","ft.com/ftfm/responsible-investing","ft.com/reports/300-top-investment-advisers","ft.com/reports/impact-investing","ft.com/reports/invest-mozambique","ft.com/reports/investing-arab-world","ft.com/reports/investing-central-eastern-europe","ft.com/reports/investing-greece","ft.com/reports/investing-human-capital","ft.com/reports/investing-in-bahrain","ft.com/reports/investing-in-innovation","ft.com/reports/investing-in-liberia","ft.com/reports/investing-in-mauritania","ft.com/reports/investing-in-nigeria","ft.com/reports/investing-in-refugees","ft.com/reports/investing-in-romania","ft.com/reports/investing-in-tanzania","ft.com/reports/investing-in-turkey","ft.com/reports/investing-kenya","ft.com/reports/investing-kuwait","ft.com/reports/investing-mauritius","ft.com/reports/investing-mendoza","ft.com/reports/investing-new-ghana","ft.com/reports/investing-paraguay","ft.com/reports/investing-senegal","ft.com/reports/investing-ukraine","ft.com/reports/unlocking-yield","ft.com/uk-equities"])]),i.ge(1),1),7776e6),i.cb(0,i.os(i.cx,2,["venture capital investment","uk inward investment","uk direct investment abroad","structured investment products","social investment","quant investing","private investing","political risk and investment","peer-to-peer investments","passive investing","libor investigation","investor activism","investment trusts","investment research","investment banking","investing under trump","investing in funds","infrastructure investment","growth investing","foreign direct investment","ethical and responsible investment","emerging market investing","election investment strategies","business investment"]),i.ge(2),2)),i.cb(0,i.os(i.s,13,[279]),i.ge(2),2)),18312:i.r(49,4,4,6,6,4,i.cx,2,["Starting a Business","Silicon Roundabout","Women in Business","Start-up","Entrepreneur",236,161],1,["ft.com/reports/peoples-technology","ft.com/reports/uk-entrepreneurs","ft.com/reports/understanding-entrepreneurs","ft.com/reports/wealth-entrepreneurs"],13,["business leadership","enterprise","entrepreneur","innovation","leadership course","leadership training","management","thought leader"],4),18314:i.r(53,i.isp("financial_times_redshift","UPL001",!1,"18314"),5184e6,0,i.os(i.cx,12,[291,"sea travel","road travel","railway travel","holidays","budget travel",498]),3,3,i.ocq(i.tw(i.cb(0,i.o([i.os(i.s,13,["boutique hotel","city break","city guide","luxury flight","spa",291,"vacation","weekend break"]),i.os(i.s,1,["ft.com/adventure-holidays","ft.com/city-breaks","ft.com/cycling-holidays",185,"ft.com/winter-sports"])]),i.ge(1),1),2592e6),i.tw(i.cb(0,i.os(i.cx,2,["winter sports","city breaks",567,"travel books",563,546,538,"latin america holidays","family holidays",513,"cycling holidays",504,"beach holidays",500,"america holidays",497,496]),i.ge(2),2),2592e6)),i.tw(i.cb(0,i.ref(14),i.ge(3),3),7776e6)),18315:i.q(i.ocq(i.tw(i.cb(0,i.os(i.s,13,[264,"convertible bond","depressed bond prices"]),i.ge(3),3),5184e6),i.tw(i.cb(0,i.os(i.cx,2,[264,165,168,176,175,156,203]),i.ge(3),3),7776e6))),18316:i.r(104,1,"ft.com/reports/the-world"),18317:i.r(38,0,i.o([i.os(i.s,3,[564]),i.ps(7,288)]),0,1,"Need to ADD \'school name\' data"),18318:i.r(13,0,7),18320:i.r(101,3,64),18321:i.r(78,0,i.o([i.os(i.cx,12,["petrochemistry","mining industry","copper",276,191]),i.os(i.cx,2,["Commodity",124]),i.ps(13,124),i.os(i.s,1,["ft.com/commodities","ft.com/copper","ft.com/gold","ft.com/oil"])]),3,3),18323:i.r(40,13,34),18356:i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.ps(0,"markets.ft.com"),i.ge(5),5),2592e6),i.tw(i.cb(0,i.o([i.os(i.cx,2,[159,227,"ESG",162,128,571,"sustainable investment",287,"portfolio management",280,"low volatility","funds sector","fund managers","fund asset management",516,142,512,501]),i.os(i.s,13,["asset allocation",501,264,512,"esg",142,516,"fund",279,190,"oeics","portfolio managers","portfolio strategy","private bank","private client management","private clients",287,"socially responsible investing","sustainable investing","ucits","volatility",571,"wealth manager"])]),i.ge(5),5),2592e6)),i.cb(0,i.pc_(12,280),i.ge(1),1))),18437:i.r(63,5,5,4,5,4,5,["ft.com/pcwm2019",525],[173,491,128,464,"Wealth","Private Wealth","Wealth Funds","Personal Finance Advice & Comment",139,353],13,["fund selectors","stock broker","stock exchange","stockbroker","wealth"]),18439:i.r(101,0,7),18440:i.r(72,1,1,i.o([i.ps(0,"ADD \'FTA\' sections on multi-assets"),i.ps(1,"ftadviser.com/multi-asset/")]),1,1,[i.pc_(2,"Multi"),i.os(i.s,13,[544,190,"multiasset"])]),18443:i.r(40,27,4),18445:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,i.o([i.os(i.cx,17,[417,416,401,400,329,397,398,403,23]),i.os(i.s,1,[184,"ft.com/reports/destination-cape-town-winelands","ft.com/reports/wine-buying-investing","ft.com/wine"])]),i.ge(2),2),5184e6),i.tw(i.cb(0,i.os(i.cx,2,[417,416,401,400,329,398,397,403,"Global Spirits",99,"Drinks",246,56,"Food",50,23,"Beringer Blass Wine Estates","Robert Parker (Wine Critic)",31]),i.ge(2),2),5184e6)),i.cb(0,i.os(i.cx,11,[132,399,422]),i.ge(3),3)),i.tw(i.cb(0,i.os(i.cx,31,["Stan Kroenke","Johann Rupert","Bernard Arnault","Marlon Abela",422,"Gordon Ramsay","Ruth Rogers",132]),i.ge(1),1),7776e6))),18731:i.r(75,"UPL005","18731"),18732:i.r(75,"UPL002","18732"),18733:i.r(75,"UPL003","18733"),18734:i.r(75,"UPL004","18734"),18735:i.r(37,0,i.y(3,85),0,i.s,1,["portfolio"]),18782:i.r(16,3),18790:i.r(92,"Business education"),18791:i.r(92,"Due Diligence"),18797:i.r(75,"UPL008","18797"),18803:i.r(75,"UPL009","18803"),18805:i.r(58,"UPL012","18805","UPL013","18805","UPL011","18805"),18806:i.r(75,"UPL013","18806"),18807:i.r(36,i.isp("financial_times_redshift","UPL012",!1,"18807"),i.isp("financial_times_redshift","UPL013",!1,"18807")),19597:i.q(i.cb(0,i.os(i.s,["isp_info","organization"],[509,288,"university"]),i.ge(1),1)),19669:i.r(89,[i.e_(["name"],"World Health Organization"),i.y_(["name"],455),i.e_(["name"],"Sanofi SA"),i.e_(["name"],"Roche Holding AG"),i.e_(["name"],"Puma Biotechnology Inc"),i.e_(["name"],"Pharmaceuticals"),i.e_(["name"],"Pharmaceutical Research & Manufacturers of America"),i.e_(["name"],"Pharmaceutical NV"),i.e_(["name"],"Pfizer Inc"),i.e_(["name"],"Novartis AG"),i.e_(["name"],"National Health Service"),i.e_(["name"],"Merck & Co Inc"),i.e_(["name"],"Medical Technologies"),i.e_(["name"],"Medical Products"),i.e_(["name"],"Johnson & Johnson Co Inc"),i.e_(["name"],"Healthcare Support Services"),i.e_(["name"],"Health Tech"),i.e_(["name"],"Health Foundation"),i.y_(["name"],129),i.e_(["name"],"Global Pharmaceuticals"),i.e_(["name"],"Global Health"),i.e_(["name"],"GlaxoSmithKline PLC"),i.e_(["name"],"European Medicines Agency"),i.y_(["name"],125),i.e_(["name"],"Department of Health UK"),i.y_(["name"],123),i.e_(["name"],"Biopharma"),i.e_(["name"],"AstraZeneca PLC")]),19902:i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.o([i.pc_(8,"r05j"),i.ps(1,"ft.com/companies/automobiles")]),i.ge(2),2),5184e6),i.tw(i.cb(0,i.os(i.cx,2,[76,"Midlands Engine",228,105,"Flying cars",160,337,"Diesel engines","Connected Car"]),i.ge(2),2),5184e6)),i.tw(i.cb(0,i.os(i.cx,17,["Yamaha Motor Co Ltd",489,"AB Volvo","Volkswagen of America Inc.","Volkswagen Leasing GmbH","Volkswagen Slovakia","Volkswagen AG",488,"Vertu Motors PLC","Verband der Automobilindustrie eV","Vauxhall Motors Ltd","Toyota Motor Corp","TI Automotive Ltd","Tesla Inc","Tata Motors Ltd","Tata Group","Society of Motor Manufacturers & Traders Ltd",461,460,"SAIC Motor Corp Ltd","PROTON Holdings Bhd","Porsche Automobil Holding SE",434,"Nissan Shatai Co Ltd","Nissan Motor Co Ltd","Morgan Motor Co Ltd","Mitsubishi Motors Corp",413,"McLaren Automotive Ltd","Mazda Motor Corp","Maserati SpA","Marshall Motor Holdings PLC","Kia Motors","Jardine Motors PLC","Jaguar Land Rover Ltd","Hyundai Motor Co","Hyundai Corp","Hybrid Air Vehicles Ltd","Honda Motor Co Ltd","Guangzhou Automobile Group Co Ltd","Group Lotus PLC","Great Wall Motor Co Ltd","General Motors Co","Geely Automobile Holdings Co Ltd","Ford UK","Ford Motor Credit Co LLC","Ford Motor Co","Fiat Chrysler Automobiles","Federation Internationale de l\'Automobile","European Automobile Manufacturers Association","Eicher Motors Ltd","Ducati Motor Holding SpA","Dollar Thrifty Automotive Group Inc","Delphi Automotive PLC","BYD Auto Co Ltd","Brilliance China Automotive Holdings Ltd","BMW","Rolls-Royce & Bentley Motor Cars Limited","Bentley Motors Ltd","Beijing Automotive Industry Holding Co","Automakers Limited","Autotrader",313,"Autoeuropa","Audi AG","Aston Martin Lagonda","Aston Martin Lagonda Global Holdings PLC","American Automotive Policy Council Inc","American Automotive Policy Council","Alliance of Automobile Manufacturers","Advance Auto Parts Inc","Advance Auto Parts","a.o. smith automotive products company"]),i.ge(2),2),5184e6))),20008:i.r(50,i.os(i.cx,8,[197,553,"r06n","r06m","r06b",554,195,196]),i.ocq(i.ocq(i.scq(i.tw(i.cw(2,i.pc(["aggregations","SegmentEntry"],17173)),7776e6),i.tw(i.cw(4,i.pe(22,17173)),7776e6),i.ge(1)),i.tw(i.cb(0,i.ps(14,118),i.ge(1),1),7776e6)),i.tw(i.cb(0,i.ps(0,118),i.ge(1),1),7776e6)),3,i.o([i.os(i.cx,2,[45,29,42,"Luxury Living",37,10,"Watches and Jewellery",177,"FT Weekend",26,25,"Art Basel",24]),i.os(i.s,13,["art basel","fashion week","ft weekend","global travel"])]),i.ge(3),3,i.s,1,["ft.com/art-of-fashion","ft.com/arts",520,"ft.com/fashion-shows",184,274,526,185],3),20277:i.r(31,1,1,1,573),20278:i.r(31,1,1,1,"https://live.ft.com/"),20279:i.r(31,1,1,1,"www.globalriskregulator.com"),20281:i.r(27,["bdp.ft.com","non-execs.com"]),20283:i.r(70,2,2,i.ps(1,"https://www.ft.com/house-home"),1,1,2,[53,28,"Design & Architecture",52,"Artisans","Green Architecture",67]),20431:i.r(30,1),20469:i.r(31,1,1,1,"https://app.ft.com/"),20494:i.r(31,1,1,1,"https://iberdrola.ft.com"),20531:i.r(75,"UPL016","20531"),20534:i.r(75,"UPL019","20534"),20645:i.r(12,0,23,[181,"channel article","channel home"]),20646:i.r(12,0,23,["Brand Feature","Brand Feature Video","Brand Feature Infographic","Brand Feature Article","Brand Feature Home"]),20714:i.r(58,"UPL038","20714","UPL039","20714","UPL037","20714"),20715:i.r(58,"UPL041","20715","UPL042","20715","UPL040","20715"),20833:i.r(36,i.scq(i.cw(2,i.pc(["aggregations","SegmentEntry"],17124)),i.cw(4,i.pe(22,17124)),i.ge(1)),i.scq(i.cw(2,i.pc(["aggregations","SegmentEntry"],17183)),i.cw(4,i.pe(22,17183)),i.ge(1))),21070:i.r(4,7776e6,i.isp("financial_times_redshift","UPL015",!1,"21070"),i.scq(i.tw(i.cw(2,i.pc(["aggregations","SegmentEntry"],17138)),7776e6),i.tw(i.cw(4,i.pe(22,17138)),7776e6),i.ge(1)),7776e6,i.os(i.w,3,[49,122,46,83,57,96,66,117]),1,i.a([i.y(3,85),i.os(i.cx,2,[139,257,465,173,"Futures contracts"])]),1,i.w,5,[57,189,82,84,116,94,115,114],i.w,4,[3,97,6,4,5,2,141]),21267:i.r(31,1,1,1,"https://ftalphaville.ft.com"),21535:i.r(59,i.a([i.os(i.cx,2,[223,78,33]),i.os(i.cx,2,[208,445,444])]),4,4,i.os(i.cx,12,["television",511,"social network","ecommerce"]),4,i.os(i.cx,2,["Streaming services","Gadgets","Social Media","iPhone",226,"Mobile payments","Mobile devices","Consumer Electronics show",294,260]),4,4,4),21538:i.r(53,i.cb(0,i.a([i.os(i.cx,2,[253,89]),i.os(i.cx,2,["UK direct investment abroad",259,"Infrastructure investment","Business investment","Growth investing","Private investing",342,75,131])]),i.ge(4),4),24192e5,0,i.os(i.w,1,[277,"https://www.ft.com/ftfm/responsible-investing"]),4,4,i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,i.a([i.ref(6),i.os(i.cx,8,["r07s","S_6875","r07b",556,197])]),i.ge(4),4),24192e5),i.tw(i.cb(0,i.a([i.os(i.cx,12,[532,"bank","finance","industry financing"]),i.ref(6)]),i.ge(4),4),24192e5)),i.tw(i.cb(0,i.os(i.cx,2,[165,253,347,"Social and environmental impact investment",159]),i.ge(4),4),24192e5)),i.tw(i.cb(0,i.a([i.os(i.cx,2,[354,259,75,233]),i.ref(6)]),i.ge(4),4),24192e5)),i.isp("financial_times_redshift","UPL009",!1,"21538")),21540:i.q(i.tw(i.cb(0,i.o([i.os(i.cx,8,[146,120,"r01"]),i.os(i.cx,12,[562,550,191,511,"automotive"]),i.os(i.cx,17,["Mariner Energy LLC","Endeavor Energy Corp.","High Velocity Alternative Energy Corp.",383,"Shell WindEnergy","Synenco Energy","Irvine Energy","Athlon Energy Inc","Bois d\'Arc Energy","Oando Energy Resources","Bosch Solar Energy AG","Evolve Energy Ltd.","Defense Logistics Agency Energy","New Energy & Industrial Technology Development Organization","BlueCreek Energy","Atomic Energy Society of Japan","Shanxi Energy Industries Group Ltd.","Naked Energy Ltd.","Transeuro Energy Corp.","PetroLatina Energy PLC","NextEnergy Corp.","Stirling Energy Systems","FG Energy SRL","Energy Research Centre of the Netherlands","NextEra Energy Resources LLC","Archimede Solar Energy SRL","Sanyo Energy USA Corp.","First Energy Oman","DC Energy LLC","Deep Gulf Energy LP","Ontelaunee Energy Center","RWE Energy AG","Institute for Energy Research","Laricina Energy Ltd.","Nippon Renewable Energy KK","Eurus Energy Holdings Corp.","Martin Energy Trading LLC","PowerShares Global Nuclear Energy Portfolio","ITI Energy Ltd.","Albian Sands Energy","Pakistan Atomic Energy Commission","World Council for Renewable Energy","The Energy Saving Trust Ltd.","Bear Energy LP","Industrial Energy Ltd.","Gazprom Global Energy Solutions Ltd.","Grove Energy","Korea Energy Economics Institute Foundation","Western Energy Alliance","Atlas Energy Resources LLC","Platinum Energy LLC","Fisterra Energy SL","Caiman Energy LLC","Cobalt Energy Ltd.","Gateway Energy Services Corp.","New Energy Fund","AGR Energy Ltd. No. 1","International Association for Energy Economics","The Energy Institute (United Kingdom)","Direct Energy Source LLC","Apache Energy Limited","BA Energy","Eurogas Corp (Old name of Dundee Energy Ltd)","Pacific Energy Resources","Elko Energy","Prime Energy Development Ltd.","BDI - BioEnergy International AG","Express Energy Services Operating LP","Australian Institute of Energy","Business Energy Solutions Ltd.","Northern Tier Energy LP","Sound Energy","Environmental Energy Technologies","GDF Suez Energy Europe & International","Enhance Energy","Bridge Energy ASA","Connected Energy Corp.","Miller Energy Resources Inc","Ardenham Energy Ltd.","Mytrah Energy Ltd","Endeavour Energy Netherlands BV","Talisman Energy Resources Ltd.","International Solar Energy Society","Advanced BioEnergy GP LLC","SUEZ Energy North America","Supporters of Nuclear Energy","Honiton Energy Ltd.","Chosun Energy Pte Ltd.","Tamar Energy Ltd.","Better Energy Systems","Energy Matters Pty Ltd.","Miller Energy LLC","Ukrainian Energy Register OJSC","Energy Saving Trust Foundation","Red Cap Energy Pty Ltd.","Texas Energy Future Holdings LP","Inc. /Old/","Pinnacle Renewable Energy","Cairn Energy USA LLC","Starcrest Nigeria Energy Ltd.","NEC Energy Solutions","Directed Energy Professional Society",408,"Shandong Energy Group Co.","Spartan Energy Corp.","Atomic Energy Research Establishment","Lime Energy Co.","Asia Pacific Energy","ACF Renewable Energy Ltd.","Palladian Energy Ltd.","Energybuild Group Ltd.","Relentless Energy Corp.","Global Natural Energy PLC","NiSource Energy Partners LP","China Energy Research Society","Cutuco Energy Central America","Neconde Energy Ltd","Liwa Energy Ltd.","Texas Retail Energy LLC","Premier Renewable Energy Fund Ltd.","Pentagon Energy LLC","Avatar Energy Pty Ltd.","Japan Energy Corp.","Talen Energy Corp.","Enbridge Energy Management LLC","FirstEnergy Solutions Corp.","National Modern Energy Holdings Ltd.","Lithium Energy Japan KK","Citizens for Affordable Energy","Korean Peninsula Energy Development Organization","Energy Regulatory Commission","Chinese Wind Energy Association","Aurora Energy Ltd. (New Zealand)","Koch Energy Trading","Harbour Energy LP","Alberta Energy Regulator","Atomic Energy Power Corp.","Polish Wind Energy Association","Ice Energy Holdings","PLDT Communications & Energy Ventures Inc","Reenergy Group Plc","Rex Energy Corp.","Challenger Energy Corporation","Arawak Energy Corporation","Energy Star","China Energy Ltd.","SHV Energy Limited","Triana Energy LLC","China New Energy Chamber of Commerce","Ocean Energy Inc.","Coastal Energy Corp.","GE-Hitachi Nuclear Energy Holdings LLC","Chevron Energy Solutions Co.","Magma Energy Corp.","Constellation Energy Nuclear Group LLC","OptimumNano Energy Co.","Nuclear Energy Agency (NEA)","Growth Energy","Marlin Energy LLC","Consumer Energy Alliance","Amber Energy Inc.","Mariner Energy","Fourth Partner Energy Pvt Ltd.","Emirates Nuclear Energy Corp.","Mercuria Energy America","China Pingmei Shenma Energy & Chemical Group Co.","Asia Energy","ARC Energy Pty Ltd.","Proven Energy Ltd.","STE (Clean Recycling & Energy) Plc","Summit Energy Co. LLC","Concord Energy Inc.","Covanta Energy Inc.","Alberta Energy Co. Ltd.","BioTherm Energy (Pty) Ltd.","Wave Energy Scotland Ltd.","Redbank Energy Ltd","Direct Energy LP","Chemoil Energy Ltd.","Front Range Energy LLC","Ross Smith Energy Group Ltd.","Braemar Energy Ventures","Navetas Energy Management Ltd.","Panoche Energy Center LLC","LG&E Energy Corp.","China Guangdong Nuclear Energy Development Co.","American Energy Group Inc.","CQ Energy Canada Partnership","MAN Energy Solutions Schweiz AG","PrimeWest Energy Trust","Wells Fargo Energy Group","RPM Energy LLC","Hanwha Energy Corp.","Hess Energy Trading Co LLC","SHV Energy NV","Mesa Energy Investment Partners LLC","Energy Ventures Inc.","Japan Renewable Energy Foundation","Energy Performance","Evergreen Energy","Ranhill Energy Sdn Bhd","The Consilience Energy Advisory Group Ltd.","CPS Energy Resources Plc","ONGC Mittal Energy Ltd.","Adira Energy Corp.","Richmond Energy Partners Ltd.","Shell Energy Australia Pty Ltd.","Eagle Rock Energy Partners L.P.","Energy America LLC","EDF Energy Renewables Ltd.","Bolivar Energy Corp.","Honiton Energy (Baotou) Co. Ltd.","Himin Solar Energy","Energy Watch Pty Ltd.","Moorland Energy Ltd.","BP Energy Co.","Energy Policy Research Foundation","Lambert Energy Advisory Ltd","Peoples Energy Inc.","Riverstone Energy","redT Energy","Black Gold Energy LLC","Barrick Energy","Cordillera Energy Partners LLC","NGS Energy LP","Global Energy Decisions LLC","Energy Intelligence Group","Energy Management Inc.","Shoreline Energy International Ltd.","Energy Northwest","Empire Energy Inc.","EDF Energy Nuclear Generation Ltd.","Oliver Wyman Energy Group Ltd.","Caelus Energy Alaska LLC","Fulcrum BioEnergy","Dominion Energy Virginia","IC Green Energy Ltd.","Emerging Energy Research LLC","88 Energy Ltd","WEMS Energy Centre Ltd.","Bow Energy Pty Ltd.","Infinity Bio-Energy Ltd","Jordan Atomic Energy Commission","Ice Energy Technologies Ltd.","Energy XXI Gulf Coast","MarkWest Energy GP LLC","Geothermal Energy Association","Global Energy Solutions Corp. Ltd.","Bidtimes PLC (Old name of PowerHouse Energy Group PLC)","UMC Energy PLC","Addax Bioenergy Sierra Leone Ltd.","Patterson-UTI Energy Inc.","Moncada Energy Group SRL","OMV Maurice Energy Ltd.","India Energy Forum","Energy Market Authority","Energy Technology","British Institute of Energy Economics","Platinum Energy Solutions","LP","Spectra Energy Partners","American Energy Innovation Council","John Deere Wind Energy","Energy Transportation LLC","Westcoast Energy","Integrated Energy Systems Ltd.","Bioenergy","Pioneer Southwest Energy Partners USA LLC","Amec Wind Energy Ltd.","Fission Energy Corporation","Atomic Energy Corp.","Irish Wind Energy Association","Tricon Energy Ltd.","First Energy Bank BSC","TAG Energy Solutions Ltd.","BreitBurn Energy Corp.","Stone Energy Corp","Clean Energy Capital LLC","PT Paiton Energy Company","Duncan Energy Partners LP","Solid Energy","Consumers Energy Co.","AmerGen Energy Inc.","Warwick Energy Ltd","Vivo Energy Investments BV","Toro Energy Inc.","EURATOM - European Atomic Energy Community","Energy Studies Institute","Nantenergy","Energy Research Partnership","Canamens Energy Ltd.","China Energy Conservation & Environmental Protection Group Co.","CH Energy Group","Essential Energy Ltd.","RAO Energy System of East PJSC","TAC Energy","RPS Energy Ltd.","Energy Exchange Corp.","Innovative Energy Solutions","GWM Renewable Energy SpA","Country Energy","UniSource Energy Corp","Energy Resources Institute","Energy Cranes LLC","Dubai Energy","National Energy Regulator of South Africa","Rockyview Energy","Penn West Energy Trust","Babcock & Brown Wind Energy SRL","KSK Emerging India Energy Fund Ltd.","Columbia Energy & Environmental Services","GE-Hitachi Nuclear Energy International LLC","National Renewable Energy Laboratory","BreitBurn Energy Partners LP","Leyshon Energy Ltd","Southcross Energy LLC","AWS Ocean Energy Ltd.","GCL Poly Energy Holdings Ltd","Urban Green Energy","Opus Energy Group Ltd.","Clean Energy Council","Zayed Future Energy Prize","RusEnergy Agency","Octopus Energy","Rio Tinto Energy","Shallow Water Energy Security Coalition","Newco Energy Acquisition Holdings LLC","Utilita Energy Ltd","Energy Biosciences Institute","AGR Energy AS","Energy Research Inc.","Renewable Energy Corp.","Baker Energy","Greenergy BVBA","Energy Fuels Inc.","Flint Energy Services Ltd.","United Energy Systems of Ukraine","China Renewable Energy Society","Chinese Renewable Energy Industries Association","Bow Valley Energy","Badlands Energy","FACTS Global Energy","Pacific Coast Energy Co.","Online Energy","Global Marine Energy Plc","Global Bioenergy Partnership","Shenzhen Energy Environmental Protection Co. Ltd.","Energyaustralia","China Wind Energy Association","Pacific Energy Partners LP","Puget Energy Inc.","Shanghai Chaori Solar Energy Science & Technology Co Ltd","CIC Energy Corp","Ur-Energy","Energy Partners LLC (Indiana)","Aquion Energy","Alon USA Energy Inc","Mirant Energy Trading","Pavilion Energy Corp","The Energy Security Leadership Council","GE Energy Rentals","Energy Services Group LLC","Oriental Energy Resources Ltd","SDX Energy","Mitchell Energy & Development Corporation","Copano Energy LLC","Pearl Energy Ltd","Strategic Energy LLC","Peabody Energy Australia Pty Ltd.","Principle Energy Ltd.","Provident Energy Ltd","National Renewable Energy Centre Ltd.","Green Mountain Energy Company","STX Energy Co.","Reykjavik Energy Invest","Crosstex Energy Inc.","New Energy Company","Energy Infrastructure Merger Corp.","World Wind Energy Association","Sinotech Energy Ltd","Energy Technologies (Ukraine)","Atomic Energy Organization of Iran","Alternative Energy Ltd","The Energy & Minerals Group LP","Fieldwood Energy LLC","Spirit Energy Corporation","Wham Energy","Japan Atomic Energy Agency","Prometheus Energy Co","SouthWest Energy","Baoding Tianwei Yingli New Energy References Co. Ltd.","Energy Technique PLC","Black Elk Energy LLC","Independent Energy Holdings PLC","Sunnova Energy Corp.","Future Energy Pty Ltd.","BizzEnergy Ltd.","Siemens Energy","Standard Renewable Energy Group LLC","Greenergy International Ltd.","Encore Energy Partners LP","Panasonic EV Energy Co. Ltd.","Hess Energy Trading Co. (Singapore) Pte Ltd.","FT Energy","National Energy Technology Laboratory","Energy Bank Sao Tome & Principe","Flint Energy Services","Industry & Energy","South Korea Ministry of Commerce","Energy Partners Inc.","NOF Energy Ltd","Atlantic Energy Inc.","Anzon Energy","GeoSouthern Energy Corp.","China Power New Energy Development Co.","Hunting Energy Services (Canada) Ltd.","Cambridge Energy Research","Athlon Energy LP","ICAP Energy LLC","Phoenix Energy Holdings Ltd.","Energy Financing Team Ltd.","Recurrent Energy","VTTI Energy Partners LP","Forum Energy PLC","Nexus Energy Ltd","Solace Renewable Energy GmbH","Ingenious Clean Energy Income Ltd.","Our Energy Policy Foundation","SSP Energy Ltd.","MD America Energy LLC","Resolute Energy Corp","California Energy Commission","Sempra Energy Trading Corp.","Alinta Energy Group (old name of Redbank Energy Ltd)","Beijing Energy Investment Holding Co.","Centurion Energy","Climate Energy Ltd.","Cornwall Energy Associates Ltd","Drillsearch Energy Ltd.","Schuepbach Energy International LLC","Inspirit Energy Ltd.","Darley Energy Plc","The Texas Clean Energy Project LLC","Abaco Energy Technologies LLC","South Korea Ministry of Trade","Rice Energy","IOT Infrastructure & Energy Services Ltd.","Renovalia Energy SA","Quantum Energy Partners LLC","Energy Developments Limited","Minimise Energy Ltd.","Global Energy Management Institute","Duke Energy Renewables","Airvolution Energy Ltd.","Atlas Energy","Composite Energy Ltd.","Eco Energy Co.","Greenergy AB","Energy Companies","Hilcorp Energy Co","Emerging Energy & Environment LLC","Seventy Seven Energy","Spirit Energy LLC","Energy East Corp.","Houston Energy Partners","Dolphin Energy Ltd.","Germany Ministry of Economic Affairs & Energy","Energy Intelligence","Sunverge Energy","Pure Energy Resources Pty Ltd.","Kazenergy","WSP Future Energy Ltd.","Hudson Capital Energy LLC","Arcadia Energy Suisse SA","Longford Energy","Tidal Energy Marketing (U.S.) LLC","Green Energy Corp.","Energy Power Resources Ltd.","Lincoln Clean Energy LLC","Kuwait Energy Plc","All Energy Corp.","American Energy Capital Partners LP","Sarawak Energy Bhd.","Clean Energy Partners LLP","RAAM Global Energy Co.","Caspian Energy Group JSC","Pavilion Energy Pte Ltd.","Independent Energy Inc.","Google Energy Pvt Ltd.","Blue Energy Co","Forte Energy NL","London Energy Brokers\' Association","Canadian Energy Research Institute","Korea Atomic Energy Research Institute","German Renewable Energy Federation eV","National Energy Commission","EnergySource LLC","Murray Energy Corp","Continuum Wind Energy Pte Ltd.","M&C Energy Group Ltd.","Flow Energy Ltd.","Accenture Global Energy","Bandanna Energy Ltd.","Spark Energy LLC","Energy Retail Association","Pure Energy Corp.","Viva Energy Australia Group Pty Ltd.","Dominion Energy Inc.","United States Energy Association","Argent Energy Ltd.","Ncondezi Energy Ltd","Bluebird Energy PLC","Texas Alliance of Energy Producers","Greenpark Energy Ltd.","Tokamak Energy Ltd.","Positive Energy","MarkWest Energy Partners LP","Energy Advantage","Dune Energy","Integrys Energy Group Inc","Rio Tinto Energy America","American Eagle Energy Corp.","Maple Energy PLC","Murray Energy Corp.","Stratic Energy Corp.","MIT Energy Initiative","National Energy Group Inc","Rice Energy LP","Enbridge Energy Partners LP","Essar Energy Investment Ltd.","European Federation of Energy Traders","Riverstone Energy LP","DCC Energy Ltd. (Ireland)","Excelerate Energy LP","Green Energy (UK) Plc","Clarke Energy Ltd","Van Dyke Energy Co.","BrightSource Energy Inc","Austin Energy","Institute for 21st Century Energy","Argent Energy Trust","Renova Energy PLC","Jubilant Energy NV","Invenergy LLC","Zenergy Power PLC","RRI Energy Inc","Atomic Energy Regulatory Board","Scottish & Southern Energy Power Distribution Ltd.","Gintech Energy Corp.","Celtic Energy Ltd.","Pure Energy Resources Inc.","APR Energy LLC","Inc. (Texas)","American Energy Partners","Offshore Renewable Energy Catapult","Welspun Energy Ltd","UTS Energy","Wisconsin Energy Corp","MMC Energy Inc.","Energy Economics","Global Energy","Renewable Energy Systems Limited","LGO Energy PLC","BP Alternative Energy Ltd.","National Commission on Energy Policy","TECO Energy Inc","Caparo Energy Ltd (old name of Mytrah Energy Ltd)","Dominion Energy South Carolina","Gibson Energy ULC","Integral Energy Management LLC","Asia Coal Energy Ventures Ltd.","Parnon Energy Inc","Pira Energy Group","NextEnergy Capital Ltd.","Blueknight Energy Partners GP LLC","FirstEnergy Capital LLP","EEW Energy from Waste GmbH","GE Nuclear Energy","United Energy AS","Oxis Energy Ltd.","BlackRock New Energy Investment Trust PLC","Samruk-Energy JSC","Solartech Energy Corp","Third Energy Offshore Ltd.","Kuwait Energy Co. KSCC","Star Energy Group PLC","Shanghai International Energy Exchange Corp","Element Energy","Buccaneer Energy Ltd.","Matrix Energy Solutions Ltd","Energy Conversion Devices Inc","Auhua Clean Energy PLC","Viva Energy Australia Pty Ltd.","Geneva Energy Markets LLC","NGP Energy Capital Management LLC","Atlas Energy Inc","Maguire Energy Institute","PetroBakken Energy Ltd","Spring Energy Norway AS","Harvest Energy Trust","C&J Energy Services Ltd.","Energy Efficiency & Renewable Energy","Antrim Energy Inc","Neptune Energy","Energy Policy Institute of Canada","Star Energy Corp.","Atomic Energy of Canada Limited","Centrica Energy Ltd.","Urasia Energy Ltd","Sterlite Energy Ltd","Black Sea Energy Limited","Daylight Energy Ltd.","Abu Dhabi Future Energy Co PJSC","Resolute Energy Corp.","Iraq Energy Institute","Leyshon Energy Ltd.","Bayfield Energy Holdings PLC","China Integrated Energy Inc","Energy Management Institute","Novera Energy","Philadelphia Energy Solutions LLC","Delek Energy Systems Ltd","United Kingdom Atomic Energy Authority","Talos Energy LLC","Voller Energy","Inc. (Delaware)","Clayton Williams Energy","WSP Environment & Energy LLC","Energy Africa Limited","Great Plains Energy Inc","Energy East Inc.","Industrial Energy Consumers of America","Green Energy","Westar Energy Inc","Indian Energy Ltd","Energy Transfer Co. Ltd.","Allegheny Energy Inc","SK Energy Co Ltd","CEFC China Energy","VeraSun Energy Corporation","Energy Research Institute","Infinis Energy Holdings Ltd","GMP FirstEnergy","Hurricane Energy PLC","Energy Capital Partners LLC","Topaz Energy & Marine Ltd","Bulgarian Energy Holding EAD","PBF Energy Co LLC","Clayton Williams Energy Inc.","Energy Assets Group PLC","Parsley Energy LP","Coastal Energy Co","Shoreline Energy Corp.","Atomic Energy Commission","Third Energy UK Gas Ltd","Direct Energy Marketing Ltd","Lambert Energy Advisory Ltd.","Renewable Energy Holdings PLC","Energy Group PLC","Solar Energy Limited","Panther Energy Trading LLC","Helius Energy PLC","SeaEnergy PLC","Old Firm Energy Corp.","Monster Energy Co","Energy Development Corp","Energy Brands Inc","Seven Energy International Ltd","Environment & Water","Council on Energy","Geneva Energy Markets Europe Ltd.","Nuclear Energy Institute","Horizon Acquisition Co PLC (old name of APR Energy PLC)","Genel Energy International Ltd","European Marine Energy Centre Ltd","Alkane Energy PLC","Regency Energy Partners LP","Co-operative Energy Ltd","Athlon Energy","Rystad Energy AS","Tooley Energy Ltd.","Blue Water Energy LLP","Association for the Conservation of Energy","Nighthawk Energy PLC","Energy Solutions Inc","Intelligent Energy Holdings PLC","Puma Energy International BV","World Energy Council","Renewable Energy Generation Ltd","Energy Source LLC","Progress Energy Resources Corp","Siccar Point Energy Ltd.","NV Energy Inc","GenOn Energy Inc","Harbour Energy Ltd.","Caracal Energy Inc","World Energy Congress","Energy & Resources Institute","Energy XXI Bermuda Ltd","Global Wind Energy Council","European Wind Energy Association","UK Energy Research Centre","Dart Energy Ltd","American Wind Energy Association","International Renewable Energy Agency","Spectra Energy Corp","MidAmerican Energy Holdings","Energy Aspects Ltd","Solar Energy Industries Association","Cornwall Energy Partnership Ltd.","Emerald Energy PLC","Linn Energy LLC","Berau Coal Energy Tbk PT","EIG Global Energy Partners LLC","European Energy Exchange AG","Fairfield Energy Ltd","Pan American Energy LLC","Petrohawk Energy Corp","Sibir Energy","UK Atomic Energy Authority","Renewable Energy Association","Walter Energy Inc","Ovo Energy Ltd","Arrow Energy Ltd","CEFC China Energy Co.","MidAmerican Energy Co","Cobalt International Energy Inc","Kinder Morgan Energy Partners LP","Massey Energy Co","Xcite Energy Ltd","APR Energy PLC","Burren Energy PLC","Imperial Energy","Energy Transfer Partners LP","Cambridge Energy Research Associates","Energy UK","Talisman Energy Inc","Ithaca Energy Inc","XTO Energy Inc","Salamander Energy PLC","Constellation Energy Group Inc","Energy Aspects Ltd.","Energy & Industrial Strategy UK","Department for Business","State Atomic Energy Corp","Cove Energy PLC","PFC Energy Inc","Oxford Institute for Energy Studies","Ophir Energy PLC","New Energy Finance Ltd","Mercuria Energy Group Ltd","Essar Energy PLC","Energy Future Holdings Corp","EDF Energy PLC","British Energy Group","Energy Department","International Atomic Energy Agency","Energy Information Administration US","International Energy Agency","Scottish Power Ltd","Iberdrola Renovables SA","Shell Chemicals Company","Shell Petrochemicals Co. Ltd.","Shell Oil Company","Npower Energies","NPower","EDF Electric Company","BP Group Plc","ExxonMobil Chemical Co.","Exxon Corp."]),i.os(i.cx,2,["Nuclear energy","UK energy",339,428,"Natural resources"])]),i.ge(8),8),24192e5)),21541:i.r(98,i.pc_(12,529),[131,233,370,227,128,139],8,286,["AIG Trading Corp.","HSBC Global Asset Management Ltd.","HSBC Global Asset Management UK Ltd","JPMorgan Chase Co. (Investment Management)","Morgan Stanley Investment Management","UBS Investment Bank","AXA Investment Managers","Morgan Stanley Private Wealth Management Ltd.","Deutsche Bank Wealth Management","BNP Paribas Wealth Management (Singapore)","UBS Private Wealth Management","Barclays Wealth International","Barclays Wealth & Investment Management","Investec Wealth & Investment Ltd","Citigroup Inc","Credit Suisse Group AG","BNP Paribas SA","Bank of America Corp","Goldman Sachs Group","JPMorgan Chase & Co","UBS Group AG"]),21548:i.r(98,i.os(i.cx,12,[518,183,270]),[104,108,31,72,51,23],11,132,["New York Wine & Culinary Center","Jiugui Wine Co. Ltd.","Brandywine Bookmaking LLC","Bordeaux Wine Investments Ltd.","Ascot Wine Management SA","Wine Invest","Hong Kong Wine Vault","Brandywine Fund Inc.","South African Wine Industry Trust","International Wine Cellars","Wine Business Institute","The Wine Treasury Ltd.","The Wine Reserve Ltd.","New York Wine and Grape Foundation","The Chalone Wine Group Inc.","Premier Cru Fine Wine Investments Ltd.","Denbies Wine Estate Ltd.","Leith\'s School of Food & Wine Ltd","International Exhibition Co-Operative Wine Society Ltd","Victoria Wine Company Limited","Wine Investment Fund Limited","Italian Wine Merchants","Total Wine & More","Lunzer Wine Investments Ltd.","Berkmann Wine Cellars Ltd.","Wine Source","Wine Cellar Ltd.","London International Wine Fair","Brandywine Global Investment Management LLC","Wine Australia Corp.","Brandywine Global Investment Management (Europe) Ltd.","Wine Asset Managers LLP","Bibendum Wine Ltd","The Wine & Spirit Trade Association","English Wine Producers","Wine & Spirit Education Trust","The Wine Society Ltd.","Allied Domecq Spirits & Wine Limited","Wine Rack Ltd.",383,"International Wine Accessories","The Wine Group Inc.","The Wine Group Inc. International Wine Accessories"]),21615:i.r(96,6,6,12,[291,515,265,498,"accessories",518,183,270],[23,251,87,39,27,35,163,30,25,26,138,322,29,112,108,31,72,91,204,24,303]),21670:i.r(28,5,5,[i.os(i.cx,17,["","Wizz Air Hungary Ltd","Air Jordan","Air Malta","Air Macau","Ryanair UK Ltd.","Air Serbia","Air Seychelles Ltd","Spanair SA","Icelandair HF",466,"Wizz Air Ltd.",302,"TNT Airways SA","Fiji Airways","Titan Airways Ltd.",318,"Atlantic Airways Ltd.","TransAsia Airways Corp","Inc. (Florida)","Pet Airways","British Airways City Flyer Ltd.","Sudan Airways","Connect Airways","British European Airways Corp.","Condor Airways VA","Scotairways","Myanmar Airways International Co. Ltd.","World Airways Inc.","Cayman Airways Ltd.","Monarch Airways","Asian Wings Airways Ltd.","First Choice Airways Ltd.","Nigeria Airways Limited","Laker Airways (Bahamas) Ltd.","Afriqiyah Airways","AirTran Airways Inc","Laker Airways","Iraqi Airways","Eastern Airways","Adria Airways dd","Pan American Airways Inc.","Britannia Airways","Hong Kong Express Airways Ltd","Cyprus Airways Public Ltd","Republic Airways Holdings Inc","TransAsia Airways Corp.","Olympic Airways SA","GB Airways","British Mediterranean Airways","Kuwait Airways","Tiger Airways Holdings Ltd","South African Airways Pty Ltd","Jetstar Airways Pty Ltd","British Midland Airways Ltd",485,439,"US Airways Group Inc",348,319,"Chautauqua Airlines Inc.","WestJet Airlines Ltd","Africa World Airlines Ltd.","Biman Bangladesh Airlines Ltd.","SAS Airline","Compass Airlines","Sunstate Airlines (Qld) Pty Ltd.","The Federation of Indian Airlines","My Way Airlines SRL","Kunpeng Airlines","Ansett Airlines","Singapore Airlines Cargo Pte Ltd.","Southwest Airlines Pilots Association","SkyWest Airlines Ltd","JAL airline","Air Wisconsin Airlines Inc.","Kendell Airlines","Uganda Airlines Inc.","China Southwest Airlines","Airline Aoc Support Ltd.","Airline Investments Ltd. (United Kingdom)","Sabena Belgian World Airlines SA","Aeromar Airlines","Nordic Regional Airlines AB","Jetstar Pacific Airlines Pty Ltd.","Tradewinds Airlines","Canadian Airlines International Inc.","Virgin Blue Airlines Pty Ltd.","Tassili Airlines",408,"Sichuan Airlines Co.","Avianca Airlines SA (Use Avianca Holdings SA)","Hebei Airlines Co. Ltd.","Trans States Airlines Inc","Dutch Antilles Express Airlines","Mesaba Airlines","North American Airlines","SriLankan Airlines Ltd.","East Star Airlines","Cargo Airline Association","LOT Polish Airlines SA","Airline Services Holdings Ltd.","PT Mandala Airlines","Ariana Afghan Airlines","SAS Scandinavian Airlines Norge AS","PSA Airlines","Key Airlines","Star Airlines SA","United Airlines Foundation","Mandarin Airlines","SkyEurope Airlines AS","Nepal Airlines Corp.","African Airlines Association","Australian Airlines Ltd.","Canadian Airlines Inc.","Iran Aseman Airlines","TATA SIA Airlines Ltd","Atlantic Southeast Airlines Inc.","VLM Airlines","Atlantic Coast Airlines Inc.","Mesa Airlines Inc.","PT Adam Skyconnection Airlines","Association of Asia Pacific Airlines","TAM Airlines","Pinnacle Airlines Corporation","Finnish Commuter Airlines Oy","Trans States Airlines","China United Airlines Co. Ltd.","KLM Airlines","Caribbean Airlines Ltd.","European Regions Airline Association Ltd.","Olympic Airlines SA","Libyan Arab Airlines","Darwin Airline SA","Ukraine International Airlines","British Airline Pilots\' Association","Porter Airlines","CSA Czech Airlines","Sterling Airlines","Pacific Airlines","European Low Fares Airline Association","Trans World Airlines Inc","Eos Airlines","America West Airlines Inc.","Thomas Cook Airlines Ltd.","International Airline Support Group","Zoom Airlines","Alaska Airlines Inc","Xiamen Airlines Co.","Aloha Airlines","Go Airlines India Ltd","Middle East Airlines","Copa Airlines","Shanghai Airlines Co.","Shenzhen Airlines Co.","Varig Brazil Airlines","Airline Group Ltd","Philippine Airlines Inc","Frontier Airlines Holdings Inc","Airline Partners Australia","Saudi Arabian Airlines Corp","SAS Scandinavian Airlines Danmark A/S","Oasis Hong Kong Airlines Ltd","LAN Airlines SA","Fairline","Hawaiian Airlines Inc","Transavia Airlines CV","Indian Airlines Limited","Hong Kong Airlines Ltd","Cargolux Airlines International SA","Skymark Airlines Inc","British Airline Pilots Association","Turkish Airlines Inc","Association of European Airlines","Brussels Airlines NV","Hainan Airlines Co Ltd","SkyTeam Airline Alliance Management Cooperatie UA","Lion Mentari Airlines PT","Ethiopian Airlines","Vueling Airlines SA","KLM Royal Dutch Airlines","Austrian Airlines AG","Monarch Airlines Ltd","United Airlines","Kingfisher Airlines Ltd","Northwest Airlines Corp","Continental Airlines Inc","American Airlines Inc"]),i.os(i.cx,2,[27,35,163,37,"Adventure holidays",303,258,138,322,29,112])]),22407:i.r(31,1,1,14,514),22408:i.r(31,1,1,14,536),22409:i.r(31,1,1,14,"twitter.com"),22410:i.r(31,1,1,14,"instagram.com"),22411:i.r(30,14),22412:i.r(31,1,1,14,1),22514:i.r(75,"UPL036","22514"),22515:i.r(75,"UPL035","22515"),22529:i.r(38,1,i.os(i.e,10,[5202434762,5202052228,5172127401]),0,1,"ft.com/reports/responsible-business-education"),22567:i.r(95,6,6,i.os(i.cx,12,[515,265,183,270]),["Saint Laurent Group",495,"Balenciaga SA","Prada Holding BV",420,"Gucci Group NV","Gucci Group SpA","Chanel SA",432,"Rolex Watch",449,"LVMH Group",320,"NetJets Inc","Lufthansa Cargo AG","Emirates",466,302,318,485,439,348,319],[44,72,37,10,28,204,24]),22581:i.r(65,i.o([i.os(i.cx,12,[562,550]),i.os(i.cx,2,[228,160,"Climate change",343,247])]),4,4,89,["Middle Eastern companies",339,"Industrial goods",312,428,427,385,219]),22598:i.r(99,3,3,[73,226,430,"Football",261,251],"https://www.ft.com/sport",11,"Murad Ahmed",12,568),22600:i.r(95,4,4,i.pe(1,"https://www.ft.com/companies/automobiles"),[489,461,460,"Alfa Romeo Automobiles SpA","Alfa Romeo","Hyundai Group","Ford Europe","Fiat SpA",434,"Honda Europe","Honda Motor Europe Ltd.",313,"Ferrari SpA","Mitsubishi Motors Europe BV","Audi UK",488,"Volksbank International AG","Reanult Nissan","Nissan Diesel","AMG Mercedes",413,"BMW (UK) Holdings Ltd.","Toyota Lexus","Rolls-Royce Motor Cars Ltd"],[228,337,160,76,105,312]),22710:i.r(100,5,5,8,146),22892:i.r(64,i.o([i.os(i.cx,12,["shopping",537,"clothing"]),i.os(i.cx,31,[235,224,374]),i.os(i.cx,2,[208,"Retail",444,28,30,25,26])]),4,4,i.os(i.w,1,[187,118]),4,4),23027:i.r(96,6,6,8,[121,284],[333,100,201,"Data protection",232,"Enterprise software",469,257,254,90,209,157]),23832:i.r(25,250,1),23833:i.r(25,"Firefox/",31),23835:i.q(i.cb(0,i.a([i.ref(31),i.os(i.s,18,["firefox/","fxios/"])]),i.ge(1),1)),23852:i.r(80,0,i.a([i.ps(18,250),i.ref(1)])),23853:i.r(77,0,i.a([i.ps(18,250),i.ref(1)]),1,1),23937:i.q(i.tw(i.cb(0,i.o([i.pe(1,"https://www.ft.com/reports/future-food-agriculture"),i.os(i.cx,8,["r01c","r05f"]),i.os(i.cx,17,["Cargill Meat Solutions Corp.","Cargill Nutricao Animal Ltda.","Cargill Australia Ltd.","Cargill Fertilizantes SA","Cargill Ventures","Cargill Cotton Ltd.","Cargill Risk Management","Cargill AgHorizons US","Cargill Petroleum","Cargill Inc","John Deere-Lanz Verwaltungs AG","John Deere Renewables LLC","DowDuPont","Agrium Inc","Monsanto Growth Ventures","Mahyco Monsanto Biotech (India) Ltd.","Monsanto Co","Syngenta AG","Bayer Pharma AG","Bayer Pharmaceuticals Pvt Ltd.","Bayer Pharms","Bayer CropScience Ltd. (United Kingdom)","Bayer CropScience NV","CNH Partners LLC","CNH Industrial Capital LLC","CNH Global NV","BASF UK Ltd.","BASF Corp."]),i.os(i.cx,2,[108,"Food security","Food Safety","Food Prices","Chinese agriculture","Agritech","EU agriculture","UK agriculture","Agriculture","Agricultural trade","Agricultural production",301])]),i.ge(4),4),24192e5)),24101:i.r(75,"UPL037","24101"),24102:i.r(75,"UPL038","24102"),24103:i.r(75,"UPL039","24103"),24104:i.r(75,"UPL040","24104"),24105:i.r(75,"UPL041","24105"),24106:i.r(75,"UPL042","24106"),24244:i.q(i.tw(i.cb(0,i.o([i.pc_(12,568),i.os(i.cx,2,[73,226])]),i.ge(3),3),24192e5)),24245:i.q(i.acq(i.ocq(i.ocq(i.isp("financial_times_redshift","UPL011",!1,"24245"),i.isp("financial_times_redshift","UPL012",!1,"24245")),i.isp("financial_times_redshift","UPL013",!1,"24245")),i.tw(i.cb(0,i.o([i.os(i.cx,8,[33,"r02f",121,284]),i.os(i.cx,2,[90,100,257,254,33,78])]),i.ge(4),4),24192e5))),24324:i.r(99,4,4,["UK small companies","Starting a business",370,"Scaling-up your business"],"https://www.ft.com/uk-small-companies",8,"S_6892",11,"Andy Bounds"),24339:i.r(75,"UPL034","24339"),24978:i.q(i.cb(0,i.as(i.x,7,["anons",34]),i.ge(1),1)),26090:i.r(5,30,30),26091:i.r(5,60,60),26376:i.r(76,10,121,121),26380:i.q(i.scq(i.cw(2,i.a([i.pge(24,30),i.ref(30)])),i.vq(i.sw(5,i.ref(30),["properties","engaged_time"],i.ge(30))),i.ge(5))),26381:i.r(76,5,120,120),26383:i.r(76,15,285,285),26440:i.r(75,"UPL047","26440"),26442:i.r(75,"UPL048","26442"),26443:i.r(75,"UPL049","26443"),27111:i.r(58,"UPL012","27111","UPL013","27111","UPL011","27111"),27314:i.r(29,5,114),27315:i.r(14,0,1,1,5,"def"),27316:i.r(29,5,505),27317:i.r(29,5,115),27318:i.r(29,5,66),27320:i.r(29,5,193),27321:i.r(14,0,1,1,5,"map"),27323:i.r(29,5,502),27324:i.r(14,0,1,1,5,"edu"),27326:i.r(29,5,272),27327:i.r(14,0,1,1,5,"enc"),27330:i.r(29,5,94),27331:i.r(29,5,517),27332:i.r(29,5,116),27333:i.r(29,5,144),27334:i.r(29,5,528),27335:i.r(29,5,84),27336:i.r(29,5,82),27338:i.r(29,5,189),27339:i.r(29,5,57),27340:i.r(29,5,535),27342:i.r(29,5,547),27343:i.r(29,5,281),27344:i.r(29,5,147),27345:i.r(14,0,1,1,5,"rea"),27346:i.r(14,0,1,1,5,"rtl"),27347:i.r(29,5,49),27348:i.r(29,5,290),27349:i.r(29,5,566),27350:i.r(14,0,1,1,5,"trv"),27351:i.r(29,3,117),27352:i.r(14,0,1,1,3,"adl"),27353:i.r(29,3,66),27354:i.r(29,3,266),27355:i.r(14,0,1,1,3,"exp"),27356:i.r(29,3,182),27357:i.r(29,3,549),27358:i.r(29,3,64),27359:i.r(29,3,83),27360:i.r(29,3,96),27361:i.r(29,3,57),27362:i.r(29,3,188),27363:i.r(14,0,1,1,3,"leg"),27364:i.r(29,3,543),27365:i.r(29,3,46),27366:i.r(29,3,547),27367:i.r(14,0,1,1,3,"not"),27368:i.r(29,3,282),27369:i.r(29,3,85),27370:i.r(29,3,551),27371:i.r(29,3,557),27372:i.r(29,3,147),27373:i.r(29,3,122),27374:i.r(29,3,561),27375:i.r(29,3,510),27376:i.r(29,3,564),27377:i.r(29,3,49),27378:i.r(29,4,179),27379:i.r(29,4,180),27380:i.r(29,4,141),27382:i.r(29,4,503),27384:i.r(29,4,2),27385:i.r(29,4,62),27386:i.r(29,4,63),27387:i.r(29,4,5),27388:i.r(29,4,186),27389:i.r(29,4,540),27390:i.r(29,4,119),27391:i.r(29,4,192),27392:i.r(29,4,4),27393:i.r(29,4,6),27394:i.r(29,4,65),27395:i.r(29,4,194),27396:i.r(29,4,47),27397:i.r(29,4,198),27398:i.r(29,4,48),27399:i.r(29,4,97),27400:i.r(29,4,3),27706:i.r(87,2,["AI ethics","AI and jobs",201]),27708:i.r(87,2,[469,"Military technology",90,260,78,33]),27710:i.r(79,0,i.pc_(2,262),3,3),27711:i.r(87,2,["Masters",239,240]),27714:i.r(87,2,[243,222,237]),28394:i.r(48,0,i.ps(14,574),1,1,0,i.os(i.s,1,["www.ft.com/content/03c53264-b943-4a42-b8eb-ee2265643cb9","www.ft.com/content/0c10c85e-d165-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/12b978aa-0544-11e9-bf0f-53b8511afd73","www.ft.com/content/24b2a4c4-f7bf-11e8-8b7c-6fa24bd5409c","www.ft.com/content/2eda777e-db68-11e8-b173-ebef6ab1374a","www.ft.com/content/3316885c-b07d-11e8-87e0-d84e0d934341","www.ft.com/content/3a8c7746-d886-11e8-aa22-36538487e3d0","www.ft.com/content/4577f938-2632-11e9-b20d-5376ca5216eb","www.ft.com/content/48e3f86e-f26c-11e8-938a-543765795f99","www.ft.com/content/4dd47e72-d163-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/4ec70ae8-d154-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/5dbaee74-1f02-11e9-a46f-08f9738d6b2b","www.ft.com/content/6674f2b6-d165-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/75699cfe-3506-11e9-bb0c-42459962a812","www.ft.com/content/778c9f5e-294e-11e9-9222-7024d72222bc","www.ft.com/content/83247fda-e0f1-11e8-a8a0-99b2e340ffeb","www.ft.com/content/8b2070da-d152-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/957b32c2-e737-11e8-8827-ff56e7163c11","www.ft.com/content/a66913c8-d888-11e8-aa22-36538487e3d0","www.ft.com/content/a6a7c790-d06c-11e8-a9f2-7574db66bcd5","www.ft.com/content/a8dee408-a470-11e8-a1b6-f368d365bf0e","www.ft.com/content/b7e766c4-ad5c-11e8-8253-48106866cd8a","www.ft.com/content/c23403c0-ad30-11e8-8253-48106866cd8a","www.ft.com/content/c54abafe-ad30-11e8-8253-48106866cd8a","www.ft.com/content/cdd62792-0e85-11e9-acdc-4d9976f1533b","www.ft.com/content/cf2fb2fc-db7c-11e8-b173-ebef6ab1374a","www.ft.com/content/d481cf02-1e47-11e9-a46f-08f9738d6b2b","www.ft.com/content/e568cf06-f718-11e8-af46-2022a0b02a6c","www.ft.com/content/ed7785ce-d162-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/f2399c18-e455-11e8-a8a0-99b2e340ffeb","www.ft.com/content/f3e49c7e-ad2e-11e8-8253-48106866cd8a","www.ft.com/content/fc0934a8-e394-11e9-9743-db5a370481bc","www.ft.com/content/fdb9161e-248c-11e9-b20d-5376ca5216eb"]),1,1,0,i.os(i.s,1,["https://www.ft.com/content/a06505ee-3c47-11ea-b232-000f4477fbca","https://www.ft.com/content/cee5f3a8-21ab-11ea-b8a1-584213ee7b2b","https://www.ft.com/content/ea6e02d6-32e1-11ea-a329-0bcf87a328f2","https://www.ft.com/content/f6c3732c-21ac-11ea-b8a1-584213ee7b2b","https://www.ft.com/content/f80ea9d0-21a8-11ea-b8a1-584213ee7b2b","https://www.ft.com/content/f83ff838-21ac-11ea-b8a1-584213ee7b2b",574]),i.ge(1),1),28714:i.r(96,3,3,8,["r04h","r04c"],[241,262,"LGBT+","Gender pay gap","Gender politics","Global inequality","US inequality","UK Inequality",494,220]),29255:i.r(75,"UPL050","29255"),29259:i.r(75,"UPL051","29259"),30222:i.r(75,"UPL053","30222"),30363:i.r(103,16,"Africa"),30365:i.r(101,16,309),30366:i.r(101,16,349),30367:i.r(103,16,"North America"),30368:i.r(103,16,"Oceania"),30369:i.r(103,16,"South America"),31187:i.r(64,i.os(i.cx,17,["London Organising Committee of the Olympic & Paralympic Games Ltd","Olympic Committee","British Olympic Association"]),3,3,i.pc_(2,430),3,3),32094:i.r(75,"UPL054","32094"),32095:i.r(75,"UPL055","32095"),32729:i.r(48,0,i.a([i.ps(0,278),i.os(i.s,14,[278])]),1,1,0,i.os(i.s,1,["iberdrola.ft.com/are-our-roads-ready-for-the-electric-vehicle-revolution","iberdrola.ft.com/breaking-batteries-why-solving-storage-is-the-key-to-global-energy-transition","iberdrola.ft.com/change-management","iberdrola.ft.com/glasgows-blueprint-for-a-net-zero-city","iberdrola.ft.com/nike-s-race-to-protect-the-future-of-sport","iberdrola.ft.com/one-of-europes-biggest-batteries","iberdrola.ft.com/repowering-gives-wind-farms-a-new-lease-of-life","iberdrola.ft.com/smart-meters-will-help-electric-vehicles-move-into-the-mainstream","iberdrola.ft.com/the-day-in-the-life-of-our-carbon-footprint","iberdrola.ft.com/the-uks-new-wind-economy","iberdrola.ft.com/when-will-europe-have-its-time-in-the-sun","iberdrola.ft.com/will-vehicle-to-grid-drive-ev-adoption"]),1,1,0,i.os(i.s,1,[278]),i.ge(1),1),33786:i.r(88,4,4,[493,140,492,225,220,364]),34414:i.r(34,1,1),34415:i.r(34,3,3),34989:i.r(83,i.pc_(2,"Coronavirus"),12,12),37314:i.r(31,1,1,1,"https://tradesecrets.ft.com/"),38068:i.r(42,10,5363789934,2691471324),38340:i.r(13,0,26),38341:i.r(29,0,11),38342:i.r(20,11),38343:i.r(29,0,38),38344:i.r(20,38),38346:i.r(29,0,575),38352:i.r(19,1,1,7,9,26),38353:i.r(19,1,1,7,8,26),38354:i.r(18,21),38355:i.r(21,21),38356:i.r(19,1,1,7,34,26),38357:i.r(19,1,1,7,17,26),38358:i.r(19,1,1,7,20,26),38359:i.r(19,1,1,7,19,26),38360:i.r(18,29),38361:i.r(21,29),38362:i.r(39,i.a([i.y(3,46),i.ref(26)]),i.y(5,94),i.ref(26)),38470:i.r(13,0,18),38472:i.r(29,0,148),38473:i.r(29,0,149),38474:i.r(29,0,150),38475:i.r(29,0,151),38476:i.r(29,0,152),38477:i.r(29,0,153),38478:i.r(29,0,154),38479:i.r(29,0,155),38497:i.r(11,0,i.ref(18),37,"Financial Advisor, Broker, Planner"),38498:i.q(i.cb(0,i.a([i.y(0,11),i.pe(38,"jt40")]),i.ge(1),1)),38819:i.r(88,3,3,[220,494,236]),38827:i.r(65,i.pc_(2,"Corporate governance"),3,3,236,[340,484,480,"Financial services",355]),41489:i.r(32,1,1),42437:i.r(32,2,2),42438:i.r(23,1,1),42439:i.r(23,2,2),42441:i.r(11,6,i.ps(1,143),25,.5),46761:i.r(85,i.pe(36,"Yes"),i.ref(18)),46762:i.q(i.tw(i.cb(0,i.a([i.ref(18),i.os(i.w,["userMM","licenceType"],["Free trialist","Full member"])]),i.ge(1),1),72576e5)),46763:i.r(85,i.y(0,11),i.pe(39,"registered")),47581:i.r(107,0),47583:i.r(107,25),47584:i.r(107,50),47585:i.r(107,75),47586:i.r(107,100),51098:i.r(75,"UPL063","51098"),51099:i.r(75,"UPL064","51099"),51100:i.r(75,"UPL065","51100"),51101:i.r(75,"UPL066","51101"),52127:i.r(26,16011648e5,1,199),52133:i.q(i.cb(0,i.a([i.y(23,181),i.tg(16011648e5),i.ps(1,199)]),i.ge(1),1)),52142:i.r(9,6,i.pe(25,.5),i.tg(16011648e5),i.ps(1,199)),55914:i.q(i.ocq(i.ocq(i.ocq(i.cb(3,i.os(i.e,6,[2750301246,2746938138,2746669867,2743290941,2742689033,2738649978,2736253150,2734939368,2731153422,2730981093,2730907574,2730900145,2728157953,2727548150,2727123302,2724473678,2717206472,2714219401,2714144097,2709278100,2708825199,2705732341,2705259519,2705209334,2703672604,2700313374,2697601330,2695343739,2694052314,2693625293,2690955299,2690344061,2689709998,2689467968,2687831414,2682534934,2680591562,2680043483,2680023580,2680005020,2676676697,2675244871,2675235811,2673809912,2672074216,2670891736,2669266539,2668724134,2667084367,2663831028,2661818133,2661805647,2660761876,2658151668,2657522815,2657500018,2657353350,2656173569,2655796448,2654589757,2654358624,2653882997,2651661059,2648267468,2644149558,2644074936,2643741040,2643605233,2642188747,2641112541,2640675495,2638443326,2638263555,2636820425,2635150799,2631912954,2631073902,2628010002,2627406871,2627401903,2627297489,2624167337,2622688790,2622667811,2621918359,2621548798,2620229014,2619610983,2619500098,2618611386,2616297505,2616248363,2615378378,2614016157,2613914042,2612570144,2610530634,2610285984,2610062561,2609265819,2609061772,2609039743,2609019025,2608872884,2608797976,2607960928,2607193167,2605924293,2605136320,2604943850,2603776482,2602123420,2601346703,2599662639,2598865394,2598429053,2598163876,2597723982,2596900766,2596513414,2595945032,2594083108,2594019250,2591661834,2591254551,2589616475,2588236223,2587102011,2586612662,2586163662,2584601194,2582372604,2581188657,2580480402,2580376295,2580278357,2579447991,2578494188,2578327886,2578317722,2577508012,2576436463,2575981565,2575323497,2570198613,2562813348,2561801987,2561218936,2556418765,2555299386,2549619065,2541198927,2540381225,2533358597,2525026231,2523479231,2518025938,2512150542,2503301931,2490079628,2483723404,2480632730,2451010768,2420397572]),i.ge(1),1),i.tw(i.cb(0,i.os(i.cx,17,["Alfred Dunhill Ltd","Watchfinder.co.uk Ltd","Roger Dubuis SA",495,"Yoox Net-a-Porter","Van Cleef & Arpels","Ulysse Nardin SA","Tiffany & Co","Tag Heuer SA",449,"Prada SpA","Polo Ralph Lauren Corp (old name of Ralph Lauren Corp)","Piaget SA",432,"Omega SA","Officine Panerai Marketing e Comunicazione SRL",420,"Montblanc International BV","Montblanc Inc.","LVMH Moet Hennessy Louis Vuitton","Loro Piana SpA","Loewe SA","Le Petit-Fils de L-U Chopard & Cie SA","Lange Uhren GmbH","Jaeger-Le Coultre SA","Hublot SA","DE Beers Group","Cie Financiere Richemont SA","Cie des Montres Longines Francillon SA","Christian Dior SA","Chloe SAS","Chaumet International","Chanel SAS","Cartier SA","Cartier International SA Geneve","Cartier",320,"Bulgari SpA","BRIONI SpA","Baume & Mercier","Audemars Piguet Holding SA"]),i.ge(3),3),2592e6)),i.tw(i.cb(0,i.os(i.cx,2,[44,42,140,426,53,347,159,52,"Dance","Collecting"]),i.ge(8),8),2592e6)),i.scq(i.tw(i.cw(2,i.pc(["aggregations","SegmentEntry"],21070)),7776e6),i.tw(i.cw(4,i.pe(22,21070)),7776e6),i.ge(1)))),55934:i.r(6,i.scq(i.tw(i.cw(2,i.pc(["aggregations","SegmentEntry"],17138)),7776e6),i.tw(i.cw(4,i.pe(22,17138)),7776e6),i.ge(1)),i.cb(0,i.o([i.os(i.cx,8,[285,"r07c",286,"r07d","r07l",556,197]),i.os(i.cx,9,[32,177]),i.os(i.cx,2,[36,10,21,22]),i.os(i.s,1,[263,292,"www.ft.com/life-arts"])]),i.ge(3),3),2592e6),56089:i.r(100,3,3,8,"r06k"),56090:i.r(100,3,3,8,"r05o"),56274:i.r(47,3,1,1,7,i.ps(32,530),1,1,0,i.y(0,530),i.ge(1),1,i.e,10,[5529609102,5529612417]),57152:i.r(33,1,1,10,[5503316760,5504503592,5504501699,5503318551,5503318251,5503317507]),58181:i.r(75,"UPL068","58181"),58310:i.r(75,"UPL069","58310"),62486:i.r(48,0,i.o([i.os(i.s,0,[273]),i.os(i.s,14,[273])]),1,1,0,i.os(i.s,1,["equinor.ft.com/articles/building-worlds-largest-offshore-windfarm-in-uk","equinor.ft.com/articles/there-will-be-no-net-zero-without-carbon-capture-and-hydrogen","equinor.ft.com/infographics/how-local-people-are-building-the-energy-revolution","equinor.ft.com/videos/the-future-is-afloat","equinor.ft.com/videos/worlds-first-net-zero-cluster","httpequinor.ft.com/videos/britains-path-to-net-zero","https://equinor.ft.com/videos/britains-path-to-net-zero"]),1,1,0,i.os(i.s,1,[273]),i.ge(1),1),66495:i.r(87,2,[492,364,140,493,426]),66564:i.r(19,2,2,7,34,26),71282:i.r(89,[i.y_(["name"],373),i.y_(["name"],159),i.y_(["name"],247),i.y_(["name"],75),i.y_(["name"],355)]),71287:i.q(i.ocq(i.tw(i.cb(0,i.ref(33),i.ge(3),3),2592e6),i.tw(i.cb(0,i.a([i.ref(5),i.ref(35)]),i.ge(3),3),2592e6))),72255:i.r(41,[5639608238,5636565339,5615568360,5593752629,5588478139,5567562134,5567348605,5567348593],[5667108370,5666180610,5667108367,5666180565,5658858169]),72256:i.r(41,[5638040547,5637607429,5616729034,5593472095,5588694434,5567554226,5567340667,5567340658],[5667098314,5667098296,5667098158,5667098095,5659438063]),72257:i.r(41,[5639585033,5638069901,5615554794,5592335463,5588681015,5567331106,5567327242,5567327233],[5667814001,5667813965,5667813797,5666161599,5571596365]),73221:i.r(33,1,1,6,[2817956546,2832096478,2781849998,2843217349]),73285:i.r(17,3,[49,96,83]),73287:i.r(17,3,[85,66,64,117,46]),73288:i.r(19,1,1,3,549,7),73289:i.r(17,3,[282,551,510,266]),73290:i.r(19,1,1,3,561,7),73291:i.r(19,1,1,3,557,7),73292:i.r(19,1,1,3,543,7),73402:i.r(57,i.os(i.cx,11,[399,415,314,462,"Neil O\'Sullivan",396,375,487,423,"Simon de Burton","Esther Bintliff","Cherish Rufus","Anthony Lavelle","Henry Mance","Maria Crawford","Nathan Brooker",424,441,410,475,"Lorien Kite",381,394,331,305,472,234,315,326,"Laura Battle","David Cheal",442,"Paul Gould","Frederick Studenmann",402,457,235,341,224,378,304,440,451,390,456,306,473,132,"Aaliyah Harris","William Skidelsky","John Gapper","Casper Henderson","Max Liu","James Lovegrove","Nilanjana Roy",391,308,366,471,"Alice Hancock",454,"Ludovic Hunter-Tilney","David Honigmann","Michael Hann","Lorna Goodison","Anna Nicolaou","Tom Faber","Raphael Abraham","Tobias Grey","Danny Leigh","Marc C O\'Flaherty","Luke Edward Hall","Rosalind Sykes","Enuma Okoro",372,407,335,327,412,392,371,206,"Peter Aspden","Suzi Feay","Edwin Heathcote","Deyan Sudjic",411]),2592e6,3,15,3,i.cx,9,[79,126,169,71,32],i.ref(15),i.os(i.w,28,["Opinion",246,447])),73748:i.r(81,0,4,4,i.cx,2,[316,"Ethereum","Bitcoin",334]),74123:i.r(14,1,1,1,6,2822354159),74145:i.r(88,4,4,["Telecoms",294]),74349:i.r(54,7,i.ps(32,"www.ft.com/globetrotter/singapore"),1,1,0,i.ps(1,"www.ft.com/partnercontent/singapore-tourism-board"),1,1,i.cb(1,i.os(i.e,10,[5785299779,5783410200,5674455281,5672031003,5674455293,5672141202,562492406,5624397493,5624397352,5624397343,5624397325,5624397295,5624397277,5624924087,5624397259,5624397244,5624397112,5624397094,5624397079,5624397064,5624397043]),i.ge(1),1),i.cb(0,i.os(i.w,27,["d6a37d7c-e3aa-4d62-a6c9-b423935f660e","8a82cc23-f63b-467a-9212-9353f25287a5","0d35bb5e-d33c-4338-8a67-a22785ffb692","751ec9a1-331a-4c90-8f67-2582a7f76c85","0f18c154-e0ab-4e59-b717-5771af069df2","36f67744-2ef7-4386-ab00-29aeb07ca267"]),i.ge(1),1)),74452:i.r(82,3888e6,0,i.ps(1,522),3,3),74657:i.r(62,1,1,2,i.a([i.ref(10),i.os(i.cx,2,[478,486,77,39,43,24])]),2,11,[396,375,442,391,308,366,471,372,407,335,327,412,392,371,206,411],[28,52,478,486,77,39,43,24]),74659:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,i.ref(16),i.ge(2),2),2592e6),i.tw(i.cb(0,i.pc_(9,126),i.ge(1),1),2592e6)),i.tw(i.cb(0,i.a([i.ref(10),i.ref(16)]),i.ge(1),1),7776e6)),i.tw(i.cb(0,i.os(i.cx,11,[405,395,424,441,410,475,381,206]),i.ge(1),1),2592e6))),74660:i.q(i.ocq(i.ocq(i.ocq(i.tw(i.cb(0,i.ref(36),i.ge(2),2),2592e6),i.tw(i.cb(0,i.os(i.cx,11,["Rachel Garrahan",415,487,423,472]),i.ge(1),1),7776e6)),i.tw(i.cb(0,i.a([i.y(28,137),i.ref(36)]),i.ge(1),1),7776e6)),i.tw(i.cb(0,i.a([i.os(i.cx,9,[79,32,71,127]),i.ref(36)]),i.ge(1),1),7776e6))),74661:i.r(57,i.pc_(11,234),7776e6,2,19,2,i.w,27,["52ac7efe-fd6e-41eb-ab9e-969b26067657","50916cbf-4a93-4208-b9b1-93afdd48c8d9","3cac455e-e9be-498f-8d51-2d250513d7de","b0f9f030-9eef-410b-aa12-b4cebb2f866f","be97a91f-8b2e-4a1d-a6c8-30847c5e1c8d"],i.os(i.cx,9,[79,127,32,71]),i.ref(19)),74662:i.r(62,3,3,3,i.os(i.cx,11,[404,205,"Sara Semic","Rosanna Dodds","Esther Blintiff"]),3,9,[418,207,79],[253,"Philanthropy"]),74664:i.q(i.ocq(i.ocq(i.tw(i.cb(0,i.ref(3),i.ge(1),1),2592e6),i.tw(i.cb(0,i.a([i.os(i.cx,9,[137,32]),i.ref(3)]),i.ge(1),1),2592e6)),i.tw(i.cb(0,i.os(i.cx,11,["Baya Simons","Alice Cavanagh","Carolyn Asome",374,314,394,234,315,326,402,457,235,341,224]),i.ge(1),1),7776e6))),74665:i.r(4,2592e6,i.cb(0,i.ref(11),i.ge(1),1),i.tw(i.cb(0,i.a([i.ref(10),i.os(i.cx,2,[95,93,86,60,92,216,213,211,217,210,218,212,214,215,51,99,50,72,104,108,22,21,45,58,43,44,40,23,56,31,54,10])]),i.ge(1),1),2592e6),2592e6,i.ref(11),2,i.os(i.w,28,[246,447]),2,i.cx,11,["Fuchsia Dunlop",405,395,462,331,305,378,304,440,451,390,456,306,473,132,454],i.cx,9,[79,169]),75311:i.r(14,1,1,1,6,2866636014),75636:i.r(13,3,9),75640:i.r(43,i.cb(1,i.ref(9),i.ge(3),3),3,i.ref(9),1,1,i.vq(i.sw(5,i.ref(28),["properties","engaged_time"],i.g(40))),i.a([i.pg(24,40),i.ref(28)])),75854:i.r(3,i.tw(i.cb(0,i.ref(7),i.ge(1),1),72576e5),i.isp("financial_times_redshift","UPL033",!1,"75854"),i.isp("financial_times_redshift","UPL027",!1,"75854"),i.ocq(i.isp("financial_times_redshift","UPL040",!1,"75854"),i.isp("financial_times_redshift","UPL041",!1,"75854")),i.isp("financial_times_redshift","UPL042",!1,"75854")),75874:i.r(3,i.tw(i.cb(0,i.ref(7),i.ge(1),1),72576e5),i.isp("financial_times_redshift","UPL039",!1,"75874"),i.isp("financial_times_redshift","UPL038",!1,"75874"),i.isp("financial_times_redshift","UPL037",!1,"75874"),i.isp("financial_times_redshift","UPL026",!1,"75874")),75963:i.r(100,3,3,2,251),76328:i.r(14,1,1,1,6,2842744773),76378:i.r(31,1,1,1,"channels.ft.com/transact/explore-seven-mega-trends-set-shape-post-pandemic-world"),76402:i.r(64,i.pc_(2,223),3,3,i.as(i.cx,2,[33,208]),3,3),76414:i.r(88,3,3,[437,443,170,248,134]),76507:i.r(86,[116,94,115,114]),76510:i.r(84,i.o([i.os(i.w,4,[48,47,119]),i.os(i.w,3,[188,182])]),1,1),76799:i.r(71,i.os(i.cx,9,[109,61,26,106,77,102,111,87,53,50,54,30,59,101,110,55,76,44,24,74,23,41,25,95,93,86,22,98,51,103,35,69,39,105,92,81,60,73,67,56,36,68,10,45,70,58,27,37,43,52,28,40,80,31,112,29,21,42]),3,3,[126,71,169,79,32]),76800:i.r(71,i.ref(15),1,1,[169,71,126,79,32]),77423:i.r(82,48384e5,0,i.os(i.s,13,["dani rodrik: ‘we are in a chronic state of shortage of good jobs’","economists exchange","gita gopinath: ‘fiscal policy plays an essential role in recovery’","kristalina georgieva: ‘we are in a resilient place but cannot take stability for granted’","larry summers: ‘i’m concerned that what is being done is substantially excessive’","more productive ways of working","philip lane: ‘we have a unique initiative in europe now — it is really quite something’","raghuram rajan: ‘society has to find a new equilibrium’","the bank of england’s chief economist calls on policymakers to jolt companies towards fairer"]),1,1),77425:i.r(15,1,3,3),77426:i.r(15,3,1,1),77520:i.r(59,i.ref(12),3,3,i.ref(37),3,i.pc_(9,32),3,3,3),77841:i.r(1,3,3),77848:i.r(1,1,1),77849:i.r(1,2,2),78740:i.r(39,i.ps(1,267),i.ps(0,267),i.ps(14,267)),78743:i.r(14,3,1,1,6,2843367074),78924:i.r(14,0,1,1,15,"Belgium"),79074:i.r(15,1,1,1),79157:i.r(86,[505,517,193,189,147,290,566]),79176:i.r(84,i.y(4,2),3,3),79183:i.r(67,["rankings.ft.com/rankings/2142/global-mba-ranking-2015","rankings.ft.com/rankings/2152/online-mba-ranking-2015","rankings.ft.com/rankings/2632/global-mba-ranking-2016","rankings.ft.com/rankings/2634/online-mba-ranking-2016","rankings.ft.com/rankings/2710/global-mba-ranking-2017","rankings.ft.com/rankings/2711/online-mba-ranking-2017","rankings.ft.com/rankings/2808/global-mba-ranking-2018","rankings.ft.com/rankings/2809/online-mba-ranking-2018","rankings.ft.com/rankings/2825/global-mba-ranking-2019","rankings.ft.com/rankings/2826/online-mba-ranking-2019","rankings.ft.com/rankings/2837/global-mba-ranking-2020","rankings.ft.com/rankings/2838/online-mba-ranking-2020","rankings.ft.com/rankings/2859/global-mba-ranking-2021","rankings.ft.com/rankings/2860/online-mba-ranking-2021","rankings.ft.com/rankings/2866/mba-2022"],["/global-mba-ranking-20","/mba-202","/online-mba-ranking-20"]),79184:i.r(67,["rankings.ft.com/rankings/2452/executive-mba-ranking-2015","rankings.ft.com/rankings/2674/executive-mba-ranking-2016","rankings.ft.com/rankings/2766/executive-mba-ranking-2017","rankings.ft.com/rankings/2818/executive-mba-ranking-2018","rankings.ft.com/rankings/2832/executive-mba-ranking-2019","rankings.ft.com/rankings/2848/executive-mba-ranking-2020","rankings.ft.com/rankings/2863/emba-2021"],["/emba-202","/executive-mba-ranking-20"]),79187:i.r(68,["rankings.ft.com/home/masters-in-management","rankings.ft.com/rankings/2282/masters-in-management-2015","rankings.ft.com/rankings/2654/masters-in-management-2016","rankings.ft.com/rankings/2736/masters-in-management-2017","rankings.ft.com/rankings/2817/masters-in-management-2018","rankings.ft.com/rankings/2829/masters-in-management-2019","rankings.ft.com/rankings/2847/masters-in-management-2020","rankings.ft.com/rankings/5/masters-in-management-2021"],"/masters-in-management-20"),79188:i.r(67,["rankings.ft.com/home/executive-education","rankings.ft.com/rankings/2162/executive-education-open-2015","rankings.ft.com/rankings/2172/executive-education-customised-2015","rankings.ft.com/rankings/2635/executive-education-customised-2016","rankings.ft.com/rankings/2636/executive-education-open-2016","rankings.ft.com/rankings/2713/executive-education-open-2017","rankings.ft.com/rankings/2714/executive-education-customised-2017","rankings.ft.com/rankings/2812/executive-education-customised-2018","rankings.ft.com/rankings/2813/executive-education-open-2018","rankings.ft.com/rankings/2827/executive-education-customised-2019","rankings.ft.com/rankings/2828/executive-education-open-2019","rankings.ft.com/rankings/2839/executive-education-customised-2020","rankings.ft.com/rankings/2840/executive-education-open-2020","rankings.ft.com/rankings/2861/executive-education-open-directory-2021","rankings.ft.com/rankings/2862/executive-education-custom-directory-2021"],["/executive-education-custom-directory-202","/executive-education-customised-20","/executive-education-open-20","/executive-education-open-directory-202"]),79190:i.r(67,["rankings.ft.com/home/masters-in-finance","rankings.ft.com/rankings/2/masters-in-finance-post-experience-2021","rankings.ft.com/rankings/2271/masters-in-finance-pre-experience-2015","rankings.ft.com/rankings/2281/masters-in-finance-post-experience-2015","rankings.ft.com/rankings/2650/masters-in-finance-pre-experience-2016","rankings.ft.com/rankings/2652/masters-in-finance-post-experience-2016","rankings.ft.com/rankings/2733/masters-in-finance-post-experience-2017","rankings.ft.com/rankings/2734/masters-in-finance-pre-experience-2017","rankings.ft.com/rankings/2814/masters-in-finance-pre-experience-2018","rankings.ft.com/rankings/2815/masters-in-finance-post-experience-2018","rankings.ft.com/rankings/2842/masters-in-finance-pre-experience-2020","rankings.ft.com/rankings/2843/masters-in-finance-post-experience-2020","rankings.ft.com/rankings/2864/masters-in-finance-pre-experience-2021"],["/masters-in-finance-post-experience-20","/masters-in-finance-pre-experience-20"]),79436:i.r(84,i.ref(34),1,1),80663:i.r(27,["/partnercontent/accenture/"]),81250:i.r(33,3,3,6,[2859865676,2809599818]),81707:i.r(79,0,i.ref(7),1,1),81780:i.r(92,"Technology"),81781:i.r(92,"Innovation"),81782:i.r(92,"Renewable energy"),81783:i.r(90,"Carbon Trading","Carbon trading","Carbon capture and storage"),81784:i.r(92,"Natural gas"),81785:i.r(92,"Fintech"),81786:i.r(92,"Digital health"),81787:i.r(92,"Sustainability"),81788:i.r(92,"Sustainable capitalism"),81789:i.r(92,"Scientific research"),81790:i.r(92,"Future of work"),81791:i.r(92,"Corporate social responsibility"),81792:i.r(92,"ESG investing"),81793:i.r(92,"Infrastructure investment"),81794:i.r(91,316,334),81795:i.r(91,232,157),84257:i.r(14,1,1,1,6,2844429246),85612:i.q(i.acq(i.cb(0,i.ref(7),i.ge(1),1),i.tw(i.cb(0,i.t,i.ge(3),3),24192e5))),85622:i.q(i.ocq(i.ocq(i.isp("financial_times_redshift","UPL006",!1,"85622"),i.cb(0,i.pc_(9,338),i.ge(3),3)),i.cb(0,i.os(i.s,0,["ft.com/due-diligence"]),i.ge(1),1))),85906:i.q(i.ocq(i.tw(i.cb(0,i.ref(33),i.ge(3),3),3888e6),i.tw(i.cb(0,i.a([i.ref(5),i.ref(35)]),i.ge(3),3),3888e6))),85907:i.q(i.ocq(i.tw(i.cb(0,i.ref(33),i.ge(3),3),5184e6),i.tw(i.cb(0,i.a([i.ref(5),i.ref(35)]),i.ge(3),3),5184e6))),85908:i.r(66,i.ref(33),3,3,i.a([i.ref(5),i.ref(35)]),3,3),86173:i.q(i.ocq(i.tw(i.cb(0,i.os(i.s,1,["app.ft.com/stream/climatecapital","www.ft.com/climate-capital"]),i.ge(3),3),7776e6),i.tw(i.cb(0,i.pc_(9,207),i.ge(3),3),7776e6))),86956:i.r(0,i.cb(0,i.y(15,113),i.ge(1),1),i.a([i.y(7,8),i.ref(26)]),i.ge(1),1),87626:i.r(14,1,1,1,6,2911694064),87678:i.r(17,5,[66,193,272,281]),87696:i.r(83,i.t,3,3),87738:i.r(7,5,5,24,24),87739:i.r(7,14,14,24,24),87740:i.r(7,39,39,24,24),87741:i.r(8,6,6,25,25),87742:i.r(8,24,24,25,25),87744:i.r(8,96,96,25,25),88113:i.r(7,5,5,25,25),88865:i.r(68,["rankings.ft.com/home/regional-rankings","rankings.ft.com/rankings/2482/european-business-school-rankings-2015","rankings.ft.com/rankings/2688/european-business-school-rankings-2016","rankings.ft.com/rankings/2772/european-business-school-rankings-2017","rankings.ft.com/rankings/2824/european-business-school-rankings-2018","rankings.ft.com/rankings/2836/european-business-school-rankings-2019","rankings.ft.com/rankings/2858/european-business-school-rankings-2020","rankings.ft.com/rankings/2869/european-business-school-rankings-2021"],"/european-business-school-rankings-20"),91003:i.r(17,5,[49,82,84]),91345:i.r(14,1,1,1,6,2903990055),92621:i.r(7,9,9,25,25),92622:i.r(8,22,22,24,24),94606:i.r(27,["ft-energy-source"]),94607:i.r(35,1,1),94608:i.r(35,3,3),95434:i.r(75,"UPL095","95434"),98074:i.q(i.ocq(i.tw(i.cb(0,i.os(i.s,1,["app.ft.com/stream/ft-wealth","https://www.ft.com/ft-wealth"]),i.ge(3),3),5184e6),i.tw(i.cb(0,i.pc_(9,353),i.ge(3),3),5184e6))),98331:i.r(14,1,1,1,6,2932534492),99503:i.r(88,3,3,["Climate science",160,262,247,130,135,136]),99504:i.r(14,1,3,3,6,2910679366),99536:i.r(81,3,1,1,i.w,0,[1,0]),99689:i.r(92,"Workplace diversity & equality")}||{},queriesByEvent:o||{}}}));function Gr(e){return((e,n)=>o(Mr(e,n),(n=>Object.assign(Object.assign({},n),{userId:e.userId}))))(e,Tr())}function Br(e,n){const r=o((e=>mr(e,((e,n)=>n.state?p({[n.checksum]:n.state}):m)))(e),qn,wn((e=>N(new Map)))),t=o(qn(n),wn((e=>N(new Map))));return o(function(e,n){return sr("delta",e,n)}(r,t),(e=>Pn(e)))||{}}!function(e){const n=self;function r(e,r,t,i){function o(r){if("function"!=typeof n.postMessage)return e.ports[0].postMessage(r);n.postMessage(r)}if(!t)return o([r,null,i]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",t),o([r,t])}n.addEventListener("message",(function(n){if(t=n,!Array.isArray(t.data)||2!==t.data.length)return;var t;const i=n.data,[o,a]=i;if("function"==typeof e)return function(e,n,t,i){const o=function(e,n){try{return{res:e(n)}}catch(e){return{err:e}}}(n,i);return Boolean(null===(a=o)||void 0===a?void 0:a.err)?r(e,t,o.err):!(s=o.res)||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then?r(e,t,null,o.res):void o.res.then((function(n){r(e,t,null,n)}),(function(n){r(e,t,n)}));var a,s}(n,e,o,a);r(n,o,new Error("Please pass a function into register()."))}))}((e=>"QLE"===e.engine?Gr(e):function(e){switch(e.type){case"delta":return Br(e.stateMap,e.lastSentStateMapWithChecksum);case"noop":return{}}}(e)))})();',"Worker",void 0,void 0)}},477:e=>{e.exports=function(e,t,n,r){var i=self||window;try{try{var o;try{o=new i.Blob([e])}catch(t){(o=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),o=o.getBlob()}var s=i.URL||i.webkitURL,a=s.createObjectURL(o),c=new i[t](a,n);return s.revokeObjectURL(a),c}catch(r){return new i[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new i[t](r,n)}}},7582:(e,t,n)=>{n.d(t,{_T:()=>r,mG:()=>i});function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function i(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={},_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__;_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3992),(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.ho)(!0),(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.HJ)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,333))))})();